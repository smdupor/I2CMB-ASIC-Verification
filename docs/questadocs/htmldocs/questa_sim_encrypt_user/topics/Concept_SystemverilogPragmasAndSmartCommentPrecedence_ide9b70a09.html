<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="SystemVerilog Pragmas and Smart Comment Precedence" />
<meta name="abstract" content="Encryption is controlled by pragmas, and it is possible (in fact easy) to misuse pragma syntax." />
<meta name="description" content="Encryption is controlled by pragmas, and it is possible (in fact easy) to misuse pragma syntax." />
<meta name="prodname" content="" />
<meta name="version" content="3.4" />
<meta name="release" content="10.7b" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation" />
<meta name="DC.Date.Created" content="2018-01-16" />
<meta name="DC.Date.Modified" content="2020-07-10" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for ModelSim® " />
<meta name="SourceHandle" content="questa_sim_encrypt_user" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="ShowConditionIndicators" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="mgc_ih" />
<meta name="IncludeInInventory" content="Yes" />
<meta name="IncludeDraftCommentsInChangeLog" content="none" />
<meta name="HighlightColor" content="Pale%20Green" />
<meta name="HighlightChanges" content="none" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="EclipsePluginName" content="none" />
<meta name="Draft" content="None" />
<meta name="DraftDate" content="None" />
<meta name="DocumentTitle" content="Questa® SIM Encryption User’s Manual" />
<meta name="DocPackages" content="none" />
<meta name="CSHelp" content="none" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.100,doc.type.documentation.ref,product.id.P10467,product.id.P10593,product.id.P11632,product.id.P11633" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="None" />
<meta name="ActiveStatus" content="Active" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="ide9b70a09-b5d6-40e7-ab4c-30291cbff79c" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>SystemVerilog Pragmas and Smart Comment Precedence</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="SystemVerilog Pragmas and Smart Comment Precedence" />
<meta name="attributes" content="product.version.2020.4,sort.order.100,doc.type.documentation.ref,product.id.P10467,product.id.P10593,product.id.P11632,product.id.P11633" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="ide9b70a09-b5d6-40e7-ab4c-30291cbff79c">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">SystemVerilog
Pragmas and Smart Comment Precedence</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">Encryption is controlled
by pragmas, and it is possible (in fact easy) to misuse pragma syntax.</span>
</div>
<p class="p">In this discussion, blocking-pragma
syntaxes are considered to be those where a text-block is defined
by two pragmas or smart comments that establish text-start and text-end
points separated by regular HDL code. For example, the following
are blocking-pragma and smart-comment pairs that can enclose text
blocks:</p>
<pre class="pre codeblock"><code>`ifdef and`endif
`pragma protect begin and`pragma protect end
//coverage off and //coverage on</code></pre><p class="p">SystemVerilog pragma and smart comment precedence
is not well defined (and many tools have non-LRM extensions). Authors
are advised to treat blocking-pragma and smart-comment syntaxes
as if they mutually nest following regular nesting rules.</p>
<p class="p">That is, assume that any one of these start pragmas
or smart comments starts a new context. Use the paired terminal
pragma/smart comment in the same context that it was started. Note
that most of these constructs are not self-nesting (although this
is specifically defined for each individual syntax). They can nonetheless
be combined with each other in a nesting fashion:</p>
<pre class="pre codeblock"><code>`ifdef ABC
.. some text
//coverage off
.. some text
`ifdef XYZ
.. some text
`endif</code></pre><p class="p">This is a good-practice rule although not currently
enforced by the language definitions. For example, it is legal but
a mistake to do this in pre-encryption Verilog, where a `ifdef is
in visible text but its `endif is hidden under encryption.</p>
<pre class="pre codeblock"><code>`define REALLY_BAD_IDEA_DONT_DO_THIS
`ifdef LARGE_ADDRESSES
`pragma protect begin
`define ASIZE 64
`endif
`pragma protect end
module m #ASIZE (); // etc..</code></pre><p class="p">Post-encryption this text will look something
like the example below. The bad choices are now hidden under the
encryption, making it very difficult for the end user to work out
what is happening.</p>
<pre class="pre codeblock"><code>`define REALLY_BAD_IDEA_DONT_DO_THIS
`ifdef LARGE_ADDRESSES
`pragma protect begin_protected
(Something unreadable)
`pragma protect end_protected
module m #ASIZE (); // etc..</code></pre><p class="p">If a protected block is nested under an `ifdef
that isn’t currently active, you cannot guarantee that the decryption
tool will decrypt the encrypted code (this is a consequence of ambiguously
defined precedence). Hence in this case it will not see the `endif
that terminates the original `ifdef.</p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_SimulationAccessToProtectedObjects_id63a25f40.html" title="Protected objects are objects whose names are defined within decryption envelopes. Protection is lexical, and it is possible (but not advisable) to implement source code protection at boundaries that do not make HDL semantic sense. In these cases, simulation behavior can be undefined.">Simulation Access to Protected Objects</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "questa_sim_encrypt_user"
                DocTitle = "Questa® SIM Encryption User’s Manual"
                PageTitle = "SystemVerilog Pragmas and Smart Comment Precedence"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_SystemverilogPragmasAndSmartCommentPrecedence_ide9b70a09.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® SIM Encryption User’s Manual Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>