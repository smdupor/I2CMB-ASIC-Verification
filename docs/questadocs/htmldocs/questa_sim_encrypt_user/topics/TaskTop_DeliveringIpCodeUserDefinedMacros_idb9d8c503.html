<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Delivering IP Code with User-Defined Macros" />
<meta name="abstract" content="IP authors can use `pragma protect expressions to protect proprietary code containing user-defined macros and `directives. End users can then deploy the resulting encrypted IP code in a wide range of EDA tools and design flows." />
<meta name="description" content="IP authors can use `pragma protect expressions to protect proprietary code containing user-defined macros and `directives. End users can then deploy the resulting encrypted IP code in a wide range of EDA tools and design flows." />
<meta name="DC.subject" content="IP code, encrypt, vendor-defined macros, IP code, vendor-defined macros" />
<meta name="keywords" content="IP code, encrypt, vendor-defined macros, IP code, vendor-defined macros" />
<meta name="prodname" content="" />
<meta name="version" content="3.4" />
<meta name="release" content="10.7b" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation" />
<meta name="DC.Date.Created" content="2018-01-16" />
<meta name="DC.Date.Modified" content="2020-07-10" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for ModelSim® " />
<meta name="SourceHandle" content="questa_sim_encrypt_user" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="ShowConditionIndicators" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="mgc_ih" />
<meta name="IncludeInInventory" content="Yes" />
<meta name="IncludeDraftCommentsInChangeLog" content="none" />
<meta name="HighlightColor" content="Pale%20Green" />
<meta name="HighlightChanges" content="none" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="EclipsePluginName" content="none" />
<meta name="Draft" content="None" />
<meta name="DraftDate" content="None" />
<meta name="DocumentTitle" content="Questa® SIM Encryption User’s Manual" />
<meta name="DocPackages" content="none" />
<meta name="CSHelp" content="none" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.100,doc.type.documentation.ref,product.id.P10467,product.id.P10593,product.id.P11632,product.id.P11633" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="None" />
<meta name="ActiveStatus" content="Active" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idb9d8c503-0e04-41c8-bdda-161016e905b8" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Delivering IP Code with User-Defined Macros</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Delivering IP Code with User-Defined Macros" />
<meta name="attributes" content="product.version.2020.4,sort.order.100,doc.type.documentation.ref,product.id.P10467,product.id.P10593,product.id.P11632,product.id.P11633" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="idb9d8c503-0e04-41c8-bdda-161016e905b8">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Delivering IP Code with User-Defined Macros</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><span class="shortdesc">IP authors can
use <span class="keyword ParameterName Required">`pragma protect</span> expressions
to protect proprietary code containing user-defined macros and `directives.
End users can then deploy the resulting encrypted IP code in a wide range
of EDA tools and design flows. </span>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step" id="idb9d8c503-0e04-41c8-bdda-161016e905b8__id4315b576-b894-4774-aac0-a4313791aed4"><span class="ph cmd">The IP author creates proprietary
code that contains user-defined macros and `directives.</span></li>
<li class="li step" id="idb9d8c503-0e04-41c8-bdda-161016e905b8__id17453cae-53d5-41d5-94b3-30cd65c3aa2d"><span class="ph cmd">The IP author creates encryption
envelopes with <span class="keyword ParameterName Required">`pragma protect</span> expressions
to protect regions of code or entire files.</span></li>
<li class="li step" id="idb9d8c503-0e04-41c8-bdda-161016e905b8__id9c37a300-cc2b-4cc7-aae1-2ce05ac83a47"><span class="ph cmd">The IP author uses the encryption
commands to encrypt IP code contained within encryption envelopes. </span></li>
<li class="li step" id="idb9d8c503-0e04-41c8-bdda-161016e905b8__id371fef2b-7298-45ec-a1cc-bfad6ba23787"><span class="ph cmd">(Optional) You can change the <span class="ph filepath">.vp</span> or <span class="ph filepath">.vp</span> extension
of the encryted file so that the file can be used by a simulator
other than <span class="ph fmvar:ProductName">Questa Sim</span>. The
original file extension is preserved if a `directive is used in
the file to be encrypted. </span></li>
<li class="li step" id="idb9d8c503-0e04-41c8-bdda-161016e905b8__ide77153dd-0776-4fc5-959a-bbd934418872"><span class="ph cmd">The IP author delivers the
encrypted IP.</span></li>
<li class="li step" id="idb9d8c503-0e04-41c8-bdda-161016e905b8__id24333457-793b-4620-a0e4-c9cf0350e7ca"><span class="ph cmd">The IP user simulates the
code like any other file.</span></li>
</ol>
<div class="section result"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Results</h2></div><p class="p">When encrypting source text, any macros without parameters defined
on the command line are substituted (not expanded) into the encrypted
file. This makes certain macros unavailable in the encrypted source
text. </p>
<p class="p"><span class="ph fmvar:ProductName">Questa Sim</span> takes
every simple macro that is defined with the compile command (vlog)
and substitutes it into the encrypted text. This prevents third
party users of the encrypted blocks from having access to or modifying
these macros. </p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">Macros
not specified with vlog via the <span class="keyword ParameterName Required">+define+</span> option
are unmodified in the encrypted block.</p>
</div>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><p class="p">For example, the code below is an example of a file that might
be delivered by an IP provider. The filename for this module is <span class="ph filepath">example00.sv</span></p>
<pre class="pre codeblock"><code>`pragma protect data_method = "aes128-cbc"
`pragma protect key_keyowner = "Mentor Graphics Corporation"
`pragma protect key_method = "rsa"
`pragma protect key_keyname = "MGC-VERIF-SIM-RSA-2"
`pragma protect author = "Mentor", author_info = "Mentor_author"
`pragma protect begin
`timescale  1 ps / 1 ps</code></pre><pre class="pre codeblock"><code>module example00 ();
    `ifdef IPPROTECT
        reg `IPPROTECT ;
        reg otherReg ;
        initial begin
        `IPPROTECT  = 1;
        otherReg    = 0;</code></pre><pre class="pre codeblock"><code>        $display("ifdef defined as true");</code></pre><pre class="pre codeblock"><code>        `define FOO 0
        $display("FOO is defined as: ", `FOO);
        $display("reg IPPROTECT has the value: ", `IPPROTECT );
        end
    `else
        initial begin
        $display("ifdef defined as false");
        end
    `endif</code></pre><pre class="pre codeblock"><code>endmodule</code></pre><pre class="pre codeblock"><code>`pragma protect end</code></pre><p class="p">After invoking vencrypt his creates an encrypted file called <span class="ph filepath">encrypted00.sv</span>.
You can then compile this file with a macro override for the macro
“FOO” as follows:</p>
<p class="lines ApplCommand leveled">vlog +define+FOO=99 encrypted00.sv</p>
<p class="p">A customer then can override the macro FOO while the macro IPPROTECT
retains the value specified at the time of encryption, and the macro
IPPROTECT no longer exists in the encrypted file. </p>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_UsageModelsProtectingVerilogSourceCode_ide7f3680b.html" title="The encryption capabilities of Questa Sim support Verilog and SystemVerilog usage models for IP authors and their customers.">Usage Models for Protecting Verilog Source Code</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "questa_sim_encrypt_user"
                DocTitle = "Questa® SIM Encryption User’s Manual"
                PageTitle = "Delivering IP Code with User-Defined Macros"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_DeliveringIpCodeUserDefinedMacros_idb9d8c503.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® SIM Encryption User’s Manual Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>