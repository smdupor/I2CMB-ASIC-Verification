<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Simulation of SystemC Designs" />
<meta name="abstract" content="After compiling the SystemC source code, you can use the vsim command to simulate your design." />
<meta name="description" content="After compiling the SystemC source code, you can use the vsim command to simulate your design." />
<meta name="DC.subject" content="simulating, SystemC" />
<meta name="keywords" content="simulating, SystemC" />
<meta name="prodname" content="Questa SIM User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-03-05" />
<meta name="VariantPrefix" content="Q" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for Questa SV/AFV" />
<meta name="SourceHandle" content="questa_sim_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® SIM User's Manual" />
<meta name="CSHelp" content="none" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idd197cebc-acfd-47b7-b95f-2d65e84f4c6e" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Simulation of SystemC Designs</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Simulation of SystemC Designs" />
<meta name="attributes" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="idd197cebc-acfd-47b7-b95f-2d65e84f4c6e">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Simulation of SystemC Designs</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">After compiling
the SystemC source code, you can use the vsim command to simulate
your design.</span>
</div>
<div class="section Subsections"><div class="section Subsection" id="idd197cebc-acfd-47b7-b95f-2d65e84f4c6e__idd90e991c-341a-4515-a2b4-cb88e7769d67"><h2 class="title Subheading sectiontitle">Loading the
Design</h2><p class="p">For SystemC, invoke vsim with the top-level
module(s) of the design.</p>
<p class="p">Multiple optimized top design modules can be
specified. For more information about simulation with multiple optimized
design modules refer to <a class="xref Link" href="../../questa_sim_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'vsim', 'questa_sim_ref'); return false;">vsim</a> &lt;library_name&gt;.&lt;design_unit&gt;.</p>
<p class="p">For example, use the vsim command to begin
simulation on a design named top:</p>
<p class="lines ApplCommand">vsim top</p>
<p class="p">When the GUI appears (as shown in <a class="xref fm:Figure" href="#idd197cebc-acfd-47b7-b95f-2d65e84f4c6e__id66007536-c8b8-49f4-a19a-9ce1091be493">Figure 1</a>), you can expand the hierarchy of the
design to view the SystemC modules. SystemC objects are denoted
by green icons. (Refer to <a class="xref Link" href="../../questa_sim_gui_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Design Object Icons and Their Meanings', 'questa_sim_gui_ref'); return false;">Design Object Icons and Their Meanings</a> in the GUI Reference Manual
for more information). </p>
<div class="fig fignone" id="idd197cebc-acfd-47b7-b95f-2d65e84f4c6e__id66007536-c8b8-49f4-a19a-9ce1091be493"><span class="figcap"><span class="fig--title-label">Figure 1. </span>SystemC Objects in GUI</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:100" src="../graphics/SC_structure.gif" /></div><br /></div>
<p class="p">To simulate from a command shell without using
the GUI, invoke vsim with the -c argument:</p>
<p class="lines ApplCommand">vsim -c &lt;top_level_module&gt;</p>
<div class="note tip"><span class="tiptitle">Tip</span> <p class="p">If you want to run
a design with sc_main() as the top level, refer to <a class="xref fm:HeadingOnly" href="Concept_RecommendationsUsingScMainAtTopLevel_idcca049a5.html#idcca049a5-2f70-4489-99b4-f16d0180de55__Concept_RecommendationsUsingScMainAtTopLevel_idcca049a5.xml#idcca049a5-2f70-4489-99b4-f16d0180de55" title="Generally, your design should include sc_main() at the top level in order for Questa SIM to run the SystemC/C++ source code. Questa SIM executes sc_main() as a thread process. This allows you to use test bench code and C++ variables (including SystemC primitive channels, ports, and modules) inside sc_main().">Recommendations for using sc_main at the Top Level</a>.</p>
</div>
</div>
<div class="section Subsection" id="idd197cebc-acfd-47b7-b95f-2d65e84f4c6e__id2b662215-dc8f-4e9f-9503-24b156149386"><h2 class="title Subheading sectiontitle">Running Simulation</h2><p class="p">Run the simulation using
the <a class="xref Link" href="../../questa_sim_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'run', 'questa_sim_ref'); return false;">run</a> command
or choose one of the <span class="ph menucascade"><span class="ph uicontrol">Simulate</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Run</span></span> selections from the main
menu.</p>
</div>
<div class="section Subsection" id="idd197cebc-acfd-47b7-b95f-2d65e84f4c6e__id75678f5b-3536-4b3c-82b5-6f4c3d2e0864"><h2 class="title Subheading sectiontitle">SystemC Time Unit and Simulator Resolution</h2><p class="p">This section applies to simulations on designs
consisting of SystemC only. For simulations of mixed-language designs,
the rules for how <span class="ph fmvar:ProductName">Questa SIM</span> interprets
the resolution vary. </p>
<p class="p">Two related yet distinct concepts are involved
with determining the simulation resolution: the SystemC time unit
and the simulator resolution. The following table describes the
concepts, lists the default values, and defines the methods for
setting/overriding the values.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="idd197cebc-acfd-47b7-b95f-2d65e84f4c6e__id1484f0d3-1e47-4263-96a8-f82e0cad4b27" class="table" frame="border" border="1" rules="cols"><caption><span class="tablecap"><span class="table--title-label">Table 1. </span>Time Unit and Simulator Resolution</span></caption><colgroup><col style="width:0.835in" /><col style="width:1.729in" /><col style="width:0.973in" /><col style="width:0.696in" /><col style="width:2.266in" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d162216e305"> </th>
<th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d162216e306"><p class="p">Description</p>
</th>
<th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d162216e309"><p class="p">Set by default as <span class="ph filepath">.ini</span> file </p>
</th>
<th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d162216e315"><p class="p">Default value</p>
</th>
<th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d162216e318"><p class="p">Override default by</p>
</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d162216e305 "><p class="p">SystemC time unit</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d162216e306 "><p class="p">The unit of time used
in your SystemC source code. </p>
<p class="p">You need to set this in cases where your SystemC
default time unit is at odds with any other, non-SystemC segments
of your design. </p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d162216e309 "><p class="p"><a class="xref fm:HeadingOnly" href="Command_Sctimeunit_id0c44336d.html#id0c44336d-1fd1-4d91-ad44-5ae8dc40c0f4__Command_Sctimeunit_id0c44336d.xml#id0c44336d-1fd1-4d91-ad44-5ae8dc40c0f4" title="This variable sets the default time unit for SystemC simulations.">ScTimeUnit</a></p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d162216e315 "><p class="p">1ns</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d162216e318 "><p class="p">ScTimeUnit <span class="ph filepath">.ini</span> file variable
or <span class="ph FontProperty HeadingLabel">sc_set_default_time_unit()</span> function
before an sc_clock or sc_time statement.</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d162216e305 "><p class="p">Simulator resolution</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d162216e306 "><p class="p">The smallest unit of
time measured by the simulator. </p>
<p class="p">If a warning is issued and your delays get
truncated, set the resolution smaller; this value must be less than or
equal to the <a class="xref fm:HeadingOnly" href="Command_Usertimeunit_id7119d302.html#id7119d302-ba5a-4ac4-82d4-7b9f86b960d4__Command_Usertimeunit_id7119d302.xml#id7119d302-ba5a-4ac4-82d4-7b9f86b960d4" title="This variable specifies the multiplier for simulation time units and the default time units for commands such as force and run. Generally, you should set this variable to default, in which case it takes the value of the Resolution variable.">UserTimeUnit</a></p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d162216e309 "><p class="p"><a class="xref fm:HeadingOnly" href="Command_Resolution_idd6eb8585.html#idd6eb8585-e2b2-4381-973a-a9363b42ad3b__Command_Resolution_idd6eb8585.xml#idd6eb8585-e2b2-4381-973a-a9363b42ad3b" title="This variable specifies the simulator resolution. The argument must be less than or equal to the UserTimeUnit and must not contain a space between value and units.">Resolution</a></p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d162216e315 "><p class="p">1ns</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d162216e318 "><p class="p"><span class="ph FontProperty HeadingLabel">-t</span> argument
to <a class="xref Link" href="../../questa_sim_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'vsim', 'questa_sim_ref'); return false;">vsim</a> (This overrides
all other resolution settings.) </p>
<p class="p"><span class="ph FontProperty HeadingLabel">sc_set_time_resolution()</span> function
or </p>
<p class="p">GUI: <span class="ph uicontrol">Simulate &gt; Start Simulation
&gt; Resolution</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p">Available settings for both time unit and resolution
are: 1x, 10x, or 100x of fs, ps, ns, us, ms, or sec.</p>
<p class="p">See <a class="xref fm:HeadingOnly" href="General_SimulatorResolutionLimit_id3e98ae5f.html#id3e98ae5f-be62-448c-97a7-ac81d77f1a43__General_SimulatorResolutionLimit_id3e98ae5f.xml#id3e98ae5f-be62-448c-97a7-ac81d77f1a43" title="In a mixed-language design with only one top-level design unit, the resolution for simulation time of the top design unit is applied to the whole design.">Simulator Resolution Limit</a> for details on mixed-language simulations.</p>
<p class="p">You can view the current simulator resolution
by invoking the <a class="xref Link" href="../../questa_sim_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'report', 'questa_sim_ref'); return false;">report</a> command
with the <span class="ph uicontrol">simulator state</span> option.</p>
</div>
<div class="section Subsection" id="idd197cebc-acfd-47b7-b95f-2d65e84f4c6e__id9ccbaf2f-481c-464e-9e35-1f39a63df159"><h2 class="title Subheading sectiontitle">Choosing
Your Simulator Resolution</h2><p class="p">You should choose the coarsest simulator resolution
limit possible that does not result in undesired rounding of your
delays. For example, values smaller than the current Time Scale
will be truncated to zero (0) and a warning issued. However, the
time precision should also not be set unnecessarily small, because
in some cases performance will be degraded.</p>
<p class="p">When deciding what to set the simulator’s resolution
to, you must keep in mind the relationship between the simulator’s
resolution and the SystemC time units specified in the source code.
For example, with a time unit usage of:</p>
<pre class="pre codeblock leveled"><code>sc_wait(10, SC_PS); </code></pre><p class="p">a simulator resolution of 10ps would be fine.
No rounding off of the ones digits in the time units would occur.
However, a specification of:</p>
<pre class="pre codeblock leveled"><code>sc_wait(9, SC_PS); </code></pre><p class="p">would require you to set the resolution limit
to 1ps in order to avoid inaccuracies caused by rounding.</p>
</div>
<div class="section Subsection" id="idd197cebc-acfd-47b7-b95f-2d65e84f4c6e__idfa731d03-4655-4e10-9a9e-11aa723809b6"><h2 class="title Subheading sectiontitle">Initialization and Cleanup of SystemC
State-Based Code</h2><p class="p">State-based code should not be used in Constructors
and Destructors. Constructors and Destructors should be reserved
for creating and destroying SystemC design objects, such as sc_modules
or sc_signals. State-based code should also not be used in the elaboration
phase callbacks <span class="ph uicontrol">before_end_of_elaboration()</span> and <span class="ph uicontrol">end_of_elaboration()</span>.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">If you have a design
in which some state-based code must be placed in the constructor,
destructor, or the elaboration callbacks, you can use the <span class="ph FontProperty HeadingLabel">mti_IsVoptMode()</span> function
to determine if the elaboration is being run by <a class="xref Link" href="../../questa_sim_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'vopt', 'questa_sim_ref'); return false;">vopt</a>.
You can use this function to prevent vopt from executing any state-based
code. </p>
</div>
<p class="p">The following virtual
functions should be used to initialize and clean up state-based
code, such as logfiles or the VCD trace functionality of SystemC.
They are virtual methods of the following classes: sc_port_base,
sc_module, sc_channel, and sc_prim_channel. You can think of them
as phase callback routines in the SystemC language:</p>
<ul class="ul"><li class="li" id="idd197cebc-acfd-47b7-b95f-2d65e84f4c6e__idcf9e25d8-c9ea-418e-812b-13b0ca6a22a3"><p class="p">before_end_of_elaboration () — Called
after all constructors are called, but before port binding.</p>
</li>
<li class="li" id="idd197cebc-acfd-47b7-b95f-2d65e84f4c6e__idb3cda545-fcf4-421b-b146-8d3da3805ecf"><p class="p">end_of_elaboration () — Called at the
end of elaboration after port binding. </p>
</li>
<li class="li" id="idd197cebc-acfd-47b7-b95f-2d65e84f4c6e__id0f74815d-c631-42ca-af51-a84577088942"><p class="p">start_of_simulation () — Called before
simulation starts. Simulation-specific initialization code can be
placed in this function. </p>
</li>
<li class="li" id="idd197cebc-acfd-47b7-b95f-2d65e84f4c6e__id16c26ad1-9843-440c-9698-34b91f61e42d"><p class="p">end_of_simulation () — Called before
ending the current simulation session.</p>
</li>
</ul>
<p class="p">The call sequence for these functions with
respect to the SystemC object construction and destruction is as
follows:</p>
<ol class="ol"><li class="li" id="idd197cebc-acfd-47b7-b95f-2d65e84f4c6e__id5065de8d-d0f2-4b7f-bd3c-c1ea7461b6c1"><p class="p">Constructors</p>
</li>
<li class="li" id="idd197cebc-acfd-47b7-b95f-2d65e84f4c6e__idab85f710-d8c8-4f88-a479-0ef6e2c6e1a1"><p class="p">before_end_of_elaboration ()</p>
</li>
<li class="li" id="idd197cebc-acfd-47b7-b95f-2d65e84f4c6e__id85343ab0-e984-492c-94c7-a738a953c23e"><p class="p">end_of_elaboration ()</p>
</li>
<li class="li" id="idd197cebc-acfd-47b7-b95f-2d65e84f4c6e__ide947c481-6fc8-4921-996e-24a8d0393620"><p class="p">start_of_simulation ()</p>
</li>
<li class="li" id="idd197cebc-acfd-47b7-b95f-2d65e84f4c6e__id48aa68ca-c06c-4df5-bab1-97f86f358c67"><p class="p">end_of_simulation ()</p>
</li>
<li class="li" id="idd197cebc-acfd-47b7-b95f-2d65e84f4c6e__iddd4e68e5-8d1e-419a-870e-91ba235ab633"><p class="p">Destructors</p>
</li>
</ol>
</div>
<div class="section Subsection" id="idd197cebc-acfd-47b7-b95f-2d65e84f4c6e__id6b09cf60-0caa-4078-ac16-a5c0cb7acb23"><h2 class="title Subheading sectiontitle">Usage of
Callbacks</h2><p class="p">The <span class="ph FontProperty HeadingLabel">start_of_simulation()</span> callback
is used to initialize any state-based code. The corresponding cleanup
code should be placed in the <span class="ph FontProperty HeadingLabel">end_of_simulation()</span> callback.
These callbacks are called by vsim only during simulation and thus
are safe.</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_SystemcSimulation_id0a80723e.html" title="This chapter describes how to compile and simulate SystemC designs with the Questa SIM simulator. The simulator implements the SystemC language based on the Open SystemC Initiative (OSCI) proof-of-concept SystemC simulator. The default supported version of SystemC is the IEEE 1666-2011 standard, SystemC-2.3.2. Release 2.3.2 of SystemC includes Release 2.0.3 of Transaction Level Modeling (TLM) code. It is recommended that you obtain the OSCI functional specification or the latest version of the IEEE Std 1666-2011, IEEE Standard SystemC Language Reference Manual.">SystemC Simulation</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../topics/Contain_ScvExtensionsUserSpecifiedTypes_id84b8a53f.html#id84b8a53f-0b4a-4fee-a9bd-bf41c345199b__" title="This section explains the rules for generating SCV extensions for user-specified types such as structures, unions, classes, and enums.">SCV Extensions for User-specified Types</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "questa_sim_user"
                DocTitle = "Questa® SIM User's Manual"
                PageTitle = "Simulation of SystemC Designs"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_SimulationSystemcDesigns_idd197cebc.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® SIM User's Manual Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>