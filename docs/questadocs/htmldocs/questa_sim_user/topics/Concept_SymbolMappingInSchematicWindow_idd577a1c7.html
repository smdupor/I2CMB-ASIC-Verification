<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Symbol Mapping in the Schematic Window" />
<meta name="abstract" content="The Schematic window has built-in mappings for all Verilog primitive gates (for example, AND, OR, and so forth). You can also map VHDL entities and Verilog/SystemVerilog modules that represent a cell definition, or processes, to built-in gate symbols." />
<meta name="description" content="The Schematic window has built-in mappings for all Verilog primitive gates (for example, AND, OR, and so forth). You can also map VHDL entities and Verilog/SystemVerilog modules that represent a cell definition, or processes, to built-in gate symbols." />
<meta name="DC.subject" content="symbol mapping, Dataflow window, primitives, symbols in Dataflow window, dataflow.bsm file, .bsm file, mapping, symbols" />
<meta name="keywords" content="symbol mapping, Dataflow window, primitives, symbols in Dataflow window, dataflow.bsm file, .bsm file, mapping, symbols" />
<meta name="prodname" content="Questa SIM User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-03-05" />
<meta name="VariantPrefix" content="Q" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for Questa SV/AFV" />
<meta name="SourceHandle" content="questa_sim_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® SIM User's Manual" />
<meta name="CSHelp" content="none" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idd577a1c7-eb35-41d3-958c-1cb9f8ab8f90" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Symbol Mapping in the Schematic Window</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Symbol Mapping in the Schematic Window" />
<meta name="attributes" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="idd577a1c7-eb35-41d3-958c-1cb9f8ab8f90">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Symbol Mapping in the Schematic Window</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">The Schematic
window has built-in mappings for all Verilog primitive gates (for
example, AND, OR, and so forth). You can also map VHDL entities
and Verilog/SystemVerilog modules that represent a cell definition,
or processes, to built-in gate symbols. </span>
</div>
<p class="p">The mappings
are saved in a file where the default filename is <span class="ph filepath">schematic.bsm</span> (<span class="ph filepath">.bsm</span> stands
for "Built-in Symbol Map") The Schematic window looks in the current
working directory and inside each library referenced by the design
for the file. It will read all files found. You can also manually load
a <span class="ph filepath">.bsm</span> file by selecting <span class="ph menucascade"><span class="ph uicontrol">Schematic</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Schematic Preferences</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Load Built in Symbol Map</span></span>.</p>
<p class="p">The <span class="ph filepath">schematic.bsm</span> file
contains comments and name pairs, one comment or name per line.
Use the following Backus-Naur Format naming syntax: </p>
<pre class="pre codeblock"><code>&lt;bsm_line&gt; ::= &lt;comment&gt; | &lt;statement&gt;
	&lt;comment&gt; ::= "#" &lt;text&gt; &lt;EOL&gt;
	&lt;statement&gt; ::= &lt;name_pattern&gt; &lt;gate&gt;
	&lt;name_pattern&gt; ::= [&lt;library_name&gt; "."] 
	&lt;du_name&gt; ["("&lt;specialization&gt; 	")"][","&lt;process_name&gt;]
	&lt;gate&gt; ::= 
	"BUF"|"BUFIF0"|"BUFIF1"|"INV"|"INVIF0"|"INVIF1"|"AND"|"NAND"|"NOR" |
	"OR"|"XNOR"|"XOR"|"PULLDOWN"|"PULLUP"|"NMOS"|"PMOS"|"CMOS"|
	"TRAN"| 	"TRANIF0"|"TRANIF1" </code></pre><p class="p">For example:</p>
<pre class="pre codeblock"><code>org(only),p1 OR
andg(only),p1 AND
mylib,andg.p1  AND
norg,p2 NOR</code></pre><p class="p">Entities and modules representing cells are mapped the same way:</p>
<pre class="pre codeblock"><code>AND1 AND
# A 2-input and gate
AND2 AND 
mylib,andg.p1  AND
xnor(test) XNOR</code></pre><p class="p">Note that for primitive gate symbols, pin mapping
is automatic.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">Note that for primitive
gate symbols, pin mapping is automatic. When you map a module/entity,
it must be defined as a cell via `celldefine in Verilog.</p>
</div>
<p class="p">The default filename is <span class="ph filepath">schematic.bsm </span>(.<span class="ph filepath">bsm</span> stands
for “Built-in Symbol Map”). The Schematic window looks in the current
working directory and inside each library referenced by the design for
the file <span class="ph filepath">schematic.bsm</span>. It will read all files
found. You can also manually load a <span class="ph filepath">.bsm</span> file
by selecting <span class="ph menucascade"><span class="ph uicontrol">Schematic</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Symbol Library</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Load Built in Symbol Map</span></span>.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">The Schematic window
will search for mapping files named <span class="ph filepath">dataflow.bsm</span> first,
then <span class="ph filepath">schematic.bsm</span> in order to maintain backwards
compatibility with designs simulated with older versions of <span class="ph fmvar:ProductName">Questa SIM</span>.</p>
</div>
<div class="section Subsections"><div class="section Subsection" id="idd577a1c7-eb35-41d3-958c-1cb9f8ab8f90__id8c816500-5658-4898-b723-c09ea96cc9e3"><h2 class="title Subheading sectiontitle">User-Defined Symbols</h2><p class="p">You can also define your own symbols using
an ASCII symbol library file format for defining symbol shapes.
This capability is delivered via Concept Engineering’s NlviewTM widget
Symlib format. The symbol definitions are saved in the <span class="ph filepath">schematic.sym</span> file.</p>
<p class="p">The
formal BNF format for the <span class="ph filepath">schematic.sym</span> file
format is:</p>
<pre class="pre codeblock"><code>&lt;sym_line&gt; ::= &lt;comment&gt; | &lt;statement&gt;
	&lt;comment&gt; ::= "#" &lt;text&gt; &lt;EOL&gt;
	&lt;statement&gt; ::= "symbol" &lt;name_pattern&gt; "*" "DEF" &lt;definition&gt;
	&lt;name_pattern&gt; ::= [&lt;library_name&gt; "."] &lt;du_name&gt; ["(" 
	&lt;specialization&gt; ")"] [","&lt;process_name&gt;]
	&lt;gate&gt; ::= "port" | "portBus" | "permute" | "attrdsp" | "pinattrdsp" 
	| "arc" | "path" | "fpath" | "text" | "place" | "boxcolor" </code></pre><div class="note note"><span class="notetitle">Note:</span> <p class="p">The port names in
the definition must match the port names in the entity or module
definition or mapping will not occur.</p>
</div>
<p class="p">The Schematic window will search the current
working directory, and inside each library referenced by the design,
for the file <span class="ph filepath">schematic.sym</span>. Any and all files found
will be given to the Nlview widget to use for symbol lookups. Again,
as with the built-in symbols, the DU name and optional process name
is used for the symbol lookup. Here's an example of a symbol for
a full adder:</p>
<pre class="pre codeblock leveled"><code>symbol adder(structural) * DEF \
	port a in -loc -12 -15 0 -15 \
	pinattrdsp @name -cl 2 -15 8 \
	port b in -loc -12 15 0 15 \
	pinattrdsp @name -cl 2 15 8 \
	port cin in -loc 20 -40 20 -28 \
	pinattrdsp @name -uc 19 -26 8 \
	port cout out -loc 20 40 20 28 \
	pinattrdsp @name -lc 19 26 8 \
	port sum out -loc 63 0 51 0 \
	pinattrdsp @name -cr 49 0 8 \
	path 10 0 0 7 \
	path 0 7 0 35 \
	path 0 35 51 17 \
	path 51 17 51 -17 \
	path 51 -17 0 -35 \
	path 0 -35 0 -7 \
	path 0 -7 10 0
</code></pre><p class="p">Port mapping is done by name for these symbols,
so the port names in the symbol definition must match the port names
of the Entity|Module|Process (in the case of the process, it is
the signal names that the process reads/writes).</p>
<p class="p">When you create or modify
a symlib file, you must generate a file index. This index is how
the Nlview widget finds and extracts symbols from the file. To generate
the index, select <span class="ph menucascade"><span class="ph uicontrol">Schematic</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Schematic Preferences</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Create Symlib
Index</span></span> (Schematic window) and specify the
symlib file. The file will be rewritten with a correct, up-to-date
index. If you save the file as <span class="ph filepath">schematic.sym</span> the
Schematic window will automatically load the file. You can also
manually load a <span class="ph filepath">.sym</span> file by selecting <span class="ph menucascade"><span class="ph uicontrol">Schematic</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Schematic Preferences</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Load Symlib Library</span></span>.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">When you map a process
to a gate symbol, it is best to name the process statement within
your HDL source code, and use that name in the <span class="ph filepath">.bsm</span> or <span class="ph filepath">.sym</span> file.
If you reference a default name that contains line numbers, you
will need to edit the <span class="ph filepath">.bsm</span> and/or <span class="ph filepath">.sym</span> file every
time you add or subtract lines in your HDL source.</p>
<p class="p">The Schematic window will search for
mapping files named <span class="ph filepath">dataflow.sym</span> first, then <span class="ph filepath">schematic.sym</span> in
order to maintain backwards compatibility with designs simulated
with older versions of <span class="ph fmvar:ProductName">Questa SIM</span>.</p>
</div>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_SchematicWindow_id32d6c93c.html" title="The Schematic window provides an implementation view of your design, allowing you to see design structure, connectivity, and hierarchy without consulting the RTL. It allows you to explore the “physical” connectivity of your design; to trace events that propagate through the design; and to identify the cause of unexpected outputs.">Schematic Window</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "questa_sim_user"
                DocTitle = "Questa® SIM User's Manual"
                PageTitle = "Symbol Mapping in the Schematic Window"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_SymbolMappingInSchematicWindow_idd577a1c7.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® SIM User's Manual Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>