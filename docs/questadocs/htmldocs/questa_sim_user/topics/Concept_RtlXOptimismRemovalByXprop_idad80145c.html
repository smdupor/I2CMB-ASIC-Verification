<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="RTL X-Optimism Removal by xprop" />
<meta name="abstract" content="When you use xprop functionality to remove X-optimism, the removal mainly affects a limited set of Verilog or VHDL constructs used in the design." />
<meta name="description" content="When you use xprop functionality to remove X-optimism, the removal mainly affects a limited set of Verilog or VHDL constructs used in the design." />
<meta name="prodname" content="Questa SIM User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-03-05" />
<meta name="VariantPrefix" content="Q" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for Questa SV/AFV" />
<meta name="SourceHandle" content="questa_sim_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® SIM User's Manual" />
<meta name="CSHelp" content="none" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idad80145c-e775-4aac-883e-c183de42a471" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>RTL X-Optimism Removal by xprop</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="RTL X-Optimism Removal by xprop" />
<meta name="attributes" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="idad80145c-e775-4aac-883e-c183de42a471">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">RTL X-Optimism Removal by xprop</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">When you use
xprop functionality to remove X-optimism, the removal mainly affects
a limited set of Verilog or VHDL constructs used in the design. </span>
</div>
<div class="section Subsections"><div class="section Subsection" id="idad80145c-e775-4aac-883e-c183de42a471__id0bcc0c13-3c51-4a98-87dd-37d4d1f87144"><h2 class="title Subheading sectiontitle">X-Optimism
and X-Pessimism in RTL </h2><p class="p">RTL simulation uses the value of X to temporarily represent a
state that cannot be predicted or determined at a given time. Because
X values do not appear in the design once it has been implemented
in silicon, a mismatch can occur between simulation and silicon.</p>
<h2 class="title Subheading sectiontitle">Example 1</h2><pre class="pre codeblock"><code>if (en)                 
  q = d1;
else
  q = d2;</code></pre><p class="p">If the value of en becomes X, then the
RTL semantic considers it false and implements the else branch of
the if statement. However, in actual hardware, either of the two
branches can be implemented. In some cases, this RTL X-optimism
can hide potential bugs. </p>
<h2 class="title Subheading sectiontitle">Example 2</h2><pre class="pre codeblock leveled"><code>assign out = (sel &amp; a) || (!sel &amp; b);</code></pre><p class="p">If sel becomes X,
then the RTL semantic assigns X to out, irrespective of the values
of a and b. However, in actual hardware, if a and b are equal, then
out should take the value of either a or b. Because of this RTL
X-pessimism, you can lose a great deal of time debugging the cause
of a pessimistic X, only to find that there is no actual design
problem.</p>
<p class="p">By default, the simulator identifies
certain scenarios of X‑propagation in the design, similar to these
examples, which can cause mismatches in RTL-to-silicon. The simulator then
modifies the X‑propagation to make the simulation more silicon-compatible
(that is, more X-pessimistic or more X-optimistic). </p>
<p class="p">Removing X-optimism for Verilog and VHDL is described below. </p>
</div>
<div class="section Subsection" id="idad80145c-e775-4aac-883e-c183de42a471__idb08c55fb-7b61-4fb1-8ff3-d4f934cbf8c7"><h2 class="title Subheading sectiontitle">Verilog </h2><p class="p">Using xprop functionality to remove X-optimism affects the following
types of Verilog constructs: </p>
<ul class="ul"><li class="li" id="idad80145c-e775-4aac-883e-c183de42a471__idcde9b67f-3620-4ed5-bbc1-5c30de5bfb91"><p class="p">if-else</p>
</li>
<li class="li" id="idad80145c-e775-4aac-883e-c183de42a471__id4390fb36-ed19-460d-8e66-ccb531371992"><p class="p">case</p>
</li>
<li class="li" id="idad80145c-e775-4aac-883e-c183de42a471__idb818dfb4-f9b5-43d2-b374-83b5f57bcb9f"><p class="p">clocking trigger</p>
</li>
</ul>
<p class="p">Consider the following if-else construct:</p>
<pre class="pre codeblock"><code>if (en)
	q = d1;
else
	q =d2;</code></pre><p class="p">Here, the simulator checks
for X values on existing if conditions and pessimistically drives
all the writers to X. This modification effectively acts as wrapping
a conditional branching statement with an immediate assertion that
checks for X. </p>
<p class="p">That is, xprop functionality treats this if-else construct as
follows:</p>
<pre class="pre codeblock"><code>assert (!$isunknown(en)) begin
   if (en) // normal branch
      q = d1;
   else
      q = d2;
   end
else // unknown branch
    q = `x;</code></pre></div>
<div class="section Subsection" id="idad80145c-e775-4aac-883e-c183de42a471__id53c8448a-a429-4417-9393-21243abae3a1"><h2 class="title Subheading sectiontitle">VHDL</h2><p class="p">Using xprop functionality to remove X-optimism affects the following
types of VHDL constructs: </p>
<ul class="ul"><li class="li" id="idad80145c-e775-4aac-883e-c183de42a471__id2f34a2e1-0d21-48c4-93f7-26ca5dfb4260"><p class="p">process</p>
</li>
<li class="li" id="idad80145c-e775-4aac-883e-c183de42a471__idc5cfaf91-c0a5-46c0-b124-09597960c70c"><p class="p">conditional
signal assignment </p>
</li>
<li class="li" id="idad80145c-e775-4aac-883e-c183de42a471__id221c412b-66a0-42b9-9e63-716394393db3"><p class="p">selected signal
assignment </p>
</li>
</ul>
<p class="p">For the following VHDL process: </p>
<pre class="pre codeblock"><code>     process(en)
         begin
           if(en = '1' ) then
             out1 &lt;= in1;
           end if;
         end</code></pre><p class="p BlockIndent">if en becomes X (or U), then the
simulator applies xprop functionality for out1. </p>
<p class="p">For the following VHDL conditional signal assignment: </p>
<pre class="pre codeblock"><code>	out1 &lt;= ‘1’ when (set = ‘0’) else ‘0’;</code></pre><p class="p BlockIndent">if sel becomes X or U, then the
simulator applies xprop functionality on out1. </p>
<p class="p">For the following VHDL selected signal assignment: </p>
<pre class="pre codeblock"><code>with s1 select
    		out1 &lt;= ‘1’ when ‘0’ ,
      			    ‘0’  when  others;</code></pre><p class="p BlockIndent">if s1 becomes X or U, then the simulator applies
xprop functionality on out1. </p>
<div class="note tip"><span class="tiptitle">Tip</span> <p class="p">You can use vopt -xprop_disable=stducheck
to disable checking for U values and check only for X values on
conditions for std_logic.</p>
</div>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_XPropagationInSimulation_id13e7634f.html" title="The simulator provides several commands to manage the propagation of X values that occur in RTL simulation (for both Verilog and VHDL models). These commands enable you to modify the simulation behavior so that it corresponds more closely to the silicon behavior.">X Propagation in Simulation</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "questa_sim_user"
                DocTitle = "Questa® SIM User's Manual"
                PageTitle = "RTL X-Optimism Removal by xprop"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_RtlXOptimismRemovalByXprop_idad80145c.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® SIM User's Manual Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>