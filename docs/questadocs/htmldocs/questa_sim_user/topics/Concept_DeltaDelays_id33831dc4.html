<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Delta Delays" />
<meta name="abstract" content="Event-based simulators such as Questa SIM can process many events at a given simulation time. Multiple signals may need updating, statements that are sensitive to these signals must be executed, and any new events that result from these statements must then be queued and executed as well. The steps taken to evaluate the design without advancing simulation time are referred to as &#34;delta times&#34; or just &#34;deltas.&#34;" />
<meta name="description" content="Event-based simulators such as Questa SIM can process many events at a given simulation time. Multiple signals may need updating, statements that are sensitive to these signals must be executed, and any new events that result from these statements must then be queued and executed as well. The steps taken to evaluate the design without advancing simulation time are referred to as &#34;delta times&#34; or just &#34;deltas.&#34;" />
<meta name="DC.subject" content="deltas, explained, delay, delta delays, zero delay elements" />
<meta name="keywords" content="deltas, explained, delay, delta delays, zero delay elements" />
<meta name="prodname" content="Questa SIM User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-03-05" />
<meta name="VariantPrefix" content="Q" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for Questa SV/AFV" />
<meta name="SourceHandle" content="questa_sim_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® SIM User's Manual" />
<meta name="CSHelp" content="none" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id33831dc4-6fde-47ea-9529-ce5ffcf207a1" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Delta Delays</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Delta Delays" />
<meta name="attributes" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id33831dc4-6fde-47ea-9529-ce5ffcf207a1">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Delta Delays</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">Event-based
simulators such as <span class="ph fmvar:ProductName">Questa SIM</span> can
process many events at a given simulation time. Multiple signals
may need updating, statements that are sensitive to these signals
must be executed, and any new events that result from these statements
must then be queued and executed as well. The steps taken to evaluate
the design without advancing simulation time are referred to as
"delta times" or just "deltas."</span>
</div>
<p class="p"><a class="xref fm:Figure" href="#id33831dc4-6fde-47ea-9529-ce5ffcf207a1__idade1efb7-918f-46fc-b98c-26e8626085c7">Figure 1</a> illustrates the process for VHDL designs.
This process continues until the end of simulation time.</p>
<div class="fig fignone" id="id33831dc4-6fde-47ea-9529-ce5ffcf207a1__idade1efb7-918f-46fc-b98c-26e8626085c7"><span class="figcap"><span class="fig--title-label">Figure 1. </span>VHDL Delta Delay Process</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:100" src="../graphics_composites/a_vhdl06a.png" /></div><br /></div>
<p class="p">This mechanism in event-based simulators may
cause unexpected results. Consider the following code fragment:</p>
<pre class="pre codeblock leveled"><code>  clk2 &lt;= clk;

  process (rst, clk)
  begin
    if(rst = '0')then
      s0 &lt;= '0';
    elsif(clk'event and clk='1') then
      s0 &lt;= inp;
    end if;
  end process;

process (rst, clk2)
  begin
    if(rst = '0')then
      s1 &lt;= '0';
    elsif(clk2'event and clk2='1') then
      s1 &lt;= s0;
    end if;
  end process;</code></pre><p class="p">In this example, there are two synchronous
processes, one triggered with <span class="ph FontProperty emphasis">clk</span> and
the other with <span class="ph FontProperty emphasis">clk2</span>. Consider
the unexpected situation of the signals changing in the <span class="ph FontProperty emphasis">clk2</span> process
on the same edge as they are set in the <span class="ph FontProperty emphasis">clk</span> process.
As a result, the value of <span class="ph FontProperty emphasis">inp</span> appears
at <span class="ph FontProperty emphasis">s1</span> rather than <span class="ph FontProperty emphasis">s0</span>.</p>
<p class="p">During simulation an event on <span class="ph FontProperty emphasis">clk</span> occurs
(from the test bench). From this event, <span class="ph fmvar:ProductName">Questa SIM</span> performs
the "clk2 &lt;= clk" assignment and the process that is sensitive
to <span class="ph FontProperty emphasis">clk</span>. Before advancing
the simulation time, <span class="ph fmvar:ProductName">Questa SIM</span> finds
that the process sensitive to <span class="ph FontProperty emphasis">clk2</span> can
also be run. Since there are no delays present, the value of <span class="ph FontProperty emphasis">inp</span> appears
at <span class="ph FontProperty emphasis">s1</span> in the
same simulation cycle.</p>
<p class="p">In order to correct this and get the expected
results, you must do one of the following:</p>
<ul class="ul"><li class="li" id="id33831dc4-6fde-47ea-9529-ce5ffcf207a1__id3d16f6f4-51f1-4af0-a02c-3bbff892403e"><p class="p">Insert a delay at every output</p>
</li>
<li class="li" id="id33831dc4-6fde-47ea-9529-ce5ffcf207a1__id0d3d8d76-f648-4a3d-a6de-c2f024792dc5"><p class="p">Use the same clock</p>
</li>
<li class="li" id="id33831dc4-6fde-47ea-9529-ce5ffcf207a1__id547e3bf6-0261-4491-9fff-1a03d96d65d9"><p class="p">Insert a delta delay</p>
</li>
</ul>
<p class="p">To insert a delta delay, modify the code as
follows:</p>
<pre class="pre codeblock"><code>process (rst, clk)
    begin
      if(rst = ’0’)then
        s0 &lt;= ’0’;
      elsif(clk’event and clk=’1’) then
        s0 &lt;= inp;
      end if;
    end process;
        s0_delayed &lt;= s0;
   process (rst, clk2)
    begin
      if(rst = ’0’)then
        s1 &lt;= ’0’;
      elsif(clk2’event and clk2=’1’) then
        s1 &lt;= s0_delayed;
      end if;
    end process;</code></pre><p class="p">The best way to debug delta delay problems
is to observe your signals in the <a class="xref Link" href="../../questa_sim_gui_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Wave Window', 'questa_sim_gui_ref'); return false;">Wave Window</a> or <a class="xref Link" href="../../questa_sim_gui_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'List Window', 'questa_sim_gui_ref'); return false;">List Window</a> (refer to the GUI Reference Manual for more information
on these windows). There you can see how values change at each delta
time.</p>
<div class="section Subsections"><div class="section Subsection" id="id33831dc4-6fde-47ea-9529-ce5ffcf207a1__id62f66cfb-a4ac-40df-8131-23abfa3275e8"><h2 class="title Subheading sectiontitle">Detecting
Infinite Zero-Delay Loops</h2><p class="p">If a large number of deltas occur without
advancing time, it is usually a symptom of an infinite zero-delay
loop in the design. In order to detect the presence of these loops, <span class="ph fmvar:ProductName">Questa SIM</span> defines a limit,
the “iteration limit", on the number of successive deltas that can
occur. When <span class="ph fmvar:ProductName">Questa SIM</span> reaches
the iteration limit, it stops the simulation and issues an error
message.</p>
<p class="p">The iteration limit default value is 10 million
(10000000). </p>
<p class="p">If you receive an iteration limit error, first
increase the iteration limit and try to continue simulation. and
then try single stepping to attempt to determine which instances
in the design may be oscillating.</p>
<p class="p">You can set the iteration
limit from the <span class="ph menucascade"><span class="ph uicontrol">Simulate</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Runtime Options</span></span> menu or by
modifying the <a class="xref fm:HeadingOnly" href="Command_Iterationlimit_ida079e36e.html#ida079e36e-acfa-404f-aefb-7312b07d5687__Command_Iterationlimit_ida079e36e.xml#ida079e36e-acfa-404f-aefb-7312b07d5687" title="This variable specifies a limit on simulation kernel iterations allowed without advancing time.">IterationLimit</a> variable in the <span class="ph filepath">modelsim.ini</span>.
See <a class="xref fm:HeadingOnly" href="MGCAppe_ModelsimIniVariables_id074e042a.html#id074e042a-3efa-4437-bacc-37844845a06b__MGCAppe_ModelsimIniVariables_id074e042a.xml#id074e042a-3efa-4437-bacc-37844845a06b" title="The modelsim.ini file is the default initialization file and contains control variables that specify reference library paths, optimization, compiler and simulator settings, and various other functions. This chapter covers the contents and modification of the modelsim.ini file.">modelsim.ini Variables</a> for more information on modifying
the <span class="ph filepath">modelsim.ini</span> file. </p>
<p class="p">If the problem persists, look for zero-delay
loops. Run the simulation and look at the source code when the error
occurs. Use the step button to step through the code and see which signals
or variables are continuously oscillating. Two common causes are
a loop that has no exit, or a series of gates with zero delay where
the outputs are connected back to the inputs.</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_UsageCharacteristicsRequirements_id22be8079.html" title="Questa SIM supports the use of VHDL in compliance with the IEEE Standard VHDL Language Reference Manual (IEEE Std 1076), which was originally adopted in 1987. This standard has undergone several revisions, each of which is identified by a suffix indicating the year of its approval by the IEEE. There are considerations in using VHDL with Questa SIM that are not explicitly covered by the Language Reference Manual (LRM).">Usage Characteristics and Requirements</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "questa_sim_user"
                DocTitle = "Questa® SIM User's Manual"
                PageTitle = "Delta Delays"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_DeltaDelays_id33831dc4.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® SIM User's Manual Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>