<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Using Configurations with Preoptimized VHDL Design Units" />
<meta name="abstract" content="You can use a VHDL configuration with the ‑pdu argument to vopt." />
<meta name="description" content="You can use a VHDL configuration with the ‑pdu argument to vopt." />
<meta name="DC.subject" content="Preoptimized Design Unit (PDU), VHDL, PDU" />
<meta name="keywords" content="Preoptimized Design Unit (PDU), VHDL, PDU" />
<meta name="prodname" content="Questa SIM User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-03-05" />
<meta name="VariantPrefix" content="Q" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for Questa SV/AFV" />
<meta name="SourceHandle" content="questa_sim_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® SIM User's Manual" />
<meta name="CSHelp" content="none" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id2c1831e4-2454-496e-be60-64515b52968b" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Using Configurations with Preoptimized VHDL Design Units</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Using Configurations with Preoptimized VHDL Design Units" />
<meta name="attributes" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id2c1831e4-2454-496e-be60-64515b52968b">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Using Configurations
with Preoptimized VHDL Design Units</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><span class="shortdesc">You can use a
VHDL configuration with the ‑pdu argument to vopt. </span>
</div>
<div class="section prereq Prerequisites p"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Prerequisites</h2></div><ul class="ul"><li class="li" id="id2c1831e4-2454-496e-be60-64515b52968b__id08bea4f1-30d6-4dba-9221-6f1b46b39959"><p class="p">Create
the following files, which show a simplified way to set up a VHDL
configuration to use with the PDU capability of vopt. Given these
files, you can use the procedure below to simulate your design using
Preoptimized Design Units (black-boxed regions). </p>
<ul class="ul"><li class="li" id="id2c1831e4-2454-496e-be60-64515b52968b__idb53f6568-5832-43a3-9a13-1579d4e4e20c"><p class="p"><span class="ph FontProperty HeadingLabel">topcfg.vhd </span></p>
<pre class="pre codeblock"><code>configuration topcfg of top is
  for arch
    for u0 : foo_comp
      use entity work.foo10(arch);
    end for;
    for u1 : foo_comp
      use entity work.foo20(arch);
    end for;
  end for;
end configuration;</code></pre></li>
<li class="li" id="id2c1831e4-2454-496e-be60-64515b52968b__id8094e76d-7b70-4122-9354-91020a93a599"><p class="p"><span class="ph FontProperty HeadingLabel">top.vhd</span></p>
<pre class="pre codeblock"><code>entity top is 
end top;</code></pre><pre class="pre codeblock"><code>architecture arch of top is
  component foo_comp
  end component;
begin
  u0 : foo_comp;
  u1 : foo_comp;
end arch;</code></pre></li>
<li class="li" id="id2c1831e4-2454-496e-be60-64515b52968b__idaa163d11-057f-4f9d-8639-1b490218a737"><p class="p"><span class="ph FontProperty HeadingLabel">foo.vhd</span></p>
<pre class="pre codeblock"><code>entity foo_lower is
  generic ( N : integer := 99 );
end foo_lower;</code></pre><pre class="pre codeblock"><code>architecture arch of foo_lower is
begin
  p1 : process
  begin
    assert false
      report "in " &amp; p1'instance_name &amp; ", 
                  N = " &amp; integer'image(N)
      severity note;
    wait;
  end process;
end arch;</code></pre><pre class="pre codeblock"><code>entity foo10 is
end foo10;</code></pre><pre class="pre codeblock"><code>architecture arch of foo10 is
  component foo_lower
    generic ( N : integer );
  end component;
begin
  u0 : foo_lower
    generic map (N =&gt; 10);
end arch;</code></pre><pre class="pre codeblock"><code>entity foo20 is
end foo20;</code></pre><pre class="pre codeblock"><code>architecture arch of foo20 is
  component foo_lower
    generic ( N : integer );
  end component;
begin
  u0 : foo_lower
    generic map (N =&gt; 20);
end arch;</code></pre></li>
</ul>
</li>
</ul>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="id2c1831e4-2454-496e-be60-64515b52968b__id01656a6f-c2b1-4e74-8295-f315366639c2"><span class="ph cmd">Create the work library:</span><div class="itemgroup info StepInfo"><p class="lines ApplCommand">vlib work</p>
</div></li>
<li class="li step stepexpand" id="id2c1831e4-2454-496e-be60-64515b52968b__id55eb920a-52ca-4fbd-9d10-d1d5721e9f83"><span class="ph cmd">Compiles foo.vhd into the
work library:</span><div class="itemgroup info StepInfo"><p class="lines ApplCommand">vcom foo.vhd</p>
</div></li>
<li class="li step stepexpand" id="id2c1831e4-2454-496e-be60-64515b52968b__id749d3844-4c0c-4190-8e6a-f87753becd3c"><span class="ph cmd">Create a Preoptimized Design
Unit (black-box) named foo10_pdu based on the foo10 module in foo.vhd.
Whenever a part of the design is dependent upon foo10, the simulator
loads the optimized design unit foo10_pdu to speed up the elaboration
process.</span><div class="itemgroup info StepInfo"><p class="lines ApplCommand">vopt -pdu foo10 -o foo10_pdu</p>
</div></li>
<li class="li step stepexpand" id="id2c1831e4-2454-496e-be60-64515b52968b__id9fca097b-5fd8-47a9-a88b-b80abcb8ae46"><span class="ph cmd">Create a PDU named foo20_pdu
based on the foo20 module in foo.vhd:</span><div class="itemgroup info StepInfo"><p class="lines ApplCommand">vopt -pdu foo20 -o foo20_pdu</p>
</div></li>
<li class="li step stepexpand" id="id2c1831e4-2454-496e-be60-64515b52968b__id49e9698f-14dc-403c-ab42-91eac4a6364c"><span class="ph cmd">Compile top.vhd into the work
library:</span><div class="itemgroup info StepInfo"><p class="lines ApplCommand">vcom top.vhd</p>
</div></li>
<li class="li step stepexpand" id="id2c1831e4-2454-496e-be60-64515b52968b__id93d52e83-6cb7-4361-825d-a345fa257018"><span class="ph cmd">Compile the configuration,
topcfg.vhd, into the work library:</span><div class="itemgroup info StepInfo"><p class="lines ApplCommand">vcom topcfg.vhd</p>
</div></li>
<li class="li step stepexpand" id="id2c1831e4-2454-496e-be60-64515b52968b__id0147159c-8198-42ea-a8d6-f306bdae2280"><span class="ph cmd">Elaborate the configuration
and performs the simulation: </span><div class="itemgroup info StepInfo"><p class="lines ApplCommand">vsim topcfg -do "run -all"</p>
</div></li>
</ol>
<div class="section result"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Results</h2></div><p class="p">When the simulator encounters <span class="keyword ParameterName Required">u0 : foo_comp </span>it
will use <span class="keyword ParameterName Required">foo10</span> (as
defined in the configuration). The simulator will then use your PDU<span class="keyword ParameterName Required">foo10_pdu</span> (and
apply the same process for <span class="keyword ParameterName Required">u1 : foo_comp</span> and <span class="keyword ParameterName Required">foo20</span>). </p>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_PreoptimizingRegionsYourDesign_idb52a229b.html" title="A Preoptimized Design Unit (PDU) is a region of your design that you can identify for a one-time optimization by using the -pdu argument of the vopt command. You can then reuse the PDU and exclude it from being optimized. This reduces the amount of time for future optimization and simulation runs by preoptimizing (black-boxing) static or unchanging regions of your design.">Preoptimizing Regions of Your Design</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "questa_sim_user"
                DocTitle = "Questa® SIM User's Manual"
                PageTitle = "Using Configurations with Preoptimized VHDL Design Units"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_UsingConfigurationsPreoptimizedVhdlDesignUnits_id2c1831e4.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® SIM User's Manual Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>