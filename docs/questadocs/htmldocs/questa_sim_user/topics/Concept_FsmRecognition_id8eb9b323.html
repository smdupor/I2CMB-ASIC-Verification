<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="FSM Recognition" />
<meta name="abstract" content="Questa SIM recognizes VHDL and Verilog FSMs." />
<meta name="description" content="Questa SIM recognizes VHDL and Verilog FSMs." />
<meta name="prodname" content="Questa SIM User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-03-05" />
<meta name="VariantPrefix" content="Q" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for Questa SV/AFV" />
<meta name="SourceHandle" content="questa_sim_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® SIM User's Manual" />
<meta name="CSHelp" content="none" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id8eb9b323-3751-40f3-abd1-35ee5c839c86" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>FSM Recognition</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="FSM Recognition" />
<meta name="attributes" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id8eb9b323-3751-40f3-abd1-35ee5c839c86">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">FSM Recognition</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc"><span class="ph fmvar:ProductName">Questa SIM</span> recognizes VHDL and Verilog
FSMs. </span>
</div>
<p class="p">The FSMs are recognized during
compilation or optimization when you are <a class="xref fm:HeadingOnly" href="TaskTop_CollectingFsmCoverageMetrics_idfe037418.html#idfe037418-609a-421a-9635-ac4790e839dc__TaskTop_CollectingFsmCoverageMetrics_idfe037418.xml#idfe037418-609a-421a-9635-ac4790e839dc" title="You can enable the recognition and collection of coverage metrics for FSMs in your design through the use of command arguments in your simulation flow.">Collecting FSM Coverage Metrics</a> <span class="ph">or <a class="xref fm:HeadingOnly" href="TaskTop_ViewingFsmInformationInGui_ida6773b4a.html#ida6773b4a-f532-4fd4-bcc7-c3bd3e6890cd__TaskTop_ViewingFsmInformationInGui_ida6773b4a.xml#ida6773b4a-f532-4fd4-bcc7-c3bd3e6890cd" title="You can enable the creation of debug information for FSMs in your design through the use of command arguments in your simulation flow.">Viewing FSM Information in the GUI</a></span>,
and when they fit the following criteria:</p>
<ul class="ul"><li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id0117970d-64b0-4709-bb5e-4c536d8678cf"><p class="p">There is a finite number of states which
the state variable can hold.</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__ida3418def-d19c-41ca-86fa-da01b4f69a88"><p class="p">The next state assignments to the state
variable are made under a clock.</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id095f2b50-4007-4112-9612-42ad82310a42"><p class="p">The next state value depends on the current
state value of the state variable.</p>
<p class="p">State assignments that do not depend on the current state value
are considered reset assignments.</p>
</li>
</ul>
<p class="p"><span class="ph fmvar:ProductName">Questa SIM</span> recognizes
the following VHDL and Verilog FSM design styles:</p>
<ul class="ul"><li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__idc4eb3735-a93e-42ab-b7a7-75b2023b3667"><p class="p">FSMs using a current state variable.</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__idebcc60a7-25a0-4389-b8c7-bc1a37fd124e"><p class="p">FSMs using current state and next state
variables.</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id455addf4-8876-4071-88f8-8bf8011af25a"><p class="p">FSMs using multiple next-state variables,
where all are used as a buffer assignment.</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id08e98755-6e66-4ac4-9cb1-b6645a8e5772"><p class="p">FSMs using fixed, non-floating parameters/generics
(only supported when using vopt).</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id7bd86301-e0ff-4ab5-b137-72561372c62b"><p class="p">FSMs using a single or multiple Case
statements.</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__idae4f7e80-b932-4255-b81c-b3fcd371cbe0"><p class="p">FSMs using a single or multiple If-Else
statements.</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id611003a3-d2fd-4873-9ba9-47e22a2ff953"><p class="p">FSMs using mixed If-Else and Case statements.</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__ide1cff3a7-22b7-4431-aecb-47a0b3ce489b"><p class="p">FSMs using a VHDL wait/select statement.</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id2334f035-2ba2-4746-abc0-3e4d0c419e94"><p class="p">FSMs using a VHDL
when/else statement for concurrent assignments only.</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__ida1ad7d2b-5da4-4534-b441-9b0563ffb55e"><p class="p">FSMs using complex “if” conditions with
AND or OR operators.</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id9d8438d7-3bd2-4445-9ec3-8d642c46f6bc"><p class="p">FSMs defined using a one-hot or one-cold
style (supported for Verilog only).</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id766204c3-6a00-48c5-a96a-2b940688f985"><p class="p">FSMs using next state assignments that
can be statically evaluated to constants.</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id6534045c-0986-4c93-8b3a-9c2ff62307f6"><p class="p">FSMs using a current- or next-state variable
as a VHDL record or SystemVerilog struct field. Nested structures
are not supported.</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id8669a341-4d41-4857-9b45-49c8e629b4d5"><p class="p">FSMs using a current- or next-state variable
as a VHDL or Verilog index expression.</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id111e9f8d-82e8-41d5-949d-db773006117b"><p class="p">FSMs defined
completely inside Verilog tasks.</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__idebd799e0-1d73-4226-a3c0-95f6c0afa4fc"><p class="p">FSMs using any integral SystemVerilog
types like logic, int, bit_vector, enum, packed struct. Typedefs
of these types are also supported.</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id8f36a65f-5f8a-4b6f-b168-5dff680cb033"><p class="p">FSMs using
multi-field record type in VHDL where the state variable is a field
of the record and the complete record is used for driving the current
state in the clocked process.</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id183a9532-3512-4230-94ab-a51c81319411"><p class="p">Verilog FSMs having state variable assignment
to a 'x (unknown) value. X-assignment is enabled by default.</p>
</li>
</ul>
<div class="section Subsections"><div class="section Subsection" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id800e12b2-c799-418d-9a59-836015d0c162"><h2 class="title Subheading sectiontitle">Unsupported
FSM Design Styles</h2><p class="p"><span class="ph fmvar:ProductName">Questa SIM</span> does
not recognize the following design styles:</p>
<ul class="ul"><li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id3d301a84-a00c-43ef-9e52-5225eb7ab8cf"><p class="p">Using Verilog part-select expressions
as a current-state variable.</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id6ab9586d-1380-4990-ad62-b3c081baae9e"><p class="p">Using VHDL slice expressions as a current-state
variable.</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id99661aca-b9b4-4623-8cb8-bd2445817a4d"><p class="p">Defining a single FSM in multiple modules.</p>
</li>
<li class="li" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id074b3c2d-b4af-4b83-9744-3a3186eddbda"><p class="p">Using mixed
blocking and non-blocking assignments for current/next state variables.</p>
</li>
</ul>
<h2 class="title Subheading sectiontitle">FSM Design Style
Examples</h2><p class="p">The following examples illustrate several supported
FSM design styles.</p>
<div class="fig fignone ExampleTitle" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id03fe529f-793c-4f9f-b008-db5189615a9c"><span class="figcap"><span class="fig--title-label">Example 1. </span>Verilog
Single-State Variable FSM</span><pre class="pre codeblock leveled"><code>module fsm_1proc (output reg out, input [7:0] inp, input clk, en, rst); 
 
    typedef enum {s0, s1, s2, s3, s4, s5, s6, s7} state_t; 
    state_t state; 
 
    always_ff @(posedge clk, posedge rst) 
        if (rst) 
            state &lt;= s0; 
        else 
            casex (state) 
                s0: begin out &lt;= inp[0]; if (en) state &lt;= s1; end 
                s1: begin out &lt;= inp[1]; if (en) state &lt;= s2; end 
                s2: begin out &lt;= inp[2]; if (en) state &lt;= s3; end 
                s3: begin out &lt;= inp[3]; if (en) state &lt;= s4; end 
                s4: begin out &lt;= inp[4]; if (en) state &lt;= s5; end 
                s5: begin out &lt;= inp[4]; if (en) state &lt;= s6; end 
                s6: begin out &lt;= inp[6]; if (en) state &lt;= s7; end 
                s7: begin out &lt;= inp[7]; if (en) state &lt;= s0; end 
                default: begin out &lt;= inp[5]; state &lt;= s1; end 
            endcase 
 
endmodule </code></pre></div>
<div class="fig fignone ExampleTitle" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id76e76bda-9304-42bc-9348-48ca9f70aeb3"><span class="figcap"><span class="fig--title-label">Example 2. </span>VHDL
Single-State Variable FSM</span><pre class="pre codeblock leveled"><code>library ieee; 
use ieee.std_logic_1164.all; 
use ieee.std_logic_arith.all; 
entity fsm is port( in1 : in signed(1 downto 0); 
                     in2 : in signed(1 downto 0); 
                     en  : in std_logic_vector(1 downto 0); 
                     clk: in std_logic; 
                     reset : in std_logic_vector( 3 downto 0); 
                     out1 : out signed(1 downto 0)); 
end fsm; 
 
architecture arch of fsm is 
  type my_enum is (s0 , s1, s2, s3,s4,s5); 
  type mytype is array (3 downto 0) of std_logic; 
  signal test : mytype; 
  signal cst : my_enum; 
 
  begin 
    process(clk,reset) 
    begin 
       if(reset(1 downto 0) = "11") then 
          cst &lt;= s0; 
       elsif(clk'event and clk = '1') then 
          case cst is 
              when s0 =&gt;   cst &lt;= s1; 
              when s1 =&gt;   cst &lt;= s2; 
              when s2 =&gt;   cst &lt;= s3; 
              when others =&gt;   cst &lt;= s0; 
          end case;  
      end if; 
    end process; 
end arch; </code></pre></div>
<div class="fig fignone ExampleTitle" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id912204c4-e3cf-4b08-84ed-6f47f0aa3c2d"><span class="figcap"><span class="fig--title-label">Example 3. </span>Verilog
Current-State Variable with a Single Next-State Variable FSM</span><pre class="pre codeblock leveled"><code>module fsm_2proc (output reg out, input [7:0] inp, input clk, en, rst); 
 
    typedef enum {s0, s1, s2, s3, s4, s5, s6, s7} state_t; 
    state_t c_state, n_state; 
 
    always_ff @(posedge clk, posedge rst) 
        if (rst) 
            c_state &lt;= s0; 
        else 
            if (en) c_state &lt;= n_state; 
     
    always_comb 
        casex (c_state) 
            s0: begin out = inp[0]; n_state = s1; end 
            s1: begin out = inp[1]; n_state = s2; end 
            s2: begin out = inp[2]; n_state = s3; end 
            s3: begin out = inp[3]; n_state = s4; end 
            s4: begin out = inp[4]; n_state = s5; end 
            s5: begin out = inp[4]; n_state = s6; end 
            s6: begin out = inp[6]; n_state = s7; end 
            s7: begin out = inp[7]; n_state = s0; end 
            default: begin out = inp[5]; n_state = s1; end 
       endcase 
 
endmodule </code></pre></div>
<div class="fig fignone ExampleTitle" id="id8eb9b323-3751-40f3-abd1-35ee5c839c86__id7cd19e19-f8a1-46a6-bc01-bb56721c9745"><span class="figcap"><span class="fig--title-label">Example 4. </span>VHDL
Current-State Variable and Single Next-State Variable FSM</span><pre class="pre codeblock leveled"><code>library ieee; 
use ieee.std_logic_1164.all; 
use ieee.std_logic_arith.all; 
use work.pack.all; 
entity fsm is port( in1 : in signed(1 downto 0); 
                     in2 : in signed(1 downto 0); 
                     en  : in std_logic_vector(1 downto 0); 
                     clk: in std_logic; 
                     reset : in std_logic_vector( 3 downto 0); 
                     out1 : out signed(1 downto 0)); 
end fsm; 
 
architecture arch of fsm is 
  type my_enum is (s0 , s1, s2, s3,s4,s5); 
  type mytype is array (3 downto 0) of std_logic; 
  signal test : mytype; 
  signal cst, nst : my_enum; 
 
  begin 
    process(clk,reset) 
    begin 
       if(reset(1 downto 0) = "11") then 
          cst &lt;= s0; 
       elsif(clk'event and clk = '1') then 
	      cst &lt;= nst; 
	   end if; 
	end process; 
 
	process(cst) 
	begin 
          case cst is 
              when s0 =&gt;   nst &lt;= s1; 
              when s1 =&gt;   nst &lt;= s2; 
              when s2 =&gt;   nst &lt;= s3; 
              when others =&gt;   nst &lt;= s0; 
          end case;  
    end process; 
end arch; </code></pre></div>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_FiniteStateMachines_id851e79fb.html" title="A Finite State Machine (FSM) reflects the changes a state-based design has gone through from the start of simulation to the present. Transitions indicate state changes and are described by the conditions required to enable them. Because of the complexity of FSMs, designs containing them can contain a high number of defects. It is important, therefore, to analyze the FSMs in RTL before going to the next stages of synthesis in the design cycle.">Finite State Machines</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "questa_sim_user"
                DocTitle = "Questa® SIM User's Manual"
                PageTitle = "FSM Recognition"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_FsmRecognition_id8eb9b323.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® SIM User's Manual Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>