<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Verilog-XL uselib Compiler Directive" />
<meta name="abstract" content="The `uselib compiler directive is a method of source library management that you can use as an alternative to the ‑v, -y, and +libext compiler arguments. It has the advantage that a design may reference different modules having the same name." />
<meta name="description" content="The `uselib compiler directive is a method of source library management that you can use as an alternative to the ‑v, -y, and +libext compiler arguments. It has the advantage that a design may reference different modules having the same name." />
<meta name="DC.subject" content="compiling, Verilog, XL’uselib compiler directive, compiling with XL ’uselib compiler directive" />
<meta name="keywords" content="compiling, Verilog, XL’uselib compiler directive, compiling with XL ’uselib compiler directive" />
<meta name="prodname" content="Questa SIM User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-03-05" />
<meta name="VariantPrefix" content="Q" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for Questa SV/AFV" />
<meta name="SourceHandle" content="questa_sim_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® SIM User's Manual" />
<meta name="CSHelp" content="none" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id26314088-29b5-48a1-afb8-6226d4d9f6e7" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Verilog-XL uselib Compiler Directive</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Verilog-XL uselib Compiler Directive" />
<meta name="attributes" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id26314088-29b5-48a1-afb8-6226d4d9f6e7">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Verilog-XL uselib Compiler Directive</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">The `uselib
compiler directive is a method of source library management that
you can use as an alternative to the ‑v, -y, and +libext compiler
arguments. It has the advantage that a design may reference different
modules having the same name. </span>
</div>
<p class="p">To compile designs that contain
`uselib directive statements, use the ‑compile_uselibs argument
(described below) with the <a class="xref Link" href="../../questa_sim_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'vlog', 'questa_sim_ref'); return false;">vlog</a> command.</p>
<p class="p">The syntax for the `uselib directive is:</p>
<pre class="pre codeblock leveled"><code>`uselib &lt;library_reference&gt;...</code></pre><p class="p">where &lt;library_reference&gt; can be one or
more of the following:</p>
<ul class="ul"><li class="li" id="id26314088-29b5-48a1-afb8-6226d4d9f6e7__idf1bf3eca-9302-46c1-93b8-2947235a0b88"><p class="p"><span class="ph FontProperty HeadingLabel">dir=&lt;library_directory&gt;</span>,
which is equivalent to the command line argument:</p>
<pre class="pre codeblock leveled"><code>-y &lt;library_directory&gt;</code></pre></li>
<li class="li" id="id26314088-29b5-48a1-afb8-6226d4d9f6e7__id0f75935f-352f-4883-b541-7c4d772244b6"><p class="p"><span class="ph FontProperty HeadingLabel">file=&lt;library_file&gt;</span>,
which is equivalent to the command line argument:</p>
<pre class="pre codeblock leveled"><code>-v &lt;library_file&gt;</code></pre></li>
<li class="li" id="id26314088-29b5-48a1-afb8-6226d4d9f6e7__id790b0e3e-2149-4647-8d3d-dbd56ac1affd"><p class="p"><span class="ph FontProperty HeadingLabel">libext=&lt;file_extension&gt;</span>,
which is equivalent to the command line argument:</p>
<pre class="pre codeblock leveled"><code>+libext+&lt;file_extension&gt;</code></pre></li>
<li class="li" id="id26314088-29b5-48a1-afb8-6226d4d9f6e7__id077735a9-e047-411a-9032-3eb870760f53"><p class="p"><span class="ph FontProperty HeadingLabel">lib=&lt;library_name&gt;</span>,
which references a library for instantiated objects, specifically
modules, interfaces and program blocks, but not packages. You must
ensure the correct mappings are set up if the library does not exist
in the current working directory. The ‑compile_uselibs argument
does not affect this usage of `uselib.</p>
</li>
</ul>
<p class="p">For example, the following directive</p>
<pre class="pre codeblock leveled"><code>`uselib dir=/h/vendorA libext=.v</code></pre><p class="p">is equivalent to the following command line
arguments:</p>
<pre class="pre codeblock leveled"><code>-y /h/vendorA +libext+.v</code></pre><p class="p">Because the `uselib directives are embedded
in the Verilog source code, you have more flexibility in defining
the source libraries for the instantiations in the design. The appearance
of a `uselib directive in the source code explicitly defines how
instantiations that follow it are resolved, completely overriding
any previous `uselib directives.</p>
<p class="p">Because the `uselib directive allows a design
to reference multiple modules that have the same name, the source
libraries referenced by the `uselib directive must be compiled independently. </p>
<p class="p">You should compile each source library into
its own object library. The compilation of the code containing the
`uselib directives records only which object libraries to search
for each module instantiation when the simulator loads the design.</p>
<p class="p">Because the `uselib directive is intended to
reference source libraries, the simulator must infer the object
libraries from the library references. The rule is to assume an
object library named work in the directory defined in the library
reference:</p>
<pre class="pre codeblock leveled"><code>dir=&lt;library_directory&gt;</code></pre><p class="p">or the directory containing the file in the
library reference</p>
<pre class="pre codeblock leveled"><code>file=&lt;library_file&gt;</code></pre><p class="p">The simulator ignores a library reference libext=&lt;file_extension&gt;.
For example, the following `uselib directives infer the same object
library:</p>
<pre class="pre codeblock"><code>‘uselib dir=/h/vendorA
‘uselib file=/h/vendorA/libcells.v</code></pre><p class="p">In both cases, the simulator assumes that the
library source is compiled into the object library:</p>
<pre class="pre codeblock leveled"><code>/h/vendorA/work</code></pre><p class="p">The simulator also extends the `uselib directive
to explicitly specify the object library with the library reference
lib=&lt;library_name&gt;. For example:</p>
<pre class="pre codeblock leveled"><code>‘uselib lib=/h/vendorA/work</code></pre><p class="p">The library name can be a complete path to
a library, or it can be a logical library name that you can define
with the vmap command. </p>
<div class="section Subsections"><div class="section Subsection" id="id26314088-29b5-48a1-afb8-6226d4d9f6e7__idc60827b4-fcd0-4d1c-8a74-a70e984ab41f"><h2 class="title Subheading sectiontitle">-compile_uselibs Argument</h2><p class="p">Use the -compile_uselibs argument to <a class="xref Link" href="../../questa_sim_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'vlog', 'questa_sim_ref'); return false;">vlog</a> to
reference `uselib directives. The argument finds the source files
referenced in the directive, compiles them into automatically created
object libraries, and updates the <span class="ph filepath">modelsim.ini</span> file with
the logical mappings to the libraries.</p>
<p class="p">When you use -compile_uselibs, <span class="ph fmvar:ProductName">Questa SIM</span> determines the directory into
which to compile the object libraries into by choosing, in order,
from the following three values:</p>
<ul class="ul"><li class="li" id="id26314088-29b5-48a1-afb8-6226d4d9f6e7__id4496024d-923d-4cb1-ba9c-f9385dea2e26"><p class="p">The directory name specified by the <span class="ph FontProperty HeadingLabel">-compile_uselibs</span> argument.
For example,</p>
<pre class="pre codeblock leveled"><code>-compile_uselibs=./mydir
</code></pre></li>
<li class="li" id="id26314088-29b5-48a1-afb8-6226d4d9f6e7__id00da836a-62ad-430a-9ebe-11d1d8b517e6"><p class="p">The directory specified by the MTI_USELIB_DIR
environment variable (see <a class="xref fm:HeadingOnly" href="Contain_EnvironmentVariables_id7f84d31e.html#id7f84d31e-4530-40fb-9d8f-f67c3a5f4b27__Contain_EnvironmentVariables_id7f84d31e.xml#id7f84d31e-4530-40fb-9d8f-f67c3a5f4b27" title="When you install Questa SIM, the installation process creates and reads several environment variables for the operating system of your computer. Most of these variables have default values, which you can change to customize Questa SIM operation.">Environment Variables</a>)</p>
</li>
<li class="li" id="id26314088-29b5-48a1-afb8-6226d4d9f6e7__idc5e76071-b1d2-4e63-bf20-a553fb9c05e0"><p class="p">A directory named <span class="ph filepath">mti_uselibs</span> that
is created in the current working directory</p>
</li>
</ul>
<p class="p">The following code fragment and compiler invocation
show how you can instantiate two different modules that have the
same name within the same design:</p>
<pre class="pre codeblock leveled"><code>module top;
  `uselib dir=/h/vendorA libext=.v
  NAND2 u1(n1, n2, n3);
  `uselib dir=/h/vendorB libext=.v
  NAND2 u2(n4, n5, n6);
endmodule</code></pre><p class="lines ApplCommand">vlog -compile_uselibs top</p>
<p class="p">This instantiation allows the NAND2 module
to have different definitions in the vendorA and vendorB libraries.</p>
</div>
<div class="section Subsection" id="id26314088-29b5-48a1-afb8-6226d4d9f6e7__id31b000fc-e14b-4225-9e5c-64654f200b91"><h2 class="title Subheading sectiontitle">uselib is Persistent</h2><p class="p">As mentioned above, the appearance of a `uselib
directive in the source code explicitly defines how instantiations
that follow it are resolved. This can result in unexpected consequences.
For example, consider the following compile command:</p>
<p class="lines ApplCommand">vlog -compile_uselibs dut.v srtr.v</p>
<p class="p">Assume that <span class="ph filepath">dut.v</span> contains
a `uselib directive. Because <span class="ph filepath">srtr.v</span> is compiled
after <span class="ph filepath">dut.v</span>, the `uselib directive is still
in effect. When <span class="ph filepath">srtr</span> loads, it uses the `uselib
directive from <span class="ph filepath">dut.v</span> to decide where to locate
modules. If this is not what you intend, then you need to put an
empty `uselib at the end of <span class="ph filepath">dut.v</span> to “close”
the previous `uselib statement.</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_VerilogXlCompatibleCompilerArguments_id05d47f11.html" title="The Verilog compiler supports arguments that are equivalent to Verilog-XL arguments, simplifying the porting of a design to Questa SIM.">Verilog-XL Compatible Compiler Arguments</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "questa_sim_user"
                DocTitle = "Questa® SIM User's Manual"
                PageTitle = "Verilog-XL uselib Compiler Directive"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_VerilogXlUselibCompilerDirective_id26314088.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® SIM User's Manual Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>