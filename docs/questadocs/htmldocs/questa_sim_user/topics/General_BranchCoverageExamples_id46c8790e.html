<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="GeneralRefTopic" />
<meta name="DC.Title" content="Branch Coverage Examples" />
<meta name="abstract" content="You can analyze Verilog and SystemVerilog 'if … else if … [else]' chains with a code coverage model." />
<meta name="description" content="You can analyze Verilog and SystemVerilog 'if … else if … [else]' chains with a code coverage model." />
<meta name="prodname" content="Questa SIM User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-03-05" />
<meta name="VariantPrefix" content="Q" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for Questa SV/AFV" />
<meta name="SourceHandle" content="questa_sim_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® SIM User's Manual" />
<meta name="CSHelp" content="none" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id46c8790e-f2ff-47da-b01c-083cb03722ce" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Branch Coverage Examples</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Branch Coverage Examples" />
<meta name="attributes" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="default" id="id46c8790e-f2ff-47da-b01c-083cb03722ce">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Branch Coverage
Examples</h1>
<div class="body refbody GeneralRefBody"><div class="abstract GeneralRefAbstract"><span class="shortdesc">You can
analyze Verilog and SystemVerilog 'if … else if … [else]' chains
with a code coverage model.</span>
</div>
<div class="section Subsections"><div class="section Subsection" id="id46c8790e-f2ff-47da-b01c-083cb03722ce__id0bb81030-5e5a-4925-8547-209e91dbb84b"><p class="p">The
code block in <a class="xref fm:Example" href="#id46c8790e-f2ff-47da-b01c-083cb03722ce__idb2223f2e-c16f-458c-9d2d-2b89f7d2cecc">Example 1</a> contains an if ... else
if ...[else] chain.</p>
<div class="fig fignone ExampleTitle" id="id46c8790e-f2ff-47da-b01c-083cb03722ce__idb2223f2e-c16f-458c-9d2d-2b89f7d2cecc"><span class="figcap"><span class="fig--title-label">Example 1. </span>Code
Block with if...else if...[else] Chain</span><pre class="pre codeblock"><code>module top;
integer i=10;
initial begin
    #3 i = 18;
    #3 i = 2;
    #1 $finish();
end
always @ (i) begin
    if (i == 16) 
        $display("sweet");
    else if (i == 2) 
        $display("terrible");
    else if (i == 10) 
        $display("double digits at last");
    else if (i == 18)
        $display("can vote");
    else
        $display("just another birthday"); end endmodule </code></pre></div>
<p class="p">If you run this code to completion while collecting
branch coverage statistics, then save the results to a UCDB file
named <span class="ph filepath">top.ucdb</span>, the “vcover report top.ucdb -details”
command generates the following report:</p>
<div class="fig fignone ExampleTitle" id="id46c8790e-f2ff-47da-b01c-083cb03722ce__id5c165aa2-bd7d-41e1-a22e-933a3946e60e"><span class="figcap"><span class="fig--title-label">Example 2. </span>Coverage
Report</span><pre class="pre codeblock"><code><span class="ph FontProperty HeadingLabel">Coverage Report by file with details</span>

File: top.v
Branch Coverage:
    Enabled Coverage        Bins        Hits    Misses  Coverage
    ----------------        ------      ----    ------ ---------
    Branches                     5         3         2      60.0

==============================Branch Details=============================

Branch Coverage for file top.v --

------------------------------------IF Branch----------------------------
    12                                       3     Count coming in to IF
    12            1                    ***0***         if (i == 16) 
    14            1                          1         else if (i == 2) 
    16            1                          1         else if (i == 10) 
    18            1                          1         else if (i == 18)
    20            1                    ***0***         else
Branch totals: 3 hits of 5 branches = 60.0%</code></pre></div>
<p class="p">The 60% coverage number (in the % Covered column)
is derived as follows: Five bins under the initial 'if' of the code
block in <a class="xref fm:Example" href="#id46c8790e-f2ff-47da-b01c-083cb03722ce__idb2223f2e-c16f-458c-9d2d-2b89f7d2cecc">Example 1</a> are inferred —1 ‘if’
branch, 3 'else if' branches, and 1 'else' branch — and three of
these branches executed.</p>
<p class="p">If the final 'else' was not in the code block,
the coverage score would remain the same; but instead of an 'else'
count, the report would list an 'All False Count' value of 0.</p>
<p class="p">The second column in the Branch Details section of the report
shows the number of items of that coverage type on the line. There
is only one coverage item of each type on each line of the example
report above, so the number is 1 in each line.</p>
</div>
<div class="section Subsection" id="id46c8790e-f2ff-47da-b01c-083cb03722ce__ide2428226-b638-4d82-ba42-c1c494c29328"><h2 class="title Subheading sectiontitle">Merging
If-Else-If Branch in Verilog</h2><p class="p">When you run the code in <a class="xref fm:Example" href="#id46c8790e-f2ff-47da-b01c-083cb03722ce__idb2223f2e-c16f-458c-9d2d-2b89f7d2cecc">Example 1</a>, the if-else pairs are merged
into a single VHDL-like if-elsif ladder to obtain the combined branch
Coverage Report shown in <a class="xref fm:Example" href="#id46c8790e-f2ff-47da-b01c-083cb03722ce__id5c165aa2-bd7d-41e1-a22e-933a3946e60e">Example 2</a>. Nested if-else branches
are merged differently.</p>
<p class="p">The following code block shows an example of nested if-else branches:</p>
<pre class="pre codeblock"><code>if(clk)
    ----
else
    if(set)
        ----
    else
        if(reset)
            ----</code></pre><p class="p">The simulation tool merges the nested if-else branches and reports
them under a single VHDL-like if-elsif-else structure in the following
way:</p>
<pre class="pre codeblock"><code>-------------------------------IF Branch---------------------------------
14                             ***0***            Count coming in to IF
14             1               ***0***              if(clk)
17             1               ***0***              if(set)
21             1               ***0***              if(reset)
                               ***0***            All False Count</code></pre><p class="p">The tool does not merge an ‘if’ into an ‘elsif’ structure if
you have segregated the ‘if’ from the parent ‘else’ with a begin-end
pair, as shown in the following code:</p>
<pre class="pre codeblock"><code>if (clk)
    ----
else
    if(set)
    ----
    else
begin
    if(reset)
end</code></pre><p class="p">Since you have used a begin-end pair to segregate the ‘if(reset)’
from the parent ‘else’, the simulation tool does not merge ‘if(reset)’
with the parent if-elsif-else ladder. Running the vcover report
command generates the following two IF Branches:</p>
<pre class="pre codeblock"><code>-----------------------------IF Branch-----------------------------------
14            1              ***0***               Count coming in to 2"
14            1              ***0***                 if(clk)
17            1              ***0***                 if(set)
19            1              ***0***                 else
Branch totals: 0 hits of 3 branches = 0.0%</code></pre><pre class="pre codeblock"><code>-----------------------------IF Branch-----------------------------------
21                           ***0***               Count coming in to IF
21            1              ***0***                 if(reset)
                             ***0***               All False Count</code></pre><p class="p">To force the tool to merge such segregated IF branches, use the
-covercebi argument with <a class="xref Link" href="../../questa_sim_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'vlog', 'questa_sim_ref'); return false;">vlog</a> <span class="ph">and <a class="xref Link" href="../../questa_sim_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'vopt', 'questa_sim_ref'); return false;">vopt</a></span>.
If you use the -covercebi argument for the code example above, the
vcover report command generates the following report:</p>
<pre class="pre codeblock"><code>-----------------------------IF Branch-----------------------------------
14                             ***0***            Count coming in to IF
14             1               ***0***              if(clk)
17             1               ***0***              if(set)
21             1               ***0***              if(reset)
                               ***0***            All False Count Count</code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_BranchCoverage_idfd7b6667.html" title="Branch coverage relates to branching constructs such as “if” and “case” statements. It measures true branch and false branch execution.">Branch Coverage</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../topics/Contain_BranchCoverage_idfd7b6667.html#idfd7b6667-2d9f-44a8-b01b-adec22b82323__" title="Branch coverage relates to branching constructs such as “if” and “case” statements. It measures true branch and false branch execution.">Branch Coverage</a></div>
<div><a class="link" href="../topics/Concept_MissingBranchesInVhdlClockOptimizations_idf8f977a9.html#idf8f977a9-1093-4270-a9b1-8e7b96659ead__" title="By default, Questa SIM optimizes any VHDL process serving as an edge-triggered flip-flop so that it is activated only on the rising edge of the clock. Because this process is never activated on the falling edge of the clock, that branch is not executed and is excluded from code coverage.">Missing Branches in VHDL and Clock Optimizations</a></div>
<div><a class="link" href="../topics/Concept_CaseBranches_id70a2a154.html#id70a2a154-e8ff-4dc7-a533-f77a687d337b__" title="For “case” statements, the case expression itself is not considered a branch. Rather, each case item is considered a separate and independent branch. To achieve 100% branch coverage in a “case” statement, each case item must have been executed during simulation.">Case and Branches</a></div>
<div><a class="link" href="../topics/Concept_AllfalseBranches_id791e18a7.html#id791e18a7-673c-47e4-b8ff-70288f523602__" title="For if statements without a corresponding else, an implicit AllFalse branch is measured. If the if condition is executed and found to be false, the all false branch is considered to be hit.">AllFalse Branches</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "questa_sim_user"
                DocTitle = "Questa® SIM User's Manual"
                PageTitle = "Branch Coverage Examples"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/General_BranchCoverageExamples_id46c8790e.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® SIM User's Manual Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>