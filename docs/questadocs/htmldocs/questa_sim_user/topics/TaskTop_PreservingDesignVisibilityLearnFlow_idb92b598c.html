<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Preserving Design Visibility with the Learn Flow" />
<meta name="abstract" content="To ensure that you retain the proper level of design visibility when performing an optimized simulation (using vopt in the Three-Step flow), you can use the vsim -learn command. This command creates control files that include instructions for preserving visibility of the design." />
<meta name="description" content="To ensure that you retain the proper level of design visibility when performing an optimized simulation (using vopt in the Three-Step flow), you can use the vsim -learn command. This command creates control files that include instructions for preserving visibility of the design." />
<meta name="prodname" content="Questa SIM User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-03-05" />
<meta name="VariantPrefix" content="Q" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for Questa SV/AFV" />
<meta name="SourceHandle" content="questa_sim_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® SIM User's Manual" />
<meta name="CSHelp" content="none" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idb92b598c-f5b3-4747-baad-946edacc9279" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Preserving Design Visibility with the Learn Flow</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Preserving Design Visibility with the Learn Flow" />
<meta name="attributes" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="idb92b598c-f5b3-4747-baad-946edacc9279">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Preserving Design Visibility with the Learn Flow</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><p class="shortdesc">To ensure that
you retain the proper level of design visibility when performing
an optimized simulation (using vopt in the Three-Step flow), you
can use the vsim -learn command. This command creates control files
that include instructions for preserving visibility of the design. </p>
<p class="p">These control files allow you to retain information
during optimization for the following:</p>
<ul class="ul"><li class="li" id="id9686d164-23cf-4478-a3cd-5ee6a6d2537b"><p class="p">ACC/TF PLI routines</p>
</li>
<li class="li" id="id84e01e96-d753-43ae-89d6-cbe89e1a7c8e"><p class="p">VPI PLI routines</p>
</li>
<li class="li" id="idf8631a54-e966-4fef-8c3f-82bc6ca847c2"><p class="p">Signal Spy accesses</p>
</li>
<li class="li" id="id28e6ba75-9d54-4bea-b119-51164492cef7"><p class="p">force Run-time command</p>
</li>
<li class="li" id="id9ea5be66-6bbc-4673-8e67-dda138696b2c"><p class="p">FLI instances (regions), signals, ports,
and variables.</p>
</li>
<li class="li" id="ideeb4fc86-59e6-4708-bb10-9237a32bd609"><p class="p">Objects specified as arguments to commands
executed after -learn is started, such as add wave /top/p/*.</p>
</li>
<li class="li" id="id294975c2-2e8e-41b8-93b0-b1be28f0d419"><p class="p">Objects under Verilog unnamed generate
scopes</p>
</li>
<li class="li" id="id2b1c986a-ef9e-4522-8648-e41e0b5845c2"><p class="p">Objects specified in SignalSpy system
tasks</p>
</li>
</ul>
<p class="p">The following steps demonstrate the use of <a class="xref Link" href="../../questa_sim_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'vsim', 'questa_sim_ref'); return false;">vsim</a> -learn
for preserving visibility using PLI routines. </p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">QIS is the preferred method
to use when optimizing designs with vopt for debug/visibility purposes.
Refer to “<a class="xref fm:HeadingAndPage" href="Concept_QuestaDumpingAndVisibility_id71148e4b.html#id71148e4b-8e58-4bc9-b2f3-20f1bab7ec23__Concept_QuestaDumpingAndVisibility_id71148e4b.xml#id71148e4b-8e58-4bc9-b2f3-20f1bab7ec23" title="QIS in the tool enables full vopt simulations while providing debug or visibility capabilities.">Questa Dumping and Visibility</a>” for complete details. </p>
</div>
</div>
<div class="section Restrictions"><h2 class="title Subheading sectiontitle">Restrictions and Limitations</h2><ul class="ul"><li class="li" id="idb92b598c-f5b3-4747-baad-946edacc9279__id9ada0eb3-ee17-4632-b3f5-e490dfd6e369"><p class="p">Because the control files
are saved at the end of simulation, you should not restart or restore
the simulation when working with the learn mode. Interrupting the
simulation can make control file contents unreliable. </p>
</li>
</ul>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="idb92b598c-f5b3-4747-baad-946edacc9279__id000fca1d-9e47-4cc4-9e3b-b1669f7d1bd3"><span class="ph cmd">Create your libraries and
compile your design as you normally would.</span></li>
<li class="li step stepexpand" id="idb92b598c-f5b3-4747-baad-946edacc9279__id423331bb-0049-47d6-a680-9cfa0592632d"><span class="ph cmd">Invoke the simulator, using
the -voptargs argument to implicitly optimize the design.</span><div class="itemgroup info StepInfo"><p class="lines ApplCommand">vsim -voptargs=+acc -learn top_pli_learn -pli mypli.sl top</p>
<p class="p">When you specify the -learn
argument, where the argument defines the root name (top_pli_learn)
of the generated control files, vsim analyzes your design as well
as your PLI to determine what information to retain during the optimization. </p>
<p class="p">By specifying -voptargs=+acc
you are enabling full visibility, which allows the learn flow to
correctly analyze the full functionality of your design.</p>
<p class="p">Based on this analysis, the
learn mode process then creates the following control files and
places them in the current directory:</p>
<pre class="pre codeblock"><code>top_pli_learn.acc
top_pli_learn.ocf
top_pli_learn.ocm</code></pre><p class="p">The learn mode analysis reads
the PathSeparator variable in the <span class="ph filepath">modelsim.ini</span> file
at the time it controls the control files. Be sure to use a consistent
path separator throughout the analysis.</p>
</div></li>
<li class="li step stepexpand" id="idb92b598c-f5b3-4747-baad-946edacc9279__ideb25ff61-293a-4cb8-b3c2-ef8f9fabd5d1"><span class="ph cmd">Run the simulation to generate
the control files (<span class="ph filepath">.acc</span>, <span class="ph filepath">.ocf</span>,
and <span class="ph filepath">.ocm</span>).</span><div class="itemgroup info StepInfo"><p class="lines ApplCommand">run &lt;time_step&gt;&lt;time_unit&gt;</p>
<p class="p">While the simulation runs,
the learn mode process tracks and records the objects required for
your PLI routines or that are used for commands executed before
or after the run, for which you need to retain visibility. Use your
knowledge of the design and test bench to estimate how long to run
the simulation. </p>
<p class="p">To ensure that the simulator
records every possible access, you should run a complete simulation
(run -all). </p>
</div></li>
<li class="li step stepexpand" id="idb92b598c-f5b3-4747-baad-946edacc9279__id11e52ceb-458e-49d9-9c69-60e73248172c"><span class="ph cmd">Create an optimized design,
retaining the visibility as defined in the control files. You can
determine which type of control file you wish to use. A command line
example for each type include:</span><div class="itemgroup info StepInfo"><p class="lines ApplCommand">vopt -f top_pli_learn.acc -o top_opt</p>
<p class="lines ApplCommand">vopt -ocf top_pli_learn.ocf -o top_opt</p>
<p class="lines ApplCommand">vopt -ocf top_pli_learn.ocm -o top_opt</p>
<p class="p">The vopt command creates the
optimized design, <span class="ph FontProperty emphasis">top_opt</span>,
and retains visibility to the objects required by your PLI routines. </p>
</div></li>
<li class="li step stepexpand" id="idb92b598c-f5b3-4747-baad-946edacc9279__id432fe966-1194-4d3c-9bc9-fee50bedd922"><span class="ph cmd">Simulate the optimized design. </span><div class="itemgroup info StepInfo"><p class="lines ApplCommand">vsim -pli mypli.sl top_opt</p>
<p class="p">This performs the simulation
on the optimized design, where you retained visibility to the objects
required by your PLI routines.</p>
</div></li>
</ol>
<div class="section result"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Results</h2></div><p class="p">Simulation using learn mode generates
three formats of control files that instruct vopt to retain visibility
to objects required by the specified PLI routines. All three file
formats are text files and are considered to be non-lossy—information
about every object touched by the PLI during the -learn run is retained.</p>
<ul class="ul"><li class="li" id="idb92b598c-f5b3-4747-baad-946edacc9279__id00a00631-98ec-4098-b613-a2b4023fa088"><p class="p">.acc control file — This format
(<span class="ph filepath">.acc</span>) creates the information in the traditional
+acc format used by the vopt command. However, this format does
not allow for precise targeting of objects that you can get with
the <span class="ph filepath">.ocf</span> format.</p>
</li>
<li class="li" id="idb92b598c-f5b3-4747-baad-946edacc9279__id4f59b2d6-9d9c-4b98-b7e1-b9ee34913b5d"><p class="p">.ocf control file — This format
(<span class="ph filepath">.ocf</span>) is the most verbose and precisely targeted
of the three control files. It is recommended that you use this
file for situations where there is sparse access to objects. Note
that if you access every object in a module, this file can get considerably
large. </p>
</li>
<li class="li" id="idb92b598c-f5b3-4747-baad-946edacc9279__idaf030001-d9fb-44bc-b26f-9a67dd51e69c"><p class="p">.ocm control file — This format
(<span class="ph filepath">.ocm</span>) is similar to the <span class="ph filepath">.ocf</span> format,
except that the file is factorized by design unit, which results
in a smaller and more easily read file, but provides less precise targeting.</p>
</li>
</ul>
<p class="p">These files are text-based and anyone
can edit them.</p>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_OptimizingDesignsVopt_id37377122.html" title="Questa SIM, by default, performs built-in optimizations on your design to maximize simulator performance.">Optimizing Designs with vopt</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "questa_sim_user"
                DocTitle = "Questa® SIM User's Manual"
                PageTitle = "Preserving Design Visibility with the Learn Flow"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_PreservingDesignVisibilityLearnFlow_idb92b598c.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® SIM User's Manual Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>