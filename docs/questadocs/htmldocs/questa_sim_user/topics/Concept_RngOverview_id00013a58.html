<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="RNG Overview" />
<meta name="abstract" content="Every SystemVerilog class instance and every process (thread) has its own randstate. Each process has an associated class instance of type process. The randstate of a SystemVerilog process is that of its associated process class instance." />
<meta name="description" content="Every SystemVerilog class instance and every process (thread) has its own randstate. Each process has an associated class instance of type process. The randstate of a SystemVerilog process is that of its associated process class instance." />
<meta name="prodname" content="Questa SIM User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-03-05" />
<meta name="VariantPrefix" content="Q" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for Questa SV/AFV" />
<meta name="SourceHandle" content="questa_sim_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® SIM User's Manual" />
<meta name="CSHelp" content="none" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id00013a58-ad80-4a61-9bb1-c5cea8dac8d9" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>RNG Overview</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="RNG Overview" />
<meta name="attributes" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id00013a58-ad80-4a61-9bb1-c5cea8dac8d9">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">RNG Overview</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">Every SystemVerilog class instance and
every process (thread) has its own randstate. Each process has an
associated class instance of type <span class="ph FontProperty emphasis">process</span>.
The randstate of a SystemVerilog process is that of its associated
process class instance.</span>
</div>
<p class="p">The randstate of a process or class is initialized
either by seeding it with a 32-bit seed value or by re-setting it
using an randstate-string. A randstate-string is a text encoding
of an internal randstate value. The SystemVerilog method <span class="ph FontProperty emphasis">get_randstate</span> is
used to get a randstate-string. </p>
<p class="p">The generation algorithm and randstate encoding are tool specific.
In <span class="ph fmvar:ProductName">Questa SIM</span>, the randstate of
a process or class is represented by 128 bits. <span class="ph fmvar:ProductName">Questa SIM</span> initializes (seeds) the randstate
of a process or class instance with the next random value obtained
from the RNG of the thread that creates the object. </p>
<p class="p">When you create a class object via a static declaration initializer,
there is no active thread. In such cases, <span class="ph fmvar:ProductName">Questa SIM</span> seeds
the object with the next random value of the initialization RNG
of the module instance, interface instance, program instance, or
package in which the declaration is present. Similarly, the RNG
of a process created by a static declaration (for example, an initial
or always block) is seeded with a random value from an initialization
RNG. The initialization RNGs are seeded using a default seed. The
default seed can be set using the <a class="xref Link" href="../../questa_sim_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'vsim', 'questa_sim_ref'); return false;">vsim</a> ‑sv_seed command.</p>
<p class="p">The RNG of a class is only used by <span class="ph FontProperty emphasis">class::randomize()</span>.
If a user-defined <span class="ph FontProperty emphasis">new()</span> function
is called during class construction, the initialization of the class
RNG occurs prior to execution of the <span class="ph FontProperty emphasis">new()</span> function.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">A class object is not seeded by the RNG of the executing
thread if the class does not contain any rand/randc fields and is
never randomized. In such cases, the randstate of the RNG of the executing
thread is left unchanged when such "non-random" class objects are
created.</p>
</div>
<p class="p">There are two parts to initializing a process: </p>
<ul class="ul"><li class="li" id="id00013a58-ad80-4a61-9bb1-c5cea8dac8d9__id35172346-3e28-40e2-a878-d19d03eb5017"><p class="p">Getting
a seed value.</p>
</li>
<li class="li" id="id00013a58-ad80-4a61-9bb1-c5cea8dac8d9__idde82fc35-6b82-49ed-b2f7-d8eeb6eec14b"><p class="p">Initializing
the process <span class="ph FontProperty emphasis">randstate</span>.</p>
</li>
</ul>
<p class="p">When you create a new dynamic thread, the tool (<span class="ph fmvar:ProductName">Questa SIM</span>) obtains the seed value from
the RNG of the parent thread. For a static thread, the tool obtains
the seed from the initialization RNG of the module instance, interface
instance, or package in which the declaration is present and depends
on the declaration order of seeded objects within the scope. The
tool initializes the randstate of a process on the fly, prior to
the first use of the process RNG. </p>
<p class="p">You may manually initialize the randstate
of a class or use the built-in class method, <span class="ph FontProperty emphasis">srandom</span>. You
can set the randstate of a process by first getting a handle to
the current process class and then calling the srandom method of
the class. Also, you can initialize the randstate of the current process
by specifying an argument (seed value) to the $urandom function.
Calling $urandom with an argument seeds the current process and
gets the first random value (after the initialization). </p>
<p class="p">When $urandom is called with an argument, the
argument is first used to seed the RNG of the executing thread and
then a random value is requested from the RNG. In this case there
are two RNG operations: 1) urandom(seed), and 2) urandom.</p>
<p class="p">Various operations may request the next random number from a
process or class RNG. You obtain the random number by a random number
generation algorithm that uses the randstate of the process or class.The
algorithm computes the next random value and updates (modifies)
the randstate. The algorithm is deterministic, which means a specific
state value always yields the same random number and next state
value. Given an initial state, the sequence of generated random
number is therefore deterministic. This is referred to as pseudo-random
number generation. That is, for a specific seed value the tool generates
the same sequence of random numbers. The RNG algorithm is vendor-specific
and the random sequence varies between vendors.</p>
<p class="p">For example:</p>
<pre class="pre codeblock"><code>module top;
    TClass var1 = new;           // The RNG of this class instance is seeded
											with the first random value of the module 												initialization RNG
    TClass var = new;          // The RNG of this class instance is seeded
											 with the next random value of the 
											 module initialization RNG
    initial begin               // The process seed is the next random value 												of the module initialization RNG 
        TClass var;  
        int sval, v2;
                              // the RNG of the (initial)process is
											initialized using the process seed.
        var = new;           // the RNG of the new class instance (var)
											is seeded using the next random value of
											the process (initial) RNG
        sval= $urandom();     // Assign 'sval' the next random value from
											the process RNG 
        var.srandom( sval );     // initialize the RNG of the class
											instance 'var' using the passed seed
											value.
        v2 = $urandom(sval);     // seed the RNG of the current thread
												using 'sval', then get a random value from the thread RNG. 
        process::self.srandom( sval );  // initialize the RNG of the current thread using the passed seed value.
    end</code></pre><p class="p">Use the built-in class methods, get_randstate()
and set_randstate(str), to get and set the randstate of a class
instance (or thread, via the thread's process instance). The get_randstate()
method returns a vendor-specific string representing the randstate
of the class instance. In <span class="ph fmvar:ProductName">Questa SIM</span>, the
string always starts with "MS" (for example, "MS51b809524acc66c8b0d5acb1857ef933"). You
can use the string obtained from the get_randstate() method to reset
the randstate of a class instance using the set_randstate() method.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">Generating or editing the strings obtained from the get_randstate
method is not recommended.</p>
</div>
<p class="p">For example:</p>
<pre class="pre codeblock"><code>string rstate;rstate = process::self.get_randstate();    //get an encoding of the
													      randstate of the current
														   processval = $urandom();                          //modifies the randstate of the
														   process
...
process::self.set_randstate(rstate);       //reset the randstate of the
														   current process</code></pre><p class="p">The next random value of the executing thread is accessed for
any of the following reasons:</p>
<ul class="ul"><li class="li" id="id00013a58-ad80-4a61-9bb1-c5cea8dac8d9__id52459984-8575-4274-b686-36a2cdb3b250"><p class="p">To get
a seed value for initializing a new class.</p>
</li>
<li class="li" id="id00013a58-ad80-4a61-9bb1-c5cea8dac8d9__idfcdfbc7f-760f-49de-9f04-f455ac93f848"><p class="p">To execute
a fork statement. A single random value is accesses from the thread
RNG. This is used to initialize a temporary randstate. The temporary
randstate is used in getting random values to seed each of the new
processes created by the fork. This is done in <span class="ph fmvar:ProductName">Questa SIM</span> to improve the stability of
the parent process (for example, an additional forked process does
not impact the randstate of the parent thread).</p>
</li>
<li class="li" id="id00013a58-ad80-4a61-9bb1-c5cea8dac8d9__id86610806-ad82-4e8d-b655-44c17d16df65"><p class="p">To place a
call to $urandom, $urandom_range</p>
</li>
<li class="li" id="id00013a58-ad80-4a61-9bb1-c5cea8dac8d9__id481c68fd-fe3a-419f-93e1-cb88fe4b4f4d"><p class="p">To execute
the 'shuffle' array method. This may get multiple random values.</p>
</li>
<li class="li" id="id00013a58-ad80-4a61-9bb1-c5cea8dac8d9__ide24a1737-660c-4586-85b4-cc1022d40c64"><p class="p">To execute
a call to std::randomize - to get a single random value.</p>
</li>
<li class="li" id="id00013a58-ad80-4a61-9bb1-c5cea8dac8d9__idabe068ef-0381-4194-a80a-0576bce7f400"><p class="p">To execute
a randcase statement - to get a random value used in the case selection.</p>
</li>
<li class="li" id="id00013a58-ad80-4a61-9bb1-c5cea8dac8d9__id22bdec39-b817-45d5-8e3b-8099886d4ea2"><p class="p">To execute
a randsequence statement. Multiple random values may be used by
the productions of the randsequence.</p>
</li>
<li class="li" id="id00013a58-ad80-4a61-9bb1-c5cea8dac8d9__id61d2ca56-3a31-43e8-9024-28bd29afeb28"><p class="p">To call the
class randomize method – the class RNG is used to get a seed value.
The seed value is used to initialize a local randstate used for
any random values needed by the randomize. The class randomize always
gets a single random value from the class RNG (even if the randomize
fails and does not update any random variables).</p>
</li>
</ul>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_RandomNumberGeneratorRNG_idad5c3d13.html" title="In System Verilog, various constructs make use of random numbers that are supplied by Random Number Generators (RNGs). A random number generator consists of a generation algorithm and an associated internal state referred to as the randstate.">Random Number Generator (RNG)</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../topics/TaskTop_SeedingTheRNG_id2d79dca4.html" title="In SystemVerilog, each thread has its own unique RNG state. The seed of each child thread is initialized from the parent RNG. Questa SIM gives you the ability to seed the root RNG with either a specific integer or a random number.">Seeding the RNG</a></div>
<div><a class="link" href="../topics/Concept_AutomaticFilteringOfSetResetRNGOperations_id3f8d7d4e.html" title="The RNG Trace feature can help with debugging and identifying random instability issues. It records all operations that modify the randstate of a process or class. Comparing (diff) trace files between two simulations can help in the stability analysis.">Automatic Filtering of Set/Reset RNG Operations</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "questa_sim_user"
                DocTitle = "Questa® SIM User's Manual"
                PageTitle = "RNG Overview"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_RngOverview_id00013a58.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® SIM User's Manual Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>