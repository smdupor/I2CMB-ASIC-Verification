<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="GeneralRefTopic" />
<meta name="DC.Title" content="Generic Support for SystemC Instantiating VHDL" />
<meta name="abstract" content="Since the SystemC language has no concept of generics, generic values must be passed from a SystemC parent to an HDL child through the SystemC foreign module (sc_foreign_module)." />
<meta name="description" content="Since the SystemC language has no concept of generics, generic values must be passed from a SystemC parent to an HDL child through the SystemC foreign module (sc_foreign_module)." />
<meta name="DC.subject" content="generics, SystemC instantiating VHDL, SystemC, generic support, instantiating VHDL, generic support, SC instantiating VHDL" />
<meta name="keywords" content="generics, SystemC instantiating VHDL, SystemC, generic support, instantiating VHDL, generic support, SC instantiating VHDL" />
<meta name="prodname" content="Questa SIM User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-03-05" />
<meta name="VariantPrefix" content="Q" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for Questa SV/AFV" />
<meta name="SourceHandle" content="questa_sim_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® SIM User's Manual" />
<meta name="CSHelp" content="none" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id9a39746c-5ca8-4ec1-89c1-a1152e338a21" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Generic Support for SystemC Instantiating VHDL</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Generic Support for SystemC Instantiating VHDL" />
<meta name="attributes" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="default" id="id9a39746c-5ca8-4ec1-89c1-a1152e338a21">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Generic Support for SystemC Instantiating VHDL</h1>
<div class="body refbody GeneralRefBody"><div class="abstract GeneralRefAbstract"><span class="shortdesc">Since the
SystemC language has no concept of generics, generic values must
be passed from a SystemC parent to an HDL child through the SystemC foreign
module (sc_foreign_module). </span>
</div>
<div class="section Subsections"><div class="section Subsection" id="id9a39746c-5ca8-4ec1-89c1-a1152e338a21__idcf6d9dfd-983a-4226-a7ac-0afb5e8caa70"><p class="p">Refer to <a class="xref fm:HeadingOnly" href="General_SystemcForeignModuleVhdlDeclaration_id49a3c44d.html#id49a3c44d-04d8-4ff9-80dd-e6fc69a6f3bc__General_SystemcForeignModuleVhdlDeclaration_id49a3c44d.xml#id49a3c44d-04d8-4ff9-80dd-e6fc69a6f3bc" title="In cases where you want to run a mixed simulation with SystemC and VHDL, you must create and declare a foreign module that stands in for each VHDL design unit instantiated under SystemC. You can create the foreign modules in one of two ways:">SystemC Foreign Module (VHDL) Declaration</a> for information regarding the
creation of sc_foreign_module.</p>
</div>
<div class="section Subsection" id="id9a39746c-5ca8-4ec1-89c1-a1152e338a21__idc351af41-175b-460b-979f-a0a80d8e68cb"><h2 class="title Subheading sectiontitle">Passing Generics
to sc_foreign_module Constructor (VHDL)</h2><p class="p">To instantiate
a VHDL entity containing generics into the SystemC design, you can
use one of two methods, depending on whether the generic is an integer.
If the generic is an integer, you have two choices: passing as a
template argument to the foreign module or as a constructor argument
to the foreign module. Non-integer generics must be passed to the
foreign module using constructor arguments.</p>
</div>
<div class="section Subsection" id="id9a39746c-5ca8-4ec1-89c1-a1152e338a21__idfe78ff8b-7ac6-4b69-aa98-baec4972ab0d"><h2 class="title Subheading sectiontitle">Passing Integer and Non-Integer
Generics as Constructor Arguments</h2><p class="p">Both integer and
non-integer parameters can be passed by specifying two generic parameters
to the sc_foreign_module constructor: the number of generics (int num_generics),
and the generic list (const char* generics_list). The generic_list
is listed as an array of const char*.</p>
<p class="p">If you create your foreign module manually
(see <a class="xref fm:HeadingOnly" href="General_SystemcForeignModuleVhdlDeclaration_id49a3c44d.html#id49a3c44d-04d8-4ff9-80dd-e6fc69a6f3bc__idf60bf083-dc8c-4d5f-b248-d30ca8215306">Guidelines for Manual Creation in VHDL</a>), you must also pass the generic
information to the sc_foreign_module constructor. If you use <span class="ph FontProperty HeadingLabel">scgenmod</span> to create
the foreign module declaration, the generic information is detected
in the HDL child and is incorporated automatically.</p>
<div class="fig fignone ExampleTitle" id="id9a39746c-5ca8-4ec1-89c1-a1152e338a21__id579e65af-152a-4d47-8dad-227d1168dae1"><span class="figcap"><span class="fig--title-label">Example 1. </span>SystemC
Instantiating VHDL, Generic Information</span></div>
<p class="p">Following <a class="xref fm:Example" href="General_SystemcForeignModuleVhdlDeclaration_id49a3c44d.html#id49a3c44d-04d8-4ff9-80dd-e6fc69a6f3bc__ida9068701-b43c-40e9-8b5b-a7433f94fad1">Example 1</a>, the generic information passed to
the SystemC foreign module declaration is shown below. The generic
parameters passed to the constructor are shown in magenta color:</p>
<p class="lines ApplCommand">class counter : public sc_foreign_module {<br />
   public:</p>
<pre class="pre codeblock leveled"><code>		sc_in&lt;bool&gt; clk;
		...</code></pre><pre class="pre codeblock leveled"><code>counter	(sc_module_name nm, char* hdl_name
		<span class="ph FontProperty HeadingLabel">int num_generics, const char** generic_list)
</span>	: sc_foreign_module(nm),
	{elaborate_foreign_module(hdl_name, num_generics, generic_list);}
};</code></pre><p class="p">The instantiation is:</p>
<pre class="pre codeblock leveled"><code>dut = new counter ("dut", "work.counter", 9, generic_list);</code></pre><div class="fig fignone ExampleTitle" id="id9a39746c-5ca8-4ec1-89c1-a1152e338a21__ida60a7f5e-2301-40bb-8b9e-57d7fc51389c"><span class="figcap"><span class="fig--title-label">Example 2. </span>Passing
Parameters as Constructor Arguments - 2</span></div>
<p class="p">VHDL entity:</p>
<pre class="pre codeblock"><code>entity counter is
	generic(
		integer_gen : integer := 4,
		real_gen    : real    := 0.0,
		str_gen     : string);
	port( 
		clk : in std_logic;
		count : out std_logic_vector(7 downto 0));
end counter;</code></pre><p class="p">Foreign module (created by the command: <span class="ph FontProperty HeadingLabel">scgenmod counter</span>)):</p>
<pre class="pre codeblock"><code>class counter : public sc_foreign_module
	{
	public:
		sc_in&lt;sc_logic&gt; clk;
		sc_out&lt;sc_lv&lt;8&gt; &gt; count;</code></pre><pre class="pre codeblock"><code>		counter(sc_module_name nm, const char* hdl_name
			int num_generics, const char** generic_list)
		 : sc_foreign_module(nm),
		   clk("clk"),
		   count("count")
		{
			elaborate_foreign_module(hdl_name, num_generics, generic_list);
		}
		~counter()
		{}
	};</code></pre><p class="p">Instantiation of the foreign module in SystemC:</p>
<pre class="pre codeblock leveled"><code>SC_MODULE(top) {</code></pre><pre class="pre codeblock leveled"><code>	counter* counter_inst_1;  // Instantiate counter with counter_size = 20</code></pre><pre class="pre codeblock"><code>	SC_CTOR(top)
	{
		const char* generic_list[3];
		generic_list[0] = strdup("integer_param=16");
		generic_list[1] = strdup("real_param=2.6");
		generic_list[2] = strdup("str_param=\"Hello\"");
		
		//Pass all parameter overrides using foreign module constructor args
		counter_inst_1 = new counter("c_inst", "work.counter", 3, \ generic_list);</code></pre><pre class="pre codeblock"><code>		// Cleanup the memory allocated for the generic list
		for (int i = 0; i &lt; 3; i++;)
			free((char*)generic_list[i]);
	}
};</code></pre></div>
<div class="section Subsection" id="id9a39746c-5ca8-4ec1-89c1-a1152e338a21__id060890ef-180c-4679-9d4d-e4230f91aa20"><h2 class="title Subheading sectiontitle">Passing Integer Generics
as Template Arguments</h2><p class="p">Integer
generics can be passed as template arguments to a foreign module.
Doing so enables port sizes of VHDL modules to be configured using
the integer template arguments. Use the ‑createtemplate option to <a class="xref Link" href="../../questa_sim_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'scgenmod', 'questa_sim_ref'); return false;">scgenmod</a> to generate
a class template foreign module.</p>
<div class="fig fignone ExampleTitle" id="id9a39746c-5ca8-4ec1-89c1-a1152e338a21__id91900ab3-f001-4c86-909c-37ab6802e629"><span class="figcap"><span class="fig--title-label">Example 3. </span>SystemC
Instantiating VHDL, Passing Integer Generics as Template Arguments</span></div>
<p class="p">VHDL entity:</p>
<pre class="pre codeblock"><code>entity counter is
		generic(counter_size : integer := 4);
		port( 
			clk : in std_logic;
			count : out std_logic_vector(counter_size - 1 downto 0));
	end counter;
			</code></pre><p class="p">Foreign module (created by the command: <span class="ph FontProperty HeadingLabel">scgenmod -createtemplate counter</span>):</p>
<pre class="pre codeblock"><code>template &lt;int counter_size = 4&gt;
	class counter : public sc_foreign_module
	{
	public:
		sc_in&lt;sc_logic&gt; clk;
		sc_out&lt;sc_lv&lt;counter_size-1 + 1&gt; &gt; count;</code></pre><pre class="pre codeblock"><code>		counter(sc_module_name nm, const char* hdl_name)
		 : sc_foreign_module(nm),
		   clk("clk"),
		   count("count")
		{
			this-&gt;add_parameter("counter_size", counter_size);
			elaborate_foreign_module(hdl_name);
		}
		~counter()
		{}</code></pre><pre class="pre codeblock leveled"><code>	}</code></pre><p class="p">Instantiation of the foreign module in SystemC:</p>
<pre class="pre codeblock"><code>	counter&lt;20&gt; counter_inst_1; 
			// Instantiates counter with counter_size = 20
	counter     counter_inst_2; 
			// Instantiates counter with default counter_size = 4</code></pre><pre class="pre codeblock"><code>	SC_CTOR(top)
		: counter_inst_1(cinst_1, "work.counter"),
		  counter_inst_2(cinst_2, "work.counter")
	{}</code></pre><pre class="pre codeblock leveled"><code>};</code></pre><div class="fig fignone ExampleTitle" id="id9a39746c-5ca8-4ec1-89c1-a1152e338a21__id5a8c3385-829c-461e-9d4b-147e5d9c7326"><span class="figcap"><span class="fig--title-label">Example 4. </span>Passing
Integer Generics as Template Arguments and Non-integer Generics
as Constructor Arguments</span></div>
<p class="p">VHDL entity:</p>
<pre class="pre codeblock"><code>entity counter is
	generic(counter_size : integer := 4);
	port(
		clk : in std_logic;
		count : out std_logic_vector(counter_size - 1 downto 0));
end counter;</code></pre><p class="p">Foreign module (created by the command: <span class="ph FontProperty HeadingLabel">scgenmod -createtemplate counter</span>):</p>
<pre class="pre codeblock"><code>template &lt;int counter_size = 4&gt;
class counter : public sc_foreign_module
{
public:
	sc_in&lt;sc_logic&gt; clk;
	sc_out&lt;sc_lv&lt;counter_size-1 + 1&gt; &gt; count;</code></pre><pre class="pre codeblock"><code>	counter(sc_module_name nm, const char* hdl_name
		int num_generics, const char** generic_list)
	 : sc_foreign_module(nm),
	   clk("clk"),
	   count("count")
	{
		this-&gt;add_parameter("counter_size", counter_size);
		elaborate_foreign_module(hdl_name, num_generics, generic_list);
	}
	~counter()
	{}</code></pre><pre class="pre codeblock leveled"><code>};</code></pre><p class="p">Instantiation of the foreign module in SystemC:</p>
<pre class="pre codeblock leveled"><code>SC_MODULE(top) {</code></pre><pre class="pre codeblock"><code>	// Instantiate counter with counter_size = 20
	counter&lt;20&gt;* counter_inst_1; </code></pre><pre class="pre codeblock"><code>	SC_CTOR(top)
	{
		const char* generic_list[2];
		generic_list[0] = strdup("real_param=2.6");
		generic_list[1] = strdup("str_param=\"Hello\"");
		
		//
		// The integer parameter override is already passed as template 
		// argument. Pass the overrides for the non-integer parameters 
		// using the foreign module constructor arguments.
		//
		counter_inst_1 = new counter&lt;20&gt;("c_inst", "work.counter", 2, \ generic_list);</code></pre><pre class="pre codeblock"><code>		// Cleanup the memory allocated for the generic list
		for (int i = 0; i &lt; 2; i++;)
			free((char*)generic_list[i]);
	}
};</code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_SystemcInstantiatingVhdl_ide4255c81.html" title="To instantiate VHDL design units into a SystemC design, you must first generate a SystemC foreign module declaration for each VHDL design unit you want to instantiate.">SystemC Instantiating VHDL</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "questa_sim_user"
                DocTitle = "Questa® SIM User's Manual"
                PageTitle = "Generic Support for SystemC Instantiating VHDL"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/General_GenericSupportSystemcInstantiatingVhdl_id9a39746c.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® SIM User's Manual Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>