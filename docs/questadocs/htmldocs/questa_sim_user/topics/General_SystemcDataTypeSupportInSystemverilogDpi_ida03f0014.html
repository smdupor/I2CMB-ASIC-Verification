<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="GeneralRefTopic" />
<meta name="DC.Title" content="SystemC Data Type Support in SystemVerilog DPI" />
<meta name="abstract" content="The SystemVerilog package “mti_scdpi” must be imported if a SystemC data type is used in the arguments of import and export functions." />
<meta name="description" content="The SystemVerilog package “mti_scdpi” must be imported if a SystemC data type is used in the arguments of import and export functions." />
<meta name="prodname" content="Questa SIM User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-03-05" />
<meta name="VariantPrefix" content="Q" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for Questa SV/AFV" />
<meta name="SourceHandle" content="questa_sim_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® SIM User's Manual" />
<meta name="CSHelp" content="none" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="ida03f0014-eabb-4af6-abdb-0ddbe5128b68" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>SystemC Data Type Support in SystemVerilog DPI</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="SystemC Data Type Support in SystemVerilog DPI" />
<meta name="attributes" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="default" id="ida03f0014-eabb-4af6-abdb-0ddbe5128b68">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">SystemC Data Type Support in SystemVerilog DPI</h1>
<div class="body refbody GeneralRefBody"><div class="abstract GeneralRefAbstract"><span class="shortdesc">The SystemVerilog
package “mti_scdpi” must be imported if a SystemC data type is used
in the arguments of import and export functions.</span>
</div>
<div class="section Subsections"><div class="section Subsection" id="ida03f0014-eabb-4af6-abdb-0ddbe5128b68__id21ae514a-bad3-4ab0-968d-12e922fb5a97"><pre class="pre codeblock leveled"><code>import mti_scdpi::*</code></pre><p class="p">The SystemC data type names have been treated
as special keywords. Avoid using these keywords for other purposes
in your SystemVerilog source files.</p>
<p class="p">The table below shows how each of the SystemC
type will be represented in SystemVerilog. This table must be followed
strictly for passing arguments of SystemC type. The SystemVerilog
typedef statements, listed in the middle column of <a class="xref fm:Table" href="#ida03f0014-eabb-4af6-abdb-0ddbe5128b68__id3dc0ab27-740f-4325-a78b-8ec4d6e58cb5">Table 1</a>, are automatically imported whenever
the mti_scdpi package is imported. </p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="ida03f0014-eabb-4af6-abdb-0ddbe5128b68__id3dc0ab27-740f-4325-a78b-8ec4d6e58cb5" class="table" frame="border" border="1" rules="cols"><caption><span class="tablecap"><span class="table--title-label">Table 1. </span>SystemC Types as Represented in SystemVerilog</span></caption><colgroup><col style="width:2.058in" /><col style="width:2.058in" /><col style="width:2.058in" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d164362e167"><p class="p">SystemC Type</p>
</th>
<th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d164362e170"><p class="p">SystemVerilog Typedef</p>
</th>
<th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d164362e173"><p class="p">Import/Export Declaration</p>
</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d164362e167 "><p class="p">sc_logic</p>
<p class="p">sc_bit</p>
<p class="p">sc_bv&lt;N&gt; </p>
<p class="p">sc_lv&lt;N&gt; </p>
<p class="p">sc_int&lt;N&gt; </p>
<p class="p">sc_uint&lt;N&gt; </p>
<p class="p">sc_bigint&lt;N&gt; </p>
<p class="p">sc_biguint&lt;N&gt; </p>
<p class="p">sc_fixed&lt;W,I,Q,O,N&gt; </p>
<p class="p">sc_ufixed&lt;W,I,Q,O,N&gt; </p>
<p class="p">sc_fixed_fast&lt;W...&gt; </p>
<p class="p">sc_ufixed_fast&lt;W...&gt; </p>
<p class="p">sc_signed </p>
<p class="p">sc_unsigned </p>
<p class="p">sc_fix </p>
<p class="p">sc_ufix </p>
<p class="p">sc_fix_fast </p>
<p class="p">sc_ufix_fast </p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d164362e170 "><p class="p">typedef logic sc_logic</p>
<p class="p">typedef bit sc_bit</p>
<p class="p">typedef bit sc_bv </p>
<p class="p">typedef logic sc_lv </p>
<p class="p">typedef bit sc_int </p>
<p class="p">typedef bit sc_uint </p>
<p class="p">typedef bit sc_bigint </p>
<p class="p">typedef bit sc_biguint </p>
<p class="p">typedef bit sc_fixed </p>
<p class="p">typedef bit sc_ufixed </p>
<p class="p">typedef bit sc_fixed_fast </p>
<p class="p">typedef bit sc_ufixed_fast </p>
<p class="p">typedef bit sc_signed </p>
<p class="p">typedef bit sc_unsigned </p>
<p class="p">typedef bit sc_fix </p>
<p class="p">typedef bit sc_ufix </p>
<p class="p">typedef bit sc_fix_fast </p>
<p class="p">typedef bit sc_ufix_fast</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d164362e173 "><p class="p">sc_logic</p>
<p class="p">sc_bit</p>
<p class="p">sc_bit[N-1:0] </p>
<p class="p">sc_lv[N-1:0] </p>
<p class="p">sc_int[N-1:0] </p>
<p class="p">sc_uint[N-1:0] </p>
<p class="p">sc_bigint[N-1:0] </p>
<p class="p">sc_biguint[N-1:0] </p>
<p class="p">sc_fixed[I-1:I-W] </p>
<p class="p">sc_ufixed[I-1:I-W] </p>
<p class="p">sc_fixed[I-1:I-W] </p>
<p class="p">sc_fixed[I-1:I-W] </p>
<p class="p">sc_signed[N-1:0]</p>
<p class="p">sc_unsigned[N-1:0]</p>
<p class="p">sc_fix[I-1:1-W]</p>
<p class="p">sc_ufix[I-1:1-W]</p>
<p class="p">sc_fix_fast[I-1:1-W]</p>
<p class="p">sc_ufix_fast[I-1:1-W]</p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p">According to the table above, a SystemC argument
of type <span class="ph FontProperty HeadingLabel">sc_uint&lt;32&gt;</span> will
be declared as <span class="ph FontProperty HeadingLabel">sc_uint[31:0]</span> in
SystemVerilog “DPI-SC” declaration. Similarly, <span class="ph FontProperty HeadingLabel">sc_lv&lt;9&gt;</span> would
be <span class="ph FontProperty HeadingLabel">sc_lv[8:0]</span>.
to enable the fixed point datatypes, the SystemC source file must
be compiled with  -DSC_INCLUDE_FX.</p>
<p class="p">For fixed-point types the left and right indexes
of the SystemVerilog vector can lead to a negative number. For example, <span class="ph FontProperty HeadingLabel">sc_fixed&lt;3,0&gt;</span> will
translate to <span class="ph FontProperty HeadingLabel">sc_fixed[0-1:0-3] </span>which
is <span class="ph FontProperty HeadingLabel">sc_fixed[-1:-3]</span>.
This representation is used for fixed-point numbers in the <span class="ph fmvar:ProductName">Questa SIM</span> tool, and must be
strictly followed. </p>
<p class="p">For the SystemC types whose size is determined
during elaboration, such as sc_signed and sc_unsigned, a parameterized
array must be used on the SystemVerilog side. The array size parameter
value, on the SystemVerilog side, must match correctly with the
constructor arguments passed to types such as sc_signed and sc_unsigned
at SystemC elaboration time. </p>
</div>
<div class="section Subsection" id="ida03f0014-eabb-4af6-abdb-0ddbe5128b68__id9f9612b3-0f48-4017-a12a-30e6051eff94"><h2 class="title Subheading sectiontitle">Examples</h2><p class="p">An export declaration with arguments of SystemC
type: </p>
<pre class="pre codeblock leveled"><code>export "DPI-SC" context function Export;</code></pre><pre class="pre codeblock"><code>import mti_scdpi::*;
function int Export(input sc_logic a, input sc_int[8:0] b);</code></pre><p class="p">An import function with arguments of SystemC
type: </p>
<pre class="pre codeblock"><code>import mti_scdpi::*;
import "DPI-SC" context function int scGlobalImport(
                        input sc_logic a, output sc_lv[8:0] b);</code></pre><p class="p">An export function with arguments of regular
C types: </p>
<pre class="pre codeblock"><code>export "DPI-SC" context function Export;
function int Export(input int a, output int b);</code></pre></div>
<div class="section Subsection" id="ida03f0014-eabb-4af6-abdb-0ddbe5128b68__id1d5e6471-b42c-434f-bdf8-01a5c9ec88dd"><h2 class="title Subheading sectiontitle">Using a Structure
to Group Variables</h2><p class="p">Both SystemC and SystemVerilog support using
a <span class="ph FontProperty emphasis">structure</span>,
which is a composite data type that consists of a user-defined group
of variables. This grouping capability of a structure provides a
convenient way to work with a large number of related variables.
The structure lets you use multiple instances of these variables
without having to repeat them individually for each instance. </p>
<p class="p">The same typedefs
supported for SystemC types as arguments to DPI-SC can be members
of structures. </p>
</div>
<div class="section Subsection" id="ida03f0014-eabb-4af6-abdb-0ddbe5128b68__id932b49d7-2d59-4a02-8dee-3765d37cccc8"><h2 class="title Subheading sectiontitle">Example — SystemVerilog</h2><p class="p">The following structure declaration defines
a group of five simple variables: direction, flags, data, addr,
token_number. The name of the structure is defined as packet_sv. </p>
<pre class="pre codeblock"><code>typedef struct {
    sc_bit         direction;
    sc_bv[7:0]     flags;
    sc_lv[63:0]    data;
    bit[63:0]      addr;
    int            token_number;
} packet_sv;</code></pre><p class="p">You can then use this structure (packet_sv)
as a datatype for arguments of DPI-SC, just like any other variable.
For example: </p>
<pre class="pre codeblock leveled"><code>import "DPI-SC" task svImportTask(input packet_sv pack_in, 
output packet_sv pack_out);</code></pre></div>
<div class="section Subsection" id="ida03f0014-eabb-4af6-abdb-0ddbe5128b68__idc340fbd4-d217-497b-860d-250a994e046e"><h2 class="title Subheading sectiontitle">Example — SystemC</h2><p class="p">An equivalent structure containing corresponding
members of SystemC types are available on the SystemC side of the
design. The following structure declaration defines a group of five
simple variables: direction, flags, data, addr, token_number. The
name of the structure is defined as packet_sc. </p>
<pre class="pre codeblock"><code>typedef struct {
    sc_bit         direction;
    sc_bv&lt;8&gt;       flags;
    sc_lv&lt;64&gt;      data;
    svBitVecVal    addr[SV_PACKED_DATA_NELEMS(64)];
    int            token_number;
} packet_sc;</code></pre><p class="p">You can then use this structure (packet_sc)
as a data-type for arguments of DPI-SC, just like any other variable.
For example: </p>
<pre class="pre codeblock leveled"><code>import "DPI-SC" task svImportTask(input packet_sc pack_in, 
output packet_sc pack_out);</code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_SystemcProceduralInterfaceSystemverilog_idb622845a.html" title="SystemC designs can communicate with SystemVerilog through a procedural interface, the SystemVerilog Direct Programming Interface (DPI). In contrast to a hierarchical interface, where communication is advanced through signals and ports, DPI communications consists of task and function calls passing data as arguments. This type of interface can be useful in transaction level modeling, in which bus functional models are widely used.">SystemC Procedural Interface to SystemVerilog</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "questa_sim_user"
                DocTitle = "Questa® SIM User's Manual"
                PageTitle = "SystemC Data Type Support in SystemVerilog DPI"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/General_SystemcDataTypeSupportInSystemverilogDpi_ida03f0014.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® SIM User's Manual Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>