<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Properly Recognizing Derived Module Class Pointers" />
<meta name="abstract" content="If you declare a pointer as a base class pointer, but actually assign a derived class object to it, Questa SIM still treats it as a base class pointer instead of a derived class pointer, as you intended. As such, it would be unavailable for debug. To make it available for debug, you must use the mti_set_typename member function to instruct that it should be treated as a derived class pointer." />
<meta name="description" content="If you declare a pointer as a base class pointer, but actually assign a derived class object to it, Questa SIM still treats it as a base class pointer instead of a derived class pointer, as you intended. As such, it would be unavailable for debug. To make it available for debug, you must use the mti_set_typename member function to instruct that it should be treated as a derived class pointer." />
<meta name="prodname" content="Questa SIM User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-03-05" />
<meta name="VariantPrefix" content="Q" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for Questa SV/AFV" />
<meta name="SourceHandle" content="questa_sim_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® SIM User's Manual" />
<meta name="CSHelp" content="none" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id81e6df72-a517-455a-b3ed-abc3b9e367b5" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Properly Recognizing Derived Module Class Pointers</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Properly Recognizing Derived Module Class Pointers" />
<meta name="attributes" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id81e6df72-a517-455a-b3ed-abc3b9e367b5">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Properly Recognizing Derived Module Class Pointers</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">If you declare
a pointer as a base class pointer, but actually assign a derived
class object to it, <span class="ph fmvar:ProductName">Questa SIM</span> still
treats it as a base class pointer instead of a derived class pointer,
as you intended. As such, it would be unavailable for debug. To
make it available for debug, you must use the <span class="ph FontProperty HeadingLabel">mti_set_typename</span> member
function to instruct that it should be treated as a derived class
pointer.</span>
</div>
<p class="p">To correctly associate the derived
class type with an instance:</p>
<ol class="ol"><li class="li" id="id81e6df72-a517-455a-b3ed-abc3b9e367b5__id040572c5-3825-4243-ae11-d0cb6a90845b"><p class="p">Use the member function <span class="ph FontProperty HeadingLabel">mti_set_typename</span> and
apply it to the modules. Pass the actual derived class name to the
function when an instance is constructed, as shown in <a class="xref fm:Example" href="#id81e6df72-a517-455a-b3ed-abc3b9e367b5__id3404bd50-d9dd-4d7e-af03-cb320aa7af44">Example 1</a>.</p>
<div class="fig fignone ExampleTitle" id="id81e6df72-a517-455a-b3ed-abc3b9e367b5__id3404bd50-d9dd-4d7e-af03-cb320aa7af44"><span class="figcap"><span class="fig--title-label">Example 1. </span>Use
of mti_set_typename</span></div>
<pre class="pre codeblock"><code>SC_MODULE(top) {

    base_mod* inst;

	SC_CTOR(top) {

		if (some_condition) {
			inst = new d1_mod("d1_inst");
			inst-&gt;<span class="ph FontProperty HeadingLabel">mti_set_typename</span>("d1_mod");
		} else {
			inst = new d2_mod("d2_inst");
			inst-&gt;<span class="ph FontProperty HeadingLabel">mti_set_typename</span>("d2_mod");
		}
	}
};</code></pre><div class="note tip"><span class="tiptitle">Tip</span> <p class="p">: In this example,
the class names are simple names, which may not be the case if the
type is a class template with lots of template parameters. Look
up the name in <span class="ph filepath">&lt;work&gt;/moduleinfo.sc</span> file,
if you are unsure of the exact names.</p>
</div>
</li>
</ol>
<p class="p">Here is the code for which the above SC_MODULE
was modified:</p>
<pre class="pre codeblock"><code>class base_mod : public sc_module {

   sc_signal&lt;int&gt; base_sig;
   int            base_var;

   ...

};

class d1_mod : public base_mod {

   sc_signal&lt;int&gt; d1_sig;
   int            d1_var;

   ...

};

class d2_mod : public base_mod {

   sc_signal&lt;int&gt; d2_sig;
   int            d2_var;

   ...

};

SC_MODULE(top) {

    base_mod* inst;

	SC_CTOR(top) {

		if (some_condition)
			inst = new d1_mod("d1_inst");
		else
			inst = new d2_mod("d2_inst");
	}
};</code></pre><p class="p">In this unmodified code, the <span class="ph FontProperty HeadingLabel">sccom</span> compiler
could only see the declarative region of a module, so it thinks
"inst" is a pointer to the "base_mod" module. After elaboration,
the GUI would only show "base_sig" and "base_var" in the Objects window
for the instance "inst." </p>
<p class="p">You really wanted to see all the variables
and signals of that derived class. However, since you did not associate
the proper derived class type with the instance "inst", the signals
and variables of the derived class are not debuggable, even though
they exist in the kernel.</p>
<p class="p">The solution is to associate the derived class
type with the instance, as shown in the modified SC_MODULE above.</p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_SystemcObjectTypeDisplay_idfe9c3d1a.html" title="This section contains information on how Questa SIM displays certain objects and types, as they may differ from other simulators.">SystemC Object and Type Display</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "questa_sim_user"
                DocTitle = "Questa® SIM User's Manual"
                PageTitle = "Properly Recognizing Derived Module Class Pointers"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_ProperlyRecognizingDerivedModuleClassPointers_id81e6df72.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® SIM User's Manual Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>