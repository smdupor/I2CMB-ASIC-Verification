<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="GeneralRefTopic" />
<meta name="DC.Title" content="TextIO Implementation Issues" />
<meta name="abstract" content="Questa SIM does not fully implement all facets of the TextIO package, which can result in ambiguous results." />
<meta name="description" content="Questa SIM does not fully implement all facets of the TextIO package, which can result in ambiguous results." />
<meta name="DC.subject" content="TextIO package, implementation issues" />
<meta name="keywords" content="TextIO package, implementation issues" />
<meta name="prodname" content="Questa SIM User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-03-05" />
<meta name="VariantPrefix" content="Q" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for Questa SV/AFV" />
<meta name="SourceHandle" content="questa_sim_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® SIM User's Manual" />
<meta name="CSHelp" content="none" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idd2cdd022-8f25-47b7-b7f8-ac9081050e7b" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>TextIO Implementation Issues</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="TextIO Implementation Issues" />
<meta name="attributes" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="default" id="idd2cdd022-8f25-47b7-b7f8-ac9081050e7b">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">TextIO Implementation Issues</h1>
<div class="body refbody GeneralRefBody"><div class="abstract GeneralRefAbstract"><span class="shortdesc"><span class="ph fmvar:ProductName">Questa SIM</span> does not fully implement all
facets of the TextIO package, which can result in ambiguous results. </span>
</div>
<div class="section Subsections"><div class="section Subsection" id="idd2cdd022-8f25-47b7-b7f8-ac9081050e7b__id7de46257-9b44-4343-b4d6-c06b2d26840f"><h2 class="title Subheading sectiontitle">WRITE Procedures
for Strings and Aggregates</h2><p class="p">A common error in VHDL source code occurs when
a call to a WRITE procedure does not specify whether the argument
is of type STRING or BIT_VECTOR. For example, the VHDL procedure:</p>
<pre class="pre codeblock leveled"><code>WRITE (L, "hello");</code></pre><p class="p">causes the following error:</p>
<pre class="pre codeblock leveled"><code>ERROR: Subprogram "WRITE" is ambiguous.</code></pre><p class="p">In the TextIO package, the WRITE procedure
is overloaded for the types STRING and BIT_VECTOR. These lines are
reproduced here:</p>
<pre class="pre codeblock leveled"><code>procedure WRITE(L: inout LINE; VALUE: in BIT_VECTOR;
	JUSTIFIED: in SIDE:= RIGHT; FIELD: in WIDTH := 0);</code></pre><pre class="pre codeblock leveled"><code>procedure WRITE(L: inout LINE; VALUE: in STRING;
	JUSTIFIED: in SIDE:= RIGHT; FIELD: in WIDTH := 0);</code></pre><p class="p">The error occurs because the argument "hello"
could be interpreted as a string or a bit vector, but the compiler
is not allowed to determine the argument type until it knows which function
is being called.</p>
<p class="p">The following procedure call also generates
an error:</p>
<pre class="pre codeblock leveled"><code>WRITE (L, "010101");</code></pre><p class="p">This call is even more ambiguous, because the
compiler cannot determine, even if allowed to, whether the argument
"010101" should be interpreted as a string or a bit vector.</p>
<p class="p">There are two possible solutions to this problem:</p>
<ul class="ul"><li class="li" id="idd2cdd022-8f25-47b7-b7f8-ac9081050e7b__idf83752e5-7084-472a-9afb-32a9b4fab966"><p class="p">Use
a qualified expression to specify the type, as in:</p>
<pre class="pre codeblock leveled"><code>WRITE (L, string’("hello"));</code></pre></li>
<li class="li" id="idd2cdd022-8f25-47b7-b7f8-ac9081050e7b__id0d0b2ee0-1ed4-4726-8243-47b5c36bcc04"><p class="p">Call
a procedure that is not overloaded, as in:</p>
<pre class="pre codeblock leveled"><code>WRITE_STRING (L, "hello");</code></pre></li>
</ul>
<p class="p">The WRITE_STRING procedure defines the value
to be a STRING and calls the WRITE procedure, and it also serves
as a shell around the WRITE procedure that solves the overloading problem.
For further details, refer to the WRITE_STRING procedure in the
io_utils package, which is located in the file <span class="ph filepath">&lt;install_dir&gt;/<span class="ph fmvar:InstallDir">questasim</span>/examples/vhdl/io_utils/io_utils.vhd</span>.</p>
</div>
<div class="section Subsection" id="idd2cdd022-8f25-47b7-b7f8-ac9081050e7b__id6bb5ab97-b0b5-4191-9397-8e185ccf7c09"><h2 class="title Subheading sectiontitle">Reading and
Writing Hexadecimal Numbers</h2><p class="p">The reading and writing of hexadecimal
numbers is not specified in standard VHDL. The Issues Screening
and Analysis Committee of the VHDL Analysis and Standardization
Group (ISAC-VASG) has specified that the TextIO package reads and
writes only decimal numbers.</p>
<p class="p">To expand this functionality, <span class="ph fmvar:ProductName">Questa SIM</span> supplies hexadecimal
routines in the io_utils package, which is located in the file <span class="ph filepath">&lt;install_dir&gt;/<span class="ph fmvar:InstallDir">questasim</span>/examples/gui/io_utils.vhd</span>.
To use these routines, compile the io_utils package and then include the
following use clauses in your VHDL source code:</p>
<pre class="pre codeblock leveled"><code>use std.textio.all;
use work.io_utils.all;</code></pre></div>
<div class="section Subsection" id="idd2cdd022-8f25-47b7-b7f8-ac9081050e7b__id11c48834-ffd9-42a1-b3c7-c6e2fe727849"><h2 class="title Subheading sectiontitle">Dangling Pointers</h2><p class="p">Dangling pointers often occur when using the
TextIO package, because WRITELINE de-allocates the access type (pointer)
that is passed to it. Following are examples of good and bad VHDL
coding styles:</p>
<p class="p"><span class="ph FontProperty HeadingLabel">Bad VHDL</span> (because
L1 and L2 both point to the same buffer):</p>
<pre class="pre codeblock leveled"><code>READLINE (infile, L1);    -- Read and allocate buffer
L2 := L1;                 -- Copy pointers
WRITELINE (outfile, L1);  -- Deallocate buffer</code></pre><p class="p"><span class="ph FontProperty HeadingLabel">Good VHDL</span> (because
L1 and L2 point to different buffers):</p>
<pre class="pre codeblock leveled"><code>READLINE (infile, L1);      -- Read and allocate buffer
L2 := new string’(L1.all);  -- Copy contents
WRITELINE (outfile, L1);    -- Deallocate buffer</code></pre></div>
<div class="section Subsection" id="idd2cdd022-8f25-47b7-b7f8-ac9081050e7b__id194a9b18-7171-4deb-b3f5-e8330c7e8fc6"><h2 class="title Subheading sectiontitle">The ENDLINE
Function</h2><p class="p">The ENDLINE function — described in the IEEE
Std 1076-2002, <cite class="cite">IEEE Standard VHDL Language Reference Manual
— </cite>contains invalid VHDL syntax and cannot be implemented
in VHDL. This is because access values must be passed as variables,
but functions do not allow variable parameters.</p>
<p class="p">Based
on an ISAC-VASG recommendation, the ENDLINE function has been removed
from the TextIO package. The following test can be substituted for
this function:</p>
<pre class="pre codeblock leveled"><code>(L = NULL) OR (L’LENGTH = 0)</code></pre></div>
<div class="section Subsection" id="idd2cdd022-8f25-47b7-b7f8-ac9081050e7b__id6c4f4501-7492-408e-ac3d-a71787542721"><h2 class="title Subheading sectiontitle">The ENDFILE
Function</h2><p class="p">In the <cite class="cite">VHDL Language Reference Manual, </cite>the
ENDFILE function is listed as:</p>
<pre class="pre codeblock leveled"><code>-- function ENDFILE (L: in TEXT) return BOOLEAN;</code></pre><p class="p">Note
the this function is commented out of the standard TextIO package.
This is because the ENDFILE function is implicitly declared, so
you can use it with files of any type, not just files of type TEXT. </p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_TextioPackage_id5f5dd973.html" title="The TextIO package for VHDL is defined in the IEEE Std 1076-2002, IEEE Standard VHDL Language Reference Manual. This package allows human-readable text input from a declared source within a VHDL file during simulation.">The TextIO Package</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "questa_sim_user"
                DocTitle = "Questa® SIM User's Manual"
                PageTitle = "TextIO Implementation Issues"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/General_TextioImplementationIssues_idd2cdd022.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® SIM User's Manual Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>