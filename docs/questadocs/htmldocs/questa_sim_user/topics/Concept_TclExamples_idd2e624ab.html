<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Tcl Examples" />
<meta name="abstract" content="This section provides examples of Tcl command usage." />
<meta name="description" content="This section provides examples of Tcl command usage." />
<meta name="prodname" content="Questa SIM User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-03-05" />
<meta name="VariantPrefix" content="Q" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for Questa SV/AFV" />
<meta name="SourceHandle" content="questa_sim_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="QuestaÂ® SIM User's Manual" />
<meta name="CSHelp" content="none" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idd2e624ab-b5dd-4c3a-9020-62cd5f6c69a1" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Tcl Examples</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Tcl Examples" />
<meta name="attributes" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="idd2e624ab-b5dd-4c3a-9020-62cd5f6c69a1">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Tcl Examples</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">This section
provides examples of Tcl command usage.</span>
</div>
<ul class="ul"><li class="li" id="idd2e624ab-b5dd-4c3a-9020-62cd5f6c69a1__idb80dea27-837e-4bc2-8e7a-ba9418555493"><p class="p">Tcl while Loop </p>
<p class="p">This example uses the Tcl while loop to copy
a list from variable <span class="keyword ParameterName OptionalReplaceable">a</span> to
variable <span class="keyword ParameterName OptionalReplaceable">b</span>,
reversing the order of the elements along the way:</p>
<pre class="pre codeblock leveled"><code>set b [list]
set i [expr {[llength $a] - 1}]
while {$i &gt;= 0} {
	lappend b [lindex $a $i]
	incr i -1
}
</code></pre></li>
<li class="li" id="idd2e624ab-b5dd-4c3a-9020-62cd5f6c69a1__id709152ed-11e2-46c3-ae18-4ddf62501c96"><p class="p">Tcl for Command</p>
<p class="p">This example uses the Tcl for command to
copy a list from variable <span class="keyword ParameterName OptionalReplaceable">a</span> to
variable <span class="keyword ParameterName OptionalReplaceable">b</span>,
reversing the order of the elements along the way:</p>
<pre class="pre codeblock leveled"><code>set b [list]
for {set i [expr {[llength $a] - 1}]} {$i &gt;= 0} {incr i -1} {
	lappend b [lindex $a $i]
}

</code></pre></li>
<li class="li" id="idd2e624ab-b5dd-4c3a-9020-62cd5f6c69a1__id2a621eec-29cb-4442-9b52-cefe0c014f8b"><p class="p">Tcl foreach Command</p>
<p class="p">This example uses the Tcl foreach command
to copy a list from variable <span class="keyword ParameterName OptionalReplaceable">a</span> to
variable <span class="keyword ParameterName OptionalReplaceable">b</span>,
reversing the order of the elements along the way (the foreach command
iterates over all of the elements of a list):</p>
<pre class="pre codeblock leveled"><code>set b [list]
foreach i $a { set b [linsert $b 0 $i] }
</code></pre></li>
<li class="li" id="idd2e624ab-b5dd-4c3a-9020-62cd5f6c69a1__id3f5b01be-a5fc-404e-91d0-c6e4adc03949"><p class="p">Tcl break Command</p>
<p class="p">This example shows a list reversal as above,
this time aborting on a particular element using the Tcl break command:</p>
<pre class="pre codeblock leveled"><code>set b [list]
foreach i $a {
	if {$i = "ZZZ"} break
	set b [linsert $b 0 $i]
}
</code></pre></li>
<li class="li" id="idd2e624ab-b5dd-4c3a-9020-62cd5f6c69a1__id4683da7c-b010-488f-a163-7a3217286a22"><p class="p">Tcl continue Command</p>
<p class="p">This example is a list reversal that skips
a particular element by using the Tcl continue command:</p>
<pre class="pre codeblock leveled"><code>set b [list]
foreach i $a {
	if {$i = "ZZZ"} continue
	set b [linsert $b 0 $i]
}
</code></pre></li>
<li class="li" id="idd2e624ab-b5dd-4c3a-9020-62cd5f6c69a1__id81a3dc45-a6fb-482e-a390-ad53eb234dfe"><p class="p">Access and Transfer System Information</p>
<p class="p">This example works in UNIX only. In a Windows
environment, the Tcl exec command will execute compiled files only,
not system commands.) The example shows how you can access system
information and transfer it into VHDL variables or signals and Verilog
nets or registers. When a particular HDL source breakpoint occurs,
a Tcl function is called that gets the date and time and deposits
it into a VHDL signal of type STRING. If a particular environment
variable (DO_ECHO) is set, the function also echoes the new date
and time to the transcript file by examining the VHDL variable.</p>
<p class="p">(in VHDL source):</p>
<pre class="pre codeblock leveled"><code>signal datime : string(1 to 28) := " ";# 28 spaces</code></pre><p class="p">(on VSIM command line or in a DO file script):</p>
<pre class="pre codeblock leveled"><code>proc set_date {} {
	global env
	set do_the_echo [set env(DO_ECHO)]
	set s [clock format [clock seconds]]
	force -deposit datime $s
	if {do_the_echo} {
		echo "New time is [examine -value datime]"
	}
}

bp src/waveadd.vhd 133 {set_date; continue}
    --sets the breakpoint to call set_date</code></pre></li>
<li class="li" id="idd2e624ab-b5dd-4c3a-9020-62cd5f6c69a1__id950ec24f-3d92-4902-843b-1f7e002dd873"><p class="p">Tcl Used to Specify Compiler Arguments</p>
<p class="p">This example specifies the compiler arguments
and lets you compile any number of files.</p>
<pre class="pre codeblock leveled"><code>set Files [list]
set nbrArgs $argc
for {set x 1} {$x &lt;= $nbrArgs} {incr x} {
	set lappend Files $1
	shift
}
eval vcom -93 -explicit -noaccel std_logic_arith $Files</code></pre></li>
<li class="li" id="idd2e624ab-b5dd-4c3a-9020-62cd5f6c69a1__id2ab88970-7427-4d6c-bae8-2056e90f513d"><p class="p">Tcl Used to Specify Compiler ArgumentsâEnhanced</p>
<p class="p">This example is an enhanced version of the
last one. The additional code determines whether the files are VHDL
or Verilog and uses the appropriate compiler and arguments depending
on the file type. Note that the script assumes your VHDL files have
a <span class="ph filepath">.vhd</span> file extension.</p>
<pre class="pre codeblock leveled"><code>set vhdFiles [list]
set vFiles [list]
set nbrArgs $argc
for {set x 1} {$x &lt;= $nbrArgs} {incr x} {
	if {[string match *.vhd $1]} {
		lappend vhdFiles $1
	} else {
		lappend vFiles $1
	}
	shift
}
if {[llength $vhdFiles] &gt; 0} {
	eval vcom -93 -explicit -noaccel std_logic_arith $vhdFiles
}
if {[llength $vFiles] &gt; 0} {
	eval vlog $vFiles
}</code></pre></li>
</ul>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_TclDoFiles_idabe446a3.html" title="Tcl is a scripting language for controlling and extending QuestaÂ SIM. Within QuestaÂ SIM you can develop implementations from Tcl scripts without the use of C code. Because Tcl is interpreted, development is rapid; you can generate and execute Tcl scripts âon the flyâ without stopping to recompile or restart QuestaÂ SIM. In addition, if QuestaÂ SIM does not provide a command you need, you can use Tcl to create your own commands.">Tcl and DO Files</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter">Â </div><div class="Footer" id="Footer">Â </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "questa_sim_user"
                DocTitle = "QuestaÂ® SIM User's Manual"
                PageTitle = "Tcl Examples"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_TclExamples_idd2e624ab.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">QuestaÂ® SIM User's ManualÂ Software Version 2020.4<br />Unpublished work. Â©Â Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>