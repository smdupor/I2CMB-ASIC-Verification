<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="GeneralRefTopic" />
<meta name="DC.Title" content="Limitations of Merge for Coverage Analysis" />
<meta name="abstract" content="Because a test-associated merge (vcover merge -testassociated) does not perfectly preserve information, it can be misleading in some circumstances." />
<meta name="description" content="Because a test-associated merge (vcover merge -testassociated) does not perfectly preserve information, it can be misleading in some circumstances." />
<meta name="prodname" content="Questa SIM User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-03-05" />
<meta name="VariantPrefix" content="Q" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for Questa SV/AFV" />
<meta name="SourceHandle" content="questa_sim_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® SIM User's Manual" />
<meta name="CSHelp" content="none" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id8881ebba-3b94-41f0-9483-ed0d2ce91ac1" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Limitations of Merge for Coverage Analysis</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Limitations of Merge for Coverage Analysis" />
<meta name="attributes" content="product.version.2020.4,sort.order.020,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="default" id="id8881ebba-3b94-41f0-9483-ed0d2ce91ac1">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Limitations of Merge for Coverage Analysis</h1>
<div class="body refbody GeneralRefBody"><div class="abstract GeneralRefAbstract"><span class="shortdesc">Because
a test-associated merge (vcover merge -testassociated) does not
perfectly preserve information, it can be misleading in some circumstances. </span>
</div>
<div class="section Subsections"><div class="section Subsection" id="id8881ebba-3b94-41f0-9483-ed0d2ce91ac1__id927fabec-43be-41cf-801b-b14d1a66e66e"><p class="p">These circumstances are detected during the
merge, issuing a warning similar to the following: </p>
<pre class="pre codeblock"><code>Information has not been perfectly preserved during the merge of file 'test.ucdb'.
If you use 'coverage analyze -test', test filtering in the Tracker GUI, or test ranking, results may be inaccurate based on this merge.
For more information issue the command 'verror 6846'.
For more details, rerun merge with the '-verbose' option set.</code></pre><p class="p">You only need to be concerned about this warning
if you are using any of the following verification management features:</p>
<ul class="ul"><li class="li" id="id8881ebba-3b94-41f0-9483-ed0d2ce91ac1__id7089b015-fc05-4a19-b698-45a2a81fb9a2"><p class="p">“coverage
analyze -test” at the command line</p>
</li>
<li class="li" id="id8881ebba-3b94-41f0-9483-ed0d2ce91ac1__id6dfe0442-c0a1-4522-985c-365c1b37f4ec"><p class="p">“coverage
analyze -coverage” at the command line</p>
</li>
<li class="li" id="id8881ebba-3b94-41f0-9483-ed0d2ce91ac1__id051d07b3-69cc-4bf3-908a-78b80b3e130f"><p class="p">“vcover
ranktest” (unless using vcover ranktest -iterative)</p>
</li>
<li class="li" id="id8881ebba-3b94-41f0-9483-ed0d2ce91ac1__id76af8b88-1b7b-44a6-abe2-185da9b13479"><p class="p">Testplan
analysis in the GUI, using either:</p>
<ul class="ul"><li class="li" id="id8881ebba-3b94-41f0-9483-ed0d2ce91ac1__idcb815dd9-a7f7-4bc3-964b-d7dcede553b7"><p class="p"><span class="ph menucascade"><span class="ph uicontrol">Verification Tracker</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Filter</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Setup</span></span> (or<span class="ph uicontrol">Apply)</span> </p>
</li>
<li class="li" id="id8881ebba-3b94-41f0-9483-ed0d2ce91ac1__iddd97aeaf-3503-4e44-a2e9-68fd80084efc"><p class="p"><span class="ph menucascade"><span class="ph uicontrol">Verification Tracker</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Test Analysis</span></span> menu items</p>
</li>
</ul>
</li>
<li class="li" id="id8881ebba-3b94-41f0-9483-ed0d2ce91ac1__id13b93314-5867-4d03-9293-db4928474c1f"><p class="p">Rules-based
linking</p>
</li>
</ul>
<p class="p">If you do not plan to use any of the above
mentioned features, you can safely ignore the 6846 error message.
However, some features that rely on a certain level of preservation
— test ranking and Coverage View (vsim -viewcov) mode CLI features,
for example — issue the warning if a test-associated merge file
is used in any of the following cases:</p>
<ul class="ul"><li class="li" id="id8881ebba-3b94-41f0-9483-ed0d2ce91ac1__id597a65c9-365f-4de1-9ad6-cd046fa3c731"><p class="p">For
functional coverage: Coverage thresholds (at_least values) are different
in separate merge input files. See <a class="xref fm:Example" href="#id8881ebba-3b94-41f0-9483-ed0d2ce91ac1__id2b2016fa-37a3-4846-a703-4dbd162f20f8">Example 1</a>.</p>
<p class="p">In these cases, it would be possible for
a bin to be covered after the merge, but in none of the inputs.
In this case, test-associated analysis will be correct with respect
to the individual tests, but incorrect regarding merged coverage;
ranking in particular will be inaccurate because of the discrepancy
in merged coverage. </p>
</li>
<li class="li" id="id8881ebba-3b94-41f0-9483-ed0d2ce91ac1__idaf153005-a544-4f8b-9afa-42048fb5115b"><p class="p">Weights
(for example, covergroup weights) are different in separate merge input
files. </p>
<p class="p">In these cases, because coverage (for example,
covergroup coverage) can depend on weighting, it will be impossible
to recreate the original coverage of some of the input files. During
the merge, the maximum weight is chosen; conflicting weights are
not preserved. </p>
</li>
<li class="li" id="id8881ebba-3b94-41f0-9483-ed0d2ce91ac1__id7570de48-ec62-4ee4-bf0c-32f611ed738a"><p class="p">Differing
sets of coverage objects in merge input files. </p>
<p class="p">This most commonly occurs due to parameterization.
See <a class="xref fm:Example" href="#id8881ebba-3b94-41f0-9483-ed0d2ce91ac1__id5f648815-3398-4424-8543-f3e5f2bfc598">Example 2</a>.</p>
</li>
</ul>
<p class="p">For these cases, your best option may be to
preserve the original UCDBs and analyze or rank them individually.</p>
<div class="note tip"><span class="tiptitle">Tip</span> <p class="p">In the case of different
sets of coverage objects in different merge input files — test ranking
is actually more accurate with the test-associated merge, because
ranking should reasonably be done with respect to the union of all
coverage. </p>
</div>
<div class="fig fignone ExampleTitle" id="id8881ebba-3b94-41f0-9483-ed0d2ce91ac1__id2b2016fa-37a3-4846-a703-4dbd162f20f8"><span class="figcap"><span class="fig--title-label">Example 1. </span>Coverage
Threshold Difference</span></div>
<p class="p">For example, suppose at_least == 3, and you
have two test cases each with counts of 2 in a cover directive.</p>
<p class="p">The following command results in 100% coverage:</p>
<p class="lines ApplCommand">coverage analyze -total -path /path/to/cover</p>
<p class="p">This is due to the fact that the merged result
is 2 + 2 = 4 &gt; 3.</p>
<p class="p">The following command results in 0% coverage,
as it should:</p>
<p class="lines ApplCommand">coverage analyze -total -path /path/to/cover -test test1</p>
<p class="p">However, the following command results in an
incorrect result of 0% coverage:</p>
<p class="lines ApplCommand">coverage analyze -total -path /path/to/cover -test test1 test2</p>
<p class="p">The result for “-test test1 test2” (generating
test-associated merge data) is not the same as without -test (a
totals merged data), because the test-associated database is missing
the covercount information that is contained in the totals database. </p>
<div class="fig fignone ExampleTitle" id="id8881ebba-3b94-41f0-9483-ed0d2ce91ac1__id5f648815-3398-4424-8543-f3e5f2bfc598"><span class="figcap"><span class="fig--title-label">Example 2. </span>Coverage
Object Differences with Parameters</span></div>
<p class="p">Here's a typical example of code which, when
merged with the “vcover merge -testassociated” merge, provokes verror
6846. It contains a parameterized array:</p>
<pre class="pre codeblock"><code>module top;
    parameter int size = 2;
    bottom #(size) inst();
endmodule
module bottom;
    parameter int size = 2;
    reg[size-1:0] tog;
    if (size==2) begin
        initial begin
            #1 tog[0] = 0;
            #1 tog[0] = 1;
            #1 tog[0] = 0;
        end
    end else begin
        initial begin
            #1 tog[1] = 0;
            #1 tog[1] = 1;
        end
    end
endmodule</code></pre><p class="p">Imagine you compile this for toggle coverage,
creating two different UCDB files with two different array sizes,
then merge them together, like so:</p>
<p class="lines ApplCommand">vlog +cover=t test.sv</p>
<p class="lines ApplCommand">vsim top -coverage -c -G/top/size=2 -do "run -all; coverage save test2.ucdb; quit"</p>
<p class="lines ApplCommand">vsim top -coverage -c -G/top/size=3 -do "run -all; coverage save test3.ucdb; quit"</p>
<p class="lines ApplCommand">vcover merge -testassociated test.ucdb test2.ucdb test3.ucdb</p>
<p class="p">This provokes warning 6846. What is the potential
problem? Look at the results of these two different summary reports,
the first issued during simulation on the active database, and the second
during post-processing on a saved UCDB:</p>
<pre class="pre codeblock"><code>&gt; vcover stats test2.ucdb

SUMMARY FOR FILE "test2.ucdb":
Coverage Summary BY INSTANCES: Number of Instances 2
    Enabled Coverage        Active      Hits   Percent
    ----------------        ------      ---- ---------
    Toggle Nodes                 2         1      50.0

&gt; vsim -viewcov test.ucdb -c -do "coverage analyze -test test2 -summary; quit"

# Hierarchical Summary Report For Design Instances
# Filtered by Tests: test2
# SUMMARY FOR SCOPE "/top":
# Coverage Summary BY INSTANCES: Number of Instances 2
#     Enabled Coverage        Active      Hits   Percent
#     ----------------        ------      ---- ---------
#     Toggle Nodes                 3         1     33.33</code></pre><p class="p">The difference between these two summary reports
is that the “test-associated” merge loses some data: in particular,
it loses knowledge of what coverage objects were in what file. The
knowledge of what was covered is accurate (in this case), namely
“tog[0]”, but as the merged result has three toggles, that is used
as the denominator of the coverage fraction.</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_ManageTestDataInUCDBs_id3082cd3f.html" title="Once you have run tests and collected coverage, the real task of analyzing the coverage can begin. Managing the coverage data which has been collected and stored in one or more UCDBs is critical to the task.">Manage Test Data in UCDBs</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../topics/TaskTop_RankingCoverageTestData_id98514434.html#id98514434-d288-4389-bed6-2888a6395b42__" title="Ranking seeks to order tests with respect to their contribution to the coverage metric, such as Total Coverage. The default ordering of the tests within the ranking report (.rank) is from most (top) to least (bottom). All tests which do not contribute to increased coverage numbers are not included in the ranked results.">Ranking Coverage Test Data</a></div>
<div><a class="link" href="../topics/Concept_MergeUsageScenarios_id4af63354.html#id4af63354-7935-4d1e-9f74-1840621a7d2f__" title="The decision on how to merge a set of UCDB files depends upon where and how the you store the data and databases being merged.">Merge Usage Scenarios</a></div>
<div><a class="link" href="../../questa_sim_vm/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Merging Verification Plan with Test Data', 'questa_sim_vm'); return false;">Merging Verification Plan with Test Data [Questa Verification Management User's Manual]</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "questa_sim_user"
                DocTitle = "Questa® SIM User's Manual"
                PageTitle = "Limitations of Merge for Coverage Analysis"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/General_LimitationsMergeCoverageAnalysis_id8881ebba.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® SIM User's Manual Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>