<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="onbreak" />
<meta name="abstract" content="Used in a DO file to specify one or more scripts to execute when the simulation encounters a breakpoint in the source code." />
<meta name="description" content="Used in a DO file to specify one or more scripts to execute when the simulation encounters a breakpoint in the source code." />
<meta name="prodname" content="Questa SIM Command Reference Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-07-02" />
<meta name="VariantPrefix" content="Q" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for Questa SV/AFV" />
<meta name="SourceHandle" content="questa_sim_ref" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.4" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® SIM Command Reference Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.030,doc.type.documentation.ref,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idb107fc59-fe5e-4775-be50-e3ede37bb2cf" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>onbreak</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="onbreak" />
<meta name="attributes" content="product.version.2020.4,sort.order.030,doc.type.documentation.ref,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="syn-arg" id="idb107fc59-fe5e-4775-be50-e3ede37bb2cf">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">onbreak</h1>
<div class="body refbody CommandRefBody-Var1"><div class="abstract CommandRefAbstract"><span class="shortdesc">Used in a DO file to specify one or more
scripts to execute when the simulation encounters a breakpoint in
the source code. </span>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Syntax</h2><div class="section UsageSet"><p class="lines UsageLine">onbreak <a class="xref fm:HeadingOnly" href="#idb107fc59-fe5e-4775-be50-e3ede37bb2cf__id127e8079-5a07-47ef-9e71-deef71c4ac4b">&lt;script&gt;</a>; <a class="xref fm:HeadingOnly" href="#idb107fc59-fe5e-4775-be50-e3ede37bb2cf__id127e8079-5a07-47ef-9e71-deef71c4ac4b">&lt;script&gt;</a>...</p>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">You must include a <a class="xref fm:HeadingOnly" href="Command_Run_id08533d64.html#id08533d64-2b24-44d7-be6f-8fd331a7be5d__Command_Run_id08533d64.xml#id08533d64-2b24-44d7-be6f-8fd331a7be5d" title="Advances the simulation by the specified number of timesteps.">run</a> or <a class="xref fm:HeadingOnly" href="Command_Step_id5d8a3c45.html#id5d8a3c45-6cce-48f3-973f-3a9eacccb1a1__Command_Step_id5d8a3c45.xml#id5d8a3c45-6cce-48f3-973f-3a9eacccb1a1" title="An alias for the run command with the -step switch. Steps the simulator to the next HDL or C statement, enabling you to observe current values of local HDL variables in the Locals window.">step</a> command
after any onbreak command in your DO file.</p>
<p class="p">An onbreak script affects any subsequent run
commands, until another onbreak command is issued. If a script executes
a DO file, the contents of the DO file inherit the calling script’s
onbreak setting, unless and until the DO file executes another onbreak
command. In that case, the new onbreak setting takes effect until
the DO file script completes. Execution then returns to the calling
script, restoring the calling script’s onbreak setting. (Refer to <a class="xref Link" href="../../questa_sim_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Breakpoint Flow Control in Nested DO files', 'questa_sim_user'); return false;">Breakpoint Flow Control in Nested DO files</a> in
the User’s Manual for more information.)</p>
<p class="p">The
OnBreakDefaultAction Tcl variable defines the default behavior when
there is no onbreak setting in effect. If the OnBreakDefaultAction variable
is not defined, the simulator default is to resume execution. </p>
<p class="p">You
can use an empty string to change the onbreak command back to the
default behavior:</p>
<p class="lines ApplCommand">onbreak ""</p>
<p class="p">In
this case, the script resumes after a breakpoint occurs (after any
associated <a class="xref fm:HeadingOnly" href="Command_Bp_id33cf571d.html#id33cf571d-2e20-46b3-b79a-e5d7ba643c00__Command_Bp_id33cf571d.xml#id33cf571d-2e20-46b3-b79a-e5d7ba643c00" title="Either sets a file-line breakpoint, or returns information about breakpoint(s). Allows condition expressions to use enum names, as well as literal values.">bp</a> command
string is executed).</p>
<p class="p">If
you do not specify an argument to the onbreak command, it returns
either the definition of any scripts defined by previous onbreak
commands, or nothing, if you have not previously defined any onbreak
commands.</p>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet" id="idb107fc59-fe5e-4775-be50-e3ede37bb2cf__id7cc0d4fc-33ef-428f-a3d0-1e84ecaba75d"><dl class="dl ArgumentList"><dt class="dt ArgumentName dlterm" id="idb107fc59-fe5e-4775-be50-e3ede37bb2cf__id127e8079-5a07-47ef-9e71-deef71c4ac4b">&lt;script&gt;</dt>
<dd class="dd ArgumentDescription"><p class="p">(optional) Any command or script can be used
as an argument to onbreak. To use more than one command or script,
separate them by semicolons, or place them on multiple lines and
enclose the entire script in braces ({}) or quotation marks (“ ”).
If a run or step command is issued within an onbreak script, the
script returns immediately, and without executing any of the following
commands. It is an error to execute any commands following a run
command within an onbreak command string. This restriction applies
to any macros or Tcl procedures used in the onbreak command string.</p>
</dd>
</dl>
</div>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><ul class="ul"><li class="li" id="idb107fc59-fe5e-4775-be50-e3ede37bb2cf__id6ccf3b09-3687-4079-a9fc-bd48e5cde9ec"><p class="p">Examine
the value of the HDL object data when a breakpoint is encountered.
Then continue the run command.</p>
<p class="lines ApplCommand">onbreak {exa data ; cont}</p>
</li>
<li class="li" id="idb107fc59-fe5e-4775-be50-e3ede37bb2cf__id88327ad1-1a5e-4718-b166-c50ae101e57e"><p class="p">Resume execution
of the DO file on encountering a breakpoint.</p>
<p class="lines ApplCommand">onbreak resume</p>
</li>
<li class="li" id="idb107fc59-fe5e-4775-be50-e3ede37bb2cf__id722f4595-72c6-432c-ad1a-59c2cecbf997"><p class="p">This set of commands test for assertions.
Assertions are treated as breakpoints if the severity level is greater
than or equal to the current BreakOnAssertion variable setting (refer
to <a class="xref Link" href="../../questa_sim_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'modelsimini Variables', 'questa_sim_user'); return false;">modelsim.ini Variables</a> in the User’s
Manual). By default, a severity level of failure or above causes
a breakpoint; a severity level of error or below does not.</p>
<pre class="pre codeblock leveled"><code>set broken 0
onbreak {
  lassign [runStatus -full] status fullstat
  if {$status eq "error"} {
    # Unexpected error, report info and force an error exit
    echo "Error: $fullstat"
    set broken 1
    resume
  } elseif {$status eq "break"} {
    # If this is a user break, then
    # issue a prompt to give interactive 
    # control to the user
    if {[string match "user_*" $fullstat]} {
      pause
    } else {
      # Assertion or other break condition
      set broken 2
      resume
    }
  } else {
    resume
  }
}
run -all
if {$broken == 1} {
  # Unexpected condition.  Exit with bad status.
  echo "failure"
  quit -force -code 3
} elseif {$broken == 2} {
  # Assertion or other break condition
  echo "error"
  quit -force -code 1
} else {
  echo "success!"
}
quit -force</code></pre></li>
</ul>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_CommandsNZ_id3dbfc077e.html" title="This chapter describes Questa SIM commands, listed alphabetically from N through Z, that you can enter either on the command line of the Main window or in a DO file.">Commands (N - Z)</a></div>
</div>

<div class="linklist linklist relinfo"><strong>Related Topics</strong><br />

<div><a class="link" href="../topics/Command_Do_id21ffa5b2.html#id21ffa5b2-d495-4f6a-9a36-1f533c4c356d__" title="Executes the commands contained in a DO file.">do</a></div>
<div><a class="link" href="../topics/Command_Onerror_idff1f7ef8.html#idff1f7ef8-9168-4249-8991-1393201f9a18__" title="Used in a DO file before a run command, specifies one or more commands to execute when a running script encounters an error.">onerror</a></div>
<div><a class="link" href="../../questa_sim_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'Useful Commands for Handling Breakpoints and Errors', 'questa_sim_user'); return false;">Useful Commands for Handling Breakpoints and Errors [Questa SIM User's Manual]</a></div>
<div><a class="link" href="../../questa_sim_user/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'DO Files', 'questa_sim_user'); return false;">DO Files [Questa SIM User's Manual]</a></div></div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "questa_sim_ref"
                DocTitle = "Questa® SIM Command Reference Manual"
                PageTitle = "onbreak"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_Onbreak_idb107fc59.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® SIM Command Reference Manual, v2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>