<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Power Management Architecture" />
<meta name="abstract" content="In order to employ active power management techniques such as power gating and multiple voltage supplies, the design must be partitioned into separate functional areas that can be independently powered. Additional logic must be inserted into the design to perform special functions such as power switching, state retention, isolation, and level shifting. These additional components constitute the power management architecture for a given system." />
<meta name="description" content="In order to employ active power management techniques such as power gating and multiple voltage supplies, the design must be partitioned into separate functional areas that can be independently powered. Additional logic must be inserted into the design to perform special functions such as power switching, state retention, isolation, and level shifting. These additional components constitute the power management architecture for a given system." />
<meta name="prodname" content="Power Aware Simulation User's Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-07-10" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="pa_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Power Aware Simulation User's Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.050,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id77e367dd-0cf3-4d1f-8574-4080fe0d21d0" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Power Management Architecture</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Power Management Architecture" />
<meta name="attributes" content="product.version.2020.4,sort.order.050,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id77e367dd-0cf3-4d1f-8574-4080fe0d21d0">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Power Management Architecture</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">In order to
employ active power management techniques such as power gating and
multiple voltage supplies, the design must be partitioned into separate
functional areas that can be independently powered. Additional logic
must be inserted into the design to perform special functions such
as power switching, state retention, isolation, and level shifting.
These additional components constitute the power management architecture
for a given system. </span>
</div>
<div class="section Subsections"><div class="section Subsection" id="id77e367dd-0cf3-4d1f-8574-4080fe0d21d0__idf5b525d7-b27d-4857-8b1f-91634bd0c956"><h2 class="title Subheading sectiontitle">Operating Modes</h2><p class="p">Designing the power management architecture
for a given system starts with characterization of the functions
and operating modes of the system. Since the goal of active power
management is to optimize the use of power based on the function
and performance required of the system at any given time, the first
step involves identifying the distinct combinations of functionality
and performance that is required of the device in use. Analysis
of the set of distinct operating modes enables the designer to determine
how to partition the design into independently powered subsystems
or subcomponents, so that any given operating mode can be supported
by providing the necessary subset of system components with the
appropriate power.</p>
<p class="p">For example, <a class="xref fm:Figure" href="#id77e367dd-0cf3-4d1f-8574-4080fe0d21d0__id586800f2-0dbb-43aa-90a4-cd4db82c66e1">Figure 1</a> shows a block diagram of a design that
has two operating modes: ON and SLEEP. </p>
<div class="fig fignone" id="id77e367dd-0cf3-4d1f-8574-4080fe0d21d0__id586800f2-0dbb-43aa-90a4-cd4db82c66e1"><span class="figcap"><span class="fig--title-label">Figure 1. </span>A Power-Managed Design</span><br /><div class="imageleft"><img class="image imageleft fmdpi:100" src="../graphics/PowerManagedDesign.gif" /></div><br /></div>
<p class="p">In the ON mode, it reads input data streams,
interleaves them, and stores them in the memory before driving them
onto outputs. In the SLEEP mode, it monitors inputs and maintains
the state of its memory, but it does not process inputs.</p>
<h2 class="title Subheading sectiontitle">Power Domains</h2><p class="p">Each independently powered subsystem or subcomponent
is called a power domain. At the RTL stage, a power domain is typically
somewhat abstract, consisting of some or all of the RTL logic within
a given portion of the design hierarchy. At the logical netlist
stage, a power domain consists of a collection of cells that shares
the same primary power and ground supplies. At the physical level,
the cells associated with a given power domain may be placed in
a contiguous region of a chip or distributed over multiple discontiguous
regions of the chip. </p>
<p class="p">The design in <a class="xref fm:Figure" href="#id77e367dd-0cf3-4d1f-8574-4080fe0d21d0__id586800f2-0dbb-43aa-90a4-cd4db82c66e1">Figure 1</a> has several major components. These
include the interleaver block, the memory controller block, and
the memory itself. Each of these can be defined as a separate power
domain. The top-level of the design is also a separate power domain.
The dotted lines in <a class="xref fm:Figure" href="#id77e367dd-0cf3-4d1f-8574-4080fe0d21d0__id586800f2-0dbb-43aa-90a4-cd4db82c66e1">Figure 1</a> indicate power domain boundaries. The
following UPF commands is used to define these power domains:</p>
<pre class="pre codeblock leveled"><code>#-------------------------------------------------- 
# Create power domains 
#-------------------------------------------------- 
create_power_domain PD_top  
create_power_domain PD_interleaver -elements {i0} 
create_power_domain PD_mem_ctrl -elements {mc0} 
create_power_domain PD_sram -elements {m1 m2 m3 m4} </code></pre><p class="p">The –elements argument on each of these commands
lists the instance names of the elements to be included in the specified
power domain.</p>
<h2 class="title Subheading sectiontitle">Power Distribution</h2><p class="p">Each power domain may have one or more power
supplies. The primary supply provides power for most of the functional
elements in that domain. Additional supplies may provide power for retention,
isolation, or level shifting cells associated with the power domain. </p>
<p class="p">The primary supply may be a switched supply,
which can be turned on and off via a control input to the switch.
Either the VDD or VSS supply may be switched. A supply may be driven
by multiple switches connected to the same voltage source. The switches
are turned on incrementally, to minimize rush currents when the
supply is switched on. A supply may also be driven by multiple switches
connected to different voltage sources, so that the supply voltage level
delivered to elements of the power domain may be varied. Switches
may be on-chip or off-chip.</p>
<p class="p">Power is distributed to power domains via supply
ports interconnected by supply nets. Supply ports may represent
external supplies or may be driven by internal supply sources. Supply
ports are connected to supply nets, each of which is ultimately
connected to a power domain. Each supply port has one or more supply
states defined. The port may drive only one state at any given time.
That state is propagated by the supply net connected to the port. </p>
<p class="p">For the example in <a class="xref fm:Figure" href="#id77e367dd-0cf3-4d1f-8574-4080fe0d21d0__id586800f2-0dbb-43aa-90a4-cd4db82c66e1">Figure 1</a>, the following UPF commands could be
used to define top-level supply ports, and to define and connect
supply nets to those ports:</p>
<pre class="pre codeblock leveled"><code>#---------------------------------------------- 
# Create top level power domain supply ports 
#---------------------------------------------- 
create_supply_port VDD_0d99 -domain PD_top 
create_supply_port VDD_0d81 -domain PD_top 
create_supply_port VSS -domain PD_top 
 
#---------------------------------------------- 
# Create top level power domain supply nets 
#---------------------------------------------- 
create_supply_net VDD_0d99 -domain PD_top 
create_supply_net VDD_0d81 -domain PD_top 
create_supply_net VSS -domain PD_top 
 
#---------------------------------------------- 
# Connect top level power domain supply ports  
# to supply nets 
#---------------------------------------------- 
connect_supply_net VDD_0d99 -ports VDD_0d99 
connect_supply_net VDD_0d81 -ports VDD_0d81 
connect_supply_net VSS -ports VSS 
 
The following UPF command would be used to identify a particular pair of supply nets as the primary power and ground supplies for a given power domain: 
 
#---------------------------------------------- 
# Set the default for top level power domain 
#---------------------------------------------- 
set_domain_supply_net PD_top \ 
   -primary_power_net VDD_0d99 \ 
   -primary_ground_net VSS 
 
Additional UPF commands could be used to propagate the top-level supply nets into subordinate power domains and to define a power switch to create a switched ground (VSS_SW) for one of the power domains: 
 
#---------------------------------------------- 
# Create sub domain supply nets 
#---------------------------------------------- 
create_supply_net VDD_0d81 -domain PD_interleaver -reuse 
create_supply_net VDD_0d81 -domain PD_mem_ctrl -reuse 
create_supply_net VDD_0d99 -domain PD_sram -reuse 
 
create_supply_net VSS -domain PD_interleaver -reuse 
create_supply_net VSS -domain PD_mem_ctrl -reuse 
create_supply_net VSS -domain PD_sram -reuse 
 
#---------------------------------------------------- 
# Create supply net for switch output 
#---------------------------------------------------- 
create_supply_net VSS_SW -domain PD_mem_ctrl 
 
#---------------------------------------------------- 
# Create power switch for memory controller domain 
# - switch on ground side of supply network 
#---------------------------------------------------- 
create_power_switch mem_ctrl_sw \ 
    -domain PD_mem_ctrl \ 
    -output_supply_port {vout_p VSS_SW} \ 
    -input_supply_port {vin_p VSS} \ 
    -control_port {ctrl_p mc_pwr_c} \ 
    -on_state {normal_working vin_p {ctrl_p}} \ 
    -off_state {off_state {!ctrl_p}} </code></pre><p class="p">Power distribution logic may also include on-chip
analog components such as regulators and sensors. A regulator takes
an input supply voltage and generates a specific output voltage.
A sensor monitors a supply rail and signals when the voltage has
stabilized at its nominal value with respect to ground. Sensors
enable construction of a feedback loop so that power control logic
can determine when a power rail has completed transitioning. Analog
components such as these are not specifiable in UPF, but can be
modeled in HDL code using UPF package functions to model the ramp-up
and ramp-down of power supplies as they switch on and off.</p>
<h2 class="title Subheading sectiontitle">Power States</h2><p class="p">UPF provides commands for defining a power
state table that captures the possible power states of the system.
The power state table defines system power states in terms of the
states of supply ports or nets. </p>
<p class="p">For the example in <a class="xref fm:Figure" href="#id77e367dd-0cf3-4d1f-8574-4080fe0d21d0__id586800f2-0dbb-43aa-90a4-cd4db82c66e1">Figure 1</a>, the following UPF commands define
the possible states of the supply ports VDD_0d81, VDD_0d99, and
VSS, as well as the switched ground supply VSS_SW:</p>
<pre class="pre codeblock leveled"><code>#---------------------------------------------------- 
# Define power states 
#---------------------------------------------------- 
add_port_state VDD_0d99 -state {ON  0.99 1.10 1.21} 
add_port_state VDD_0d99 –state {OFF off} 
 
add_port_state VDD_0d81 -state {ON  0.81 0.90 0.99} 
add_port_state VDD_0d81 –state {OFF off} 
 
add_port_state VSS 	    -state {ON  0 0 0} 
add_port_state VSS_SW   -state {ON 0} -state {OFF off} 
 
#---------------------------------------------------- 
# Create power state table  
#---------------------------------------------------- 
create_pst top_pst \ 
             –supplies { VDD_0d99  VDD_0d81  VSS  VSS_SW } 
 
add_pst_state ON \ 
   -pst top_pst -state {    ON        ON     ON     ON   } 
add_pst_state SLEEP \ 
   –pst top_pst -state {    ON        ON     ON     OFF  } 
add_pst_state OFF \ 
   -pst top_pst -state {    OFF       OFF    ON     OFF  } </code></pre><p class="p">The power states of the system in <a class="xref fm:Figure" href="#id77e367dd-0cf3-4d1f-8574-4080fe0d21d0__id586800f2-0dbb-43aa-90a4-cd4db82c66e1">Figure 1</a> are defined in the above power state
table. Note that these power states are the same as the operating
modes of the system, plus the state in which the system is completely
turned off.</p>
<h2 class="title Subheading sectiontitle">Isolation and Level
Shifting</h2><p class="p">Even though each power domain may be independently
powered on and off, their logical and physical connections to other
power domains remain; therefore, when one domain is turned off, it
is still connected logically and electrically to other domains.
These connections between power domains require special cells to
mediate the interaction between domains as their respective power
states change. Two kinds of cells are involved: isolation cells,
and level shifting cells.</p>
<p class="p">Isolation cells ensure that signals coming
from unpowered domains are clamped to a well-defined logic value
while the source domain is powered down, so that any sink domain
that is powered up sees reliable inputs. Depending upon the architecture
of the design, and the particular characteristics of a signal that
crosses from one power domain to another (for example, how many
power domains it fans out to, and when those power domains are on
or off with respect to the source domain), it may be appropriate
to insert isolation cells at either the source of the signal or
at its sink(s). However, since the isolation cell must be powered
on when the source domain is powered off, isolation cells are typically
powered by a separate, “always-on” supply voltage.</p>
<p class="p">The following UPF commands specify the addition
of isolation for the PD_mem_ctrl power domain in the example in <a class="xref fm:Figure" href="#id77e367dd-0cf3-4d1f-8574-4080fe0d21d0__id586800f2-0dbb-43aa-90a4-cd4db82c66e1">Figure 1</a>. The first command defines the supplies
powering the isolation cell and specifies its clamp value. The second
command defines the control signal for the isolation cell.</p>
<pre class="pre codeblock leveled"><code>#------------------------------------------------- 
# Setup isolation strategy for memory controller 
#------------------------------------------------- 
 
# Mem ctrl chip &amp; write enables: clamp to '1' 
 
set_isolation mem_ctrl_iso_1 \ 
    -domain PD_mem_ctrl \ 
    -isolation_power_net VDD_0d99 \ 
    -isolation_ground_net VSS \ 
    -clamp_value 1 \ 
    -elements {mc0/ceb mc0/web} 
 
set_isolation_control mem_ctrl_iso_1 \ 
    -domain PD_mem_ctrl \ 
    -isolation_signal mc_iso_c \ 
    -isolation_sense high \ 
    -location parent </code></pre><p class="p">Level shifting cells ensure that a signal coming
from a power domain operating at one voltage is correctly interpreted
when it is received by a power domain operating at a different voltage. Depending
upon the relative voltage levels of the two power domains, a level
shifter may increase or decrease the operating voltage of the signal.
As with isolation cells, level shifters may have separate power
supplies that are always on, or they may be powered by the primary supplies
of the source and sink domains, respectively.</p>
<pre class="pre codeblock leveled"><code>#------------------------------------------------- 
# Define level shifters 
#------------------------------------------------- 
 
set_level_shifter interleaver_ls_in \ 
    -domain PD_interleaver \ 
    -applies_to inputs \ 
    -location self 
 
set_level_shifter interleaver_ls_out \ 
    -domain PD_interleaver \ 
    -applies_to outputs \ 
    -location parent </code></pre><p class="p">The UPF commands above specify addition of
level shifters for the PD_interleaver power domain in the example
in <a class="xref fm:Figure" href="#id77e367dd-0cf3-4d1f-8574-4080fe0d21d0__id586800f2-0dbb-43aa-90a4-cd4db82c66e1">Figure 1</a>. The first command specifies addition
of level shifters for inputs; the second command specifies addition
of level shifters for outputs. Whether level shifters are actually
inserted or not depends upon the respective supply voltages of the
source and sink domains involved.</p>
<h2 class="title Subheading sectiontitle">State Retention</h2><p class="p">When a power domain is powered down, any normal
state elements within the power domain loses their state. When the
power domain is powered on again, the power domain must be brought
to a predictable state again. This may involve resetting all state
elements in the domain, or resetting some subset that is sufficient
to cause the rest of the domain to reach a well-defined state after
a few clock cycles. Another alternative is to save the state of
certain state elements before the domain is powered down, and restore
those statements to their saved state after the power domain is
powered up again.</p>
<p class="p">Retention cells are special memory elements
that preserve their data during powerdown. Such cells involve extra
logic and possibly complex timing to save and restore their values
across powered-down periods [<a class="xref fm:NumberOnly" href="Concept_Summary_ide7569744.html#ide7569744-55ef-4907-b194-ba93721d5aaa__id4fc4455b-a652-4c2e-8db9-99f3eb8c9ea7">2</a>]. Various kinds of retention cells
have been designed [<a class="xref fm:NumberOnly" href="Concept_Summary_ide7569744.html#ide7569744-55ef-4907-b194-ba93721d5aaa__id4fc4455b-a652-4c2e-8db9-99f3eb8c9ea7">2</a>], [<a class="xref fm:NumberOnly" href="Concept_Summary_ide7569744.html#ide7569744-55ef-4907-b194-ba93721d5aaa__idbb078d83-9ce7-4672-b4ee-9ce81e66a6ff">3</a>], [<a class="xref fm:NumberOnly" href="Concept_Summary_ide7569744.html#ide7569744-55ef-4907-b194-ba93721d5aaa__idc33dde9b-f2d1-481c-8e05-d8db6ea5c193">4</a>]. Some of these use balloon latch
mechanisms [<a class="xref fm:NumberOnly" href="Concept_Summary_ide7569744.html#ide7569744-55ef-4907-b194-ba93721d5aaa__id4fc4455b-a652-4c2e-8db9-99f3eb8c9ea7">2</a>], which are made up of high threshold transistors
to minimize leakage through them. They are separated from the critical
path of the design by transmission gates and thus are not required
to be timing critical. Others depend on complex sequences of different
controls to achieve data retention.</p>
<p class="p">The following UPF command specifies where retention
should occur in the example in <a class="xref fm:Figure" href="#id77e367dd-0cf3-4d1f-8574-4080fe0d21d0__id586800f2-0dbb-43aa-90a4-cd4db82c66e1">Figure 1</a>.</p>
<pre class="pre codeblock leveled"><code>#------------------------------------------- 
# Setup retention strategy for mem cntrl  
#------------------------------------------- 
set_retention mem_ctrl_ret \ 
    -domain PD_mem_ctrl \ 
    -retention_power_net VDD_0d81 \ 
    -save_signal {mc_save_c high} \ 
    -restore_signal {mc_restore_c low} </code></pre><p class="p">This command identifies the power domain (PD_mem_ctrl)
within which retention registers should be used, specifies the power
supply used to maintain retained values, and specifies the control
signals required for saving and restoring the values of retention
registers.</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_PowerAwareVerificationArmBasedDesigns_id0ccd1779.html" title="This section contains an application note written by Ping Yeung and Erich Marschner of Mentor Graphics Corporation.">Power Aware Verification of ARM-Based Designs</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "pa_user"
                DocTitle = "Power Aware Simulation User's Manual"
                PageTitle = "Power Management Architecture"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_PowerManagementArchitecture_id77e367dd.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Power Aware Simulation User's Manual Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>