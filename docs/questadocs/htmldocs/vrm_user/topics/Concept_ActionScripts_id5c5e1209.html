<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Action Scripts" />
<meta name="abstract" content="In order for the tests to run as is under VRM, a “cd” command (to the directory stored in RUNCWD for that test) is added to each Action script in order to run each simulation in the directory in which it was initially launched. In order to prevent file collisions between concurrent simulations, the sequential flag on the all Group is set to “yes”, meaning VRM will run each simulation one-by-one rather than concurrently." />
<meta name="description" content="In order for the tests to run as is under VRM, a “cd” command (to the directory stored in RUNCWD for that test) is added to each Action script in order to run each simulation in the directory in which it was initially launched. In order to prevent file collisions between concurrent simulations, the sequential flag on the all Group is set to “yes”, meaning VRM will run each simulation one-by-one rather than concurrently." />
<meta name="prodname" content="Verification Run Manager User Guide" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-07-10" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="vrm_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® Verification Run Manager User Guide" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id5c5e1209-be2d-4933-a9c9-2289ad0743ca" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Action Scripts</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Action Scripts" />
<meta name="attributes" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id5c5e1209-be2d-4933-a9c9-2289ad0743ca">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Action Scripts</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">In order for
the tests to run as is under VRM, a “cd” command (to the directory
stored in <span class="ph filepath">RUNCWD</span> for that test) is added to each
Action script in order to run each simulation in the directory in
which it was initially launched. In order to prevent file collisions
between concurrent simulations, the sequential flag on the <span class="ph FontProperty emphasis">all</span> Group
is set to “yes”, meaning VRM will run each simulation one-by-one
rather than concurrently.</span>
</div>
<p class="p">In order to enable concurrency,
the following steps should be taken depending on if the simulations
are run in the same directory or in separate working directories.</p>
<p class="p">Same Directory:</p>
<p class="p">If the simulations are to be run in the same
directory, the user’s script must be changed to give explicit non-overlapping
names to the various files generated by the simulation (such as WLF
files, UCDB files, transcript or log files, and so on). Then the <span class="ph FontProperty emphasis">sequential=</span>"<span class="ph FontProperty emphasis">yes</span>"
attribute can be removed from the "<span class="ph FontProperty emphasis">all</span>" <span class="ph FontProperty emphasis">runnable</span> element
to enable concurrent execution of all the tests.</p>
<p class="p">Separate Working Directories:</p>
<p class="p">If the simulations are to be run in separate
working directories, the “cd” command must be removed and the relative
file paths in the generated vsim command must be changed to allow the
simulation to locate the necessary files. The path to the original
working directory is saved in the RMDB database file as the parameter <span class="ph FontProperty emphasis">runcwd</span> for convenience.
All relative file names used on the vsim command or in any <span class="ph filepath">do</span> script
should be prefaced with a parameter reference to either <span class="ph filepath">VRUNDIR</span> (that
is, the directory from which vrun was launched) or <span class="ph filepath">RUNCWD</span> (the
directory in which the test was originally launched). In addition,
a -lib option should be added to the vsim command line to locate
the work library.</p>
<p class="p">For example, if the following <span class="ph FontProperty emphasis">execScript</span> Action
script is auto-generated:</p>
<pre class="pre codeblock leveled"><code>&lt;execScript&gt;
	&lt;command&gt;cd (%runcwd%)&lt;/command&gt;
	&lt;command&gt;vsim -do {set test test2; do runtest.do} -c -sv_seed 2 
		-vopt top&lt;/command&gt;
&lt;/execScript&gt;
</code></pre><p class="p">The modified script should look something like
the following:</p>
<pre class="pre codeblock leveled"><code>&lt;execScript&gt;
	&lt;command&gt;vsim -lib (%runcwd%)/work -do {set test test2; do 
		(%runcwd%)/runtest.do} -c -sv_seed 2 -vopt top&lt;/command&gt;
&lt;/execScript&gt;
</code></pre><p class="p">This command points to the common work library
in the original simulation directory and to the <span class="ph filepath">do</span> script
in that same directory. Because the simulation runs in its own working
directory under the scratch directory tree, the “cd” command is
no longer needed. Any result checking or coverage merging scripts
may have to be modified to look for the WLF/UCDB files generated
by the simulation in their new location (under the <span class="ph filepath">VRM Data</span> directory
tree). Finally, the <span class="ph FontProperty emphasis">sequential=</span>"<span class="ph FontProperty emphasis">yes</span>"
attribute can be removed from the "<span class="ph FontProperty emphasis">all</span>" <span class="ph FontProperty emphasis">runnable</span> element
to enable concurrent execution of all the tests.</p>
<p class="p">If the vsim command calls out a “do <span class="keyword ParameterName OptionalReplaceable">_dofile_</span>” command
in its do command-line option, the contents of the <span class="ph filepath">dofile</span> may also
have to be modified to account for the difference in directories
when the <span class="ph filepath">dofile</span> itself is executed. It may,
in fact, be easier to copy the commands from the <span class="ph filepath">dofile</span> directly
into the <span class="ph FontProperty emphasis">execScript</span> element
where they can also make use of parameter references.</p>
<p class="p">If there were other TCL commands executed prior
to or following the vsim command when the simulation was initially
launched (as might be the case if the original vsim command had
been part of a larger script), the other commands would not have
been recorded in the resulting UCDB file. In this case, it may be
necessary to add these additional commands to the <span class="ph FontProperty emphasis">execScript</span> element
either before or after the auto-generated vsim command.</p>
<p class="p">No attempt is made to parameterize the <span class="ph FontProperty emphasis">execScript</span> commands.
Common paths, options, settings, and other command elements may
be pulled out into parameters and these parameters may be moved
to the <span class="ph FontProperty emphasis">all</span> Group
Runnable if all the Tasks share the same value for a given parameter.
The auto-generated database is intended for demonstration and bootstrap purposes
and it is expected that the file would undergo significant change
on its way to becoming a complete regression suite.</p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_CreateRmdbFileFromExistingUcdbFile_id01766409.html" title="The following is not a VRM function but can be useful for users just starting out with VRM. A VRM database can be generated from one or more existing UCDB, Merge, or Rank files. This database generation function is only available from the Questa GUI.">Create RMDB File from Existing UCDB File</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "vrm_user"
                DocTitle = "Questa® Verification Run Manager User Guide"
                PageTitle = "Action Scripts"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_ActionScripts_id5c5e1209.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® Verification Run Manager User Guide Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>