<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Running Scripts in Existing Directory Structure" />
<meta name="abstract" content="In some cases, there can already be an existing directory structure within which existing user scripts are executed, assuming they can find various HDL source and setup files at fixed locations within said directory structure. In order for these sort of scripts to run as is under VRM, executing from a specific directory within the test directory tree, a cd command (pointing to the directory in which the script is to be run) can be added to each Action script. This causes the script to run subsequent commands (that is, those following the cd command itself) in the directory in which the script is launched without VRM. In order to prevent file collisions between concurrent simulations, the sequential flag on any Group Runnables accessing the fixed directory structure should be set to “yes”, meaning VRM runs each Action script one-by-one rather than concurrently." />
<meta name="description" content="In some cases, there can already be an existing directory structure within which existing user scripts are executed, assuming they can find various HDL source and setup files at fixed locations within said directory structure. In order for these sort of scripts to run as is under VRM, executing from a specific directory within the test directory tree, a cd command (pointing to the directory in which the script is to be run) can be added to each Action script. This causes the script to run subsequent commands (that is, those following the cd command itself) in the directory in which the script is launched without VRM. In order to prevent file collisions between concurrent simulations, the sequential flag on any Group Runnables accessing the fixed directory structure should be set to “yes”, meaning VRM runs each Action script one-by-one rather than concurrently." />
<meta name="prodname" content="Verification Run Manager User Guide" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-07-10" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="vrm_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® Verification Run Manager User Guide" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id6e5a22d3-305e-46d5-9fda-d6847d4b5128" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Running Scripts in Existing Directory Structure</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Running Scripts in Existing Directory Structure" />
<meta name="attributes" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id6e5a22d3-305e-46d5-9fda-d6847d4b5128">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Running Scripts in Existing Directory Structure</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">In some cases,
there can already be an existing directory structure within which
existing user scripts are executed, assuming they can find various
HDL source and setup files at fixed locations within said directory
structure. In order for these sort of scripts to run as is under
VRM, executing from a specific directory within the test directory
tree, a cd command (pointing to the directory in which the script
is to be run) can be added to each Action script. This causes the
script to run subsequent commands (that is, those following the
cd command itself) in the directory in which the script is launched
without VRM. In order to prevent file collisions between concurrent
simulations, the sequential flag on any Group Runnables accessing
the fixed directory structure should be set to “yes”, meaning VRM
runs each Action script one-by-one rather than concurrently.</span>
</div>
<p class="p">In order to enable concurrency,
the following steps should be taken:</p>
<ul class="ul"><li class="li" id="id6e5a22d3-305e-46d5-9fda-d6847d4b5128__id25cc7362-9906-4639-80b9-3cb4da96fde8"><p class="p">If multiple simulations are to be run
in the same directory at the same time, then the user script(s)
may need to be modified to give explicit non-overlapping names to
the various files generated by each simulation (such as WLF files, UCDB
files, transcript files, or log files, and so on).</p>
</li>
<li class="li" id="id6e5a22d3-305e-46d5-9fda-d6847d4b5128__id7c1031a1-af94-4c7c-b766-6cf2de13615a"><p class="p">If the simulations are to be run in separate
working directories, then the cd command should be removed and the
relative file paths in the Action script(s) should be changed to
allow the tools invoked to locate the necessary input files.</p>
</li>
</ul>
<p class="p">For example, assume the path to the original
(pre-VRM) working directory is saved in the RMDB database file as
the parameter runcwd for convenience. All relative file names used
in the vsim command or in any <span class="ph filepath">do</span> script should
be prefaced with a parameter reference to either <span class="ph filepath">VRUNDIR</span> (directory
from which vrun was launched) or runcwd (directory in which the
test would have been launched prior to VRM). In addition, a -lib
option should be added to the vsim command line to locate the work library.</p>
<p class="p">For example, if the following <span class="ph FontProperty emphasis">execScript</span> Action
script is auto-generated:</p>
<pre class="pre codeblock leveled"><code>&lt;execScript&gt;
	&lt;command&gt;cd (%runcwd%)&lt;/command&gt;
	&lt;command&gt;vsim -do {set test test2; do runtest.do} -c -sv_seed 2 -vopt 
		 top&lt;/command&gt;
&lt;/execScript&gt;</code></pre><p class="p">The modified script might look something like
the following:</p>
<pre class="pre codeblock leveled"><code>&lt;execScript&gt;
	&lt;command&gt;vsim -lib (%runcwd%)/work -do {set test test2; do 
		 (%runcwd%)/runtest.do} -c -sv_seed 2 -vopt top&lt;/command&gt;
&lt;/execScript&gt;</code></pre><p class="p">This command points to the common work library
in the original simulation directory and to the <span class="ph filepath">do</span> script
in that same directory. Because the simulation runs in its own working
directory under the <span class="ph filepath">VRMDATA</span> directory tree,
the cd command is no longer needed. Any result checking or coverage
merging scripts might need to be modified to look for the WLF/UCDB
files generated by the simulation in their new location (under the <span class="ph filepath">VRMDATA</span> directory
tree). Finally, the value of the <span class="ph FontProperty emphasis">sequential</span> attribute
on the top-level Runnable may be changed to “no” to enable concurrent
execution of all the tests.</p>
<p class="p">If the vsim command calls out a do _dofile_
command in its do command-line option, the contents of the <span class="ph filepath">dofile</span> may
also have to be modified to account for the difference in directories
when the <span class="ph filepath">dofile</span> itself is executed. It might
be easier to copy the commands from the <span class="ph filepath">dofile</span> directly
into the <span class="ph FontProperty emphasis">execScript</span> element
where they can also make use of parameter references or to use a <span class="ph FontProperty emphasis">localfile</span> element
to generate the <span class="ph filepath">dofile</span> in the working directory.</p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_UsingExistingScriptsVrm_id96d7671b.html" title="The Action scripts (preScript, execScript, and postScript) are parsed for parameter expansion and copied to the working directory. This includes scripts defined in the RMDB database and scripts pointed to by the file attribute of the script element. If pre-existing (user-defined) scripts are to be used to drive the behavior of the regression, then there are the following three ways in which the parameterizable information can be passed:">Using Existing Scripts with VRM</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "vrm_user"
                DocTitle = "Questa® Verification Run Manager User Guide"
                PageTitle = "Running Scripts in Existing Directory Structure"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_RunningScriptsInExistingDirectoryStructure_id6e5a22d3.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® Verification Run Manager User Guide Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>