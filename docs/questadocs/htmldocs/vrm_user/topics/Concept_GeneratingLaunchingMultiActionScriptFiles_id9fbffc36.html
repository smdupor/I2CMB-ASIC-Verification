<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Generating and Launching Multi-Action Script Files" />
<meta name="abstract" content="If an integer maxarray or maxclubbing value is associated with a named queue when it comes time to launch one or more Actions, a multi-Action job control script is created and launched via the execution method command. This script contains a list of per-Action launch commands, each of which matches the command normally stored in the execution method .bat file for that Action (that is, the command that was launched under single-action mode). The script executes the commands in this list sequentially and each command generates the start and done messages used by the controlling vrun instance to monitor and track the status of each Action. No messages are sent from the multi-Action job control script to the controlling vrun instance." />
<meta name="description" content="If an integer maxarray or maxclubbing value is associated with a named queue when it comes time to launch one or more Actions, a multi-Action job control script is created and launched via the execution method command. This script contains a list of per-Action launch commands, each of which matches the command normally stored in the execution method .bat file for that Action (that is, the command that was launched under single-action mode). The script executes the commands in this list sequentially and each command generates the start and done messages used by the controlling vrun instance to monitor and track the status of each Action. No messages are sent from the multi-Action job control script to the controlling vrun instance." />
<meta name="prodname" content="Verification Run Manager User Guide" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-07-10" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="vrm_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="QuestaÂ® Verification Run Manager User Guide" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id9fbffc36-09d3-4f84-bfae-b1af08e8b33a" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Generating and Launching Multi-Action Script Files</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Generating and Launching Multi-Action Script Files" />
<meta name="attributes" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id9fbffc36-09d3-4f84-bfae-b1af08e8b33a">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Generating and Launching Multi-Action Script Files</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">If an integer <span class="ph FontProperty emphasis">maxarray</span> or <span class="ph FontProperty emphasis">maxclubbing</span> value
is associated with a named queue when it comes time to launch one
or more Actions, a multi-Action job control script is created and launched
via the execution method command. This script contains a list of
per-Action launch commands, each of which matches the command normally
stored in the execution method <span class="ph filepath">.bat</span> file for
that Action (that is, the command that was launched under single-action
mode). The script executes the commands in this list sequentially
and each command generates the <span class="ph FontProperty emphasis">start</span> and <span class="ph FontProperty emphasis">done</span> messages
used by the controlling vrun instance to monitor and track the status
of each Action. No messages are sent from the multi-Action job control
script to the controlling vrun instance.</span>
</div>
<p class="p">Following is an example of a multi-Action
job control script: </p>
<pre class="pre codeblock leveled"><code>set commands [list \
	{echo {do /path/to/VRMDATA/nightly/test~1/execScript.wrap} |
	 /path/to/modeltech/linux/vsim -c -l {} -onfinish stop} \
	{echo {do /path/to/VRMDATA/nightly/test~2/execScript.wrap} |
	 /path/to/modeltech/linux/vsim -c -l {} -onfinish stop} \
	{echo {do /path/to/VRMDATA/nightly/test~3/execScript.wrap} |
	 /path/to/modeltech/linux/vsim -c -l {} -onfinish stop} \
	{echo {do /path/to/VRMDATA/nightly/test~4/execScript.wrap} |
	 /path/to/modeltech/linux/vsim -c -l {} -onfinish stop} \
	{echo {do /path/to/VRMDATA/nightly/test~5/execScript.wrap} |
	 /path/to/modeltech/linux/vsim -c -l {} -onfinish stop} \
]

if {[info exists ::env(MTI_VRUN_JOBIDX_ENV)]} {
	set varname $::env(MTI_VRUN_JOBIDX_ENV)
} else {
	set varname {}
}

if {![string equal $varname {}] &amp;&amp; [info exists ::env($varname)]} {
	uplevel #0 exec [lindex $commands [expr {$::env($varname) - 1}]]
} else {
	foreach command $commands {
		uplevel #0 exec $command
	}
}</code></pre><p class="p">As you can see, the multi-Action wrapper first
looks for the MTI_VRUN_JOBIDX_ENV environment variable. If this
variable is set, it indicates that vrun believes the Grid Management system
supports array jobs and that such an array job has, in fact, been
submitted. It is assumed (by design, in fact) that the environment
variable named in the MTI_VRUN_JOBIDX_ENV environment variable contains
the specific index of the Action to be executed with each invocation.
In the supported Grid Management systems, this index is one-based
(that is, starts at one and increments to the upper limit of the
array). Therefore, it subtracts one when choosing the Action to
execute. The commands in the list are the same commands that would
have been placed into the execution method wrapper (.<span class="ph filepath">bat</span>)
if the Action were executed separately. </p>
<p class="p">If the MTI_VRUN_JOBIDX_ENV environment variable
is not found, then the multi-Action wrapper assumes that the Actions
in the list should be executed in sequence, as would happen in a
fixed-list clubbed job. In fact, the same multi-Action wrapper script
is used for grid array jobs and fixed-list clubbed jobs.</p>
<p class="p">One of the Actions in the clubbed list is selected
as the âproxyâ Action. The multi-Action job control script and that
scriptâs stdout and stderr output logs are written to the task directory associated
with the proxy Action. The job ID returned by the grid submission
command is associated with the proxy Action. All other Actions that
were clubbed together with the proxy Action are annotated with the
proxy Actions context string to make job control feasible.</p>
<p class="p">The multi-Action job control script is named
by combining the base name of the proxy Action (that is, <span class="ph FontProperty emphasis">preScript</span>, <span class="ph FontProperty emphasis">execScript</span>, <span class="ph FontProperty emphasis">postScript</span>,
and so on) with an extension of <span class="ph filepath">.multi</span>. The
remaining files, such as the wrapper (<span class="ph filepath">.wrap</span>)
and script (<span class="ph filepath">.do</span>) files, are generated for each
Action as usual.</p>
<p class="p">Refer to â<a class="xref fm:HeadingAndPage" href="MGCChap_ControllingGridJobs_id81e87ea4.html#id81e87ea4-8a6f-4c49-bca9-f63735754234__MGCChap_ControllingGridJobs_id81e87ea4.xml#id81e87ea4-8a6f-4c49-bca9-f63735754234" title="The architecture of VRM is intentionally general. By default, Action scripts (preScript, execScript, postScript, and others) are launched as child processes on the local machine. The RMDB file can specify execution methods for all or a select group of Actions that cause the Action scripts to be launched in a user-specified manner. This can be used to launch remote processes on specific servers, to wrap a given Action script in another script, or to submit the Action script for execution on a compute grid or server farm. The user only needs to provide a template for the command necessary to launch a given script and vrun will follow the instructions set by the user when launching the scripts associated with that execution method.">Controlling Grid Jobs</a>â for additional information.</p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_AggregatingMultipleActionsInSingleJob_idd29a7ea8.html" title="By default, VRM launches each Action as a separate job, even when launching jobs on a grid. However, because the grid queuing process involves some overhead, it is sometimes more efficient to combine two or more short-running Actions into a single grid job submission. A multi-Action grid job is created when several eligible Actions are clubbed together into a single script that is launched as a single job on a compute grid. Generation of multi-Action jobs is controlled on a per-queue basis. Each named queue is configured via attributes attached to the method element that creates the named queue and that queueâs settings apply to any Action which is launched via that named queue.">Aggregating Multiple Actions in a Single Job</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter">Â </div><div class="Footer" id="Footer">Â </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "vrm_user"
                DocTitle = "QuestaÂ® Verification Run Manager User Guide"
                PageTitle = "Generating and Launching Multi-Action Script Files"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_GeneratingLaunchingMultiActionScriptFiles_id9fbffc36.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">QuestaÂ® Verification Run Manager User GuideÂ Software Version 2020.4<br />Unpublished work. Â©Â Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>