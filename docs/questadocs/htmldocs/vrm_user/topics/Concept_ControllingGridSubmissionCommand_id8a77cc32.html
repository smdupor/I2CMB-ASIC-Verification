<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Controlling the Grid Submission Command" />
<meta name="abstract" content="Different Grid Management systems require different command-line formats to submit array jobs. In keeping with the design goal of allowing environment-specific behavior to be overridden to allow for local customization, an execution method may call upon a user-definable procedure to construct part of the execution method command. Built-in procedures to cover LSF, UGE, SGE, and RTDA grids are built into the vrun executable. Other Grid Management systems that support array jobs require an additional procedure to be defined." />
<meta name="description" content="Different Grid Management systems require different command-line formats to submit array jobs. In keeping with the design goal of allowing environment-specific behavior to be overridden to allow for local customization, an execution method may call upon a user-definable procedure to construct part of the execution method command. Built-in procedures to cover LSF, UGE, SGE, and RTDA grids are built into the vrun executable. Other Grid Management systems that support array jobs require an additional procedure to be defined." />
<meta name="prodname" content="Verification Run Manager User Guide" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-07-10" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="vrm_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® Verification Run Manager User Guide" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id8a77cc32-cdc3-47b4-bc77-d531a4516b44" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Controlling the Grid Submission Command</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Controlling the Grid Submission Command" />
<meta name="attributes" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id8a77cc32-cdc3-47b4-bc77-d531a4516b44">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Controlling the Grid Submission Command</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">Different Grid
Management systems require different command-line formats to submit
array jobs. In keeping with the design goal of allowing environment-specific
behavior to be overridden to allow for local customization, an execution method
may call upon a user-definable procedure to construct part of the
execution method command. Built-in procedures to cover LSF, UGE,
SGE, and RTDA grids are built into the vrun executable. Other Grid
Management systems that support array jobs require an additional procedure
to be defined.</span>
</div>
<p class="p">Like the other grid-based user-definable
procedures, the grid type must be specified in order to know which
Grid Management system is being invoked. The grid type is specified
in the <span class="ph FontProperty emphasis">gridtype</span> attribute
attached to the execution method element, as shown below: </p>
<pre class="pre codeblock leveled"><code>&lt;method queue="grid" gridtype="lsf"&gt;...&lt;/method&gt;</code></pre><p class="p">The grid type designation for LSF grids is
“lsf”, UGE grids is “uge”, SGE grids is “sge”, and RTDA grids is
“rtda”. Other types can be defined by supplying the necessary user-definable procedures
as discussed elsewhere. The grid type is a property of the named
queue and is updated every time an Action is queued to a particular
named queue. It is a bad idea to have multiple execution methods
point to the same named queue if the execution methods do not have
identical <span class="ph FontProperty emphasis">gridtype</span> attributes. </p>
<p class="p">The name of the user-definable procedure used
to help develop the execution method command is formed by appending
the title-case form of the grid type to the string “SubmitOptions”.
For example, the procedure called for a grid type of “lsf” is “LsfSubmitOptions”.
As the name implies, this procedure returns pre-tokenized options
(or a string if your RMDB version is 1.0, the chapter “<a class="xref fm:HeadingOnly" href="MGCAppe_RmdbVersions_id6ecb3d59.html#id6ecb3d59-8bec-4590-8942-1be582dd70e7__MGCAppe_RmdbVersions_id6ecb3d59.xml#id6ecb3d59-8bec-4590-8942-1be582dd70e7" title="This appendix provides a reference to the various versions of the Run Manager Database (RMDB).">RMDB Versions</a>” for information on how this procedure
differs between versions) containing command-line options to be
used in the grid submit command. These options include: job name,
any options necessary to designate a grid array job (including the
size of the array), and the options for supplying file names and/or
paths for the stdout/stderr log output of the job itself. </p>
<p class="p">Any time an execution method is used to generate
an execution method command for launching the job, the <span class="ph FontProperty emphasis">gridtype</span> value
for the named queue is consulted. If the value is non-blank, then
it is used to construct the name of a user-defined procedure as
described above (that is, <a class="xref fm:HeadingOnly" href="General_Gridtypesubmitoptions_id7cd6499b.html#id7cd6499b-f859-4566-a456-f0d2fca7096b__General_Gridtypesubmitoptions_id7cd6499b.xml#id7cd6499b-f859-4566-a456-f0d2fca7096b" title="This procedure is called in order to fetch a list of command-line options which should be passed to the grid submission command of the following grid management systems:">&lt;gridtype&gt;SubmitOptions</a>). If a procedure by that name
exists, it is called with the usual data array containing certain
particulars of the proxy Action associated with the job. Included
in this data is a count of the number of Actions that have been
aggregated to form the job in question. The &lt;<span class="ph FontProperty emphasis">gridtype</span>&gt;<span class="ph FontProperty emphasis">SubmitOptions</span> procedure
returns a string with the appropriate command-line options for that
grid type and for that number of Actions. This option string is
placed in the predefined <span class="ph FontProperty emphasis">GRIDOPTS</span> parameter.
In addition, the grid type is placed in the predefined <span class="ph FontProperty emphasis">GRIDTYPE</span> parameter.
These parameters may be referenced from the execution method command. </p>
<p class="p">In addition, if the Grid Management system
in question supports grid array jobs, the user-defined &lt;gridtype&gt;SubmitOptions
procedure must set an environment variable by the name of MTI_VRUN_JOBIDX_ENV.
This environment variable should contain the name of another environment
variable used by the Grid Management system to indicate which of
the components of the array job is being executed by each invocation.
For LSF grids, this variable name is LSB_JOBINDEX, for UGE grids
it is UGE_TASK_ID, for SGE grids it is SGE_TASK_ID, and for RTDA
grids it is RTDA_TASK_ID. Grid Management engines that do not pass
the array index to the job script via an environment variable are
not supported. In order to take advantage of this user-defined procedure,
the execution method command must include a reference to the <span class="ph FontProperty emphasis">GRIDOPTS</span> predefined
parameter. This parameter is defined only when the <span class="ph FontProperty emphasis">gridtype</span> attribute
is specified and the appropriate &lt;<span class="ph FontProperty emphasis">gridtype</span>&gt;<span class="ph FontProperty emphasis">SubmitOptions</span> procedure
is found (this is so that an error occurs if the execution method
command is likely to be incomplete as a result). An example of a
properly constructed pair of execution methods for LSF and SGE grids,
each configured to support array jobs, would look like the following:</p>
<pre class="pre codeblock leveled"><code>&lt;method if="[string equal {(%GRID:%)} {UGE}]" gridtype="uge" maxarray="0" mintimeout="300"&gt;
	&lt;command&gt;qsub (%GRIDOPTS%) (%WRAPPER%)&lt;/command&gt;
&lt;/method&gt;
&lt;method if="[string equal {(%GRID:%)} {LSF}]" gridtype="lsf" maxarray="0" mintimeout="300"&gt;
	&lt;command&gt;bsub (%GRIDOPTS%) (%WRAPPER%)&lt;/command&gt;
&lt;/method&gt;
...</code></pre><p class="p">Each of these methods is conditional based
on a <span class="ph FontProperty emphasis">GRID</span> parameter
that can be specified on the vrun command line. The actual grid
submission command is not included in the <span class="ph FontProperty emphasis">GRIDOPTS</span> parameter
since the path would necessarily depend on the local environment
(not all environments would necessarily have LSF, UGE, SGE, and
RTDA grid submission commands on their default search path). The <span class="ph FontProperty emphasis">WRAPPER</span> parameter
is referenced, as usual, to point to the multi-Action wrapper script.
Each execution method is set to accept arbitrarily large array jobs
with an additional queuing timeout of 5 minutes.</p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_AggregatingMultipleActionsInSingleJob_idd29a7ea8.html" title="By default, VRM launches each Action as a separate job, even when launching jobs on a grid. However, because the grid queuing process involves some overhead, it is sometimes more efficient to combine two or more short-running Actions into a single grid job submission. A multi-Action grid job is created when several eligible Actions are clubbed together into a single script that is launched as a single job on a compute grid. Generation of multi-Action jobs is controlled on a per-queue basis. Each named queue is configured via attributes attached to the method element that creates the named queue and that queue’s settings apply to any Action which is launched via that named queue.">Aggregating Multiple Actions in a Single Job</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "vrm_user"
                DocTitle = "Questa® Verification Run Manager User Guide"
                PageTitle = "Controlling the Grid Submission Command"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_ControllingGridSubmissionCommand_id8a77cc32.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® Verification Run Manager User Guide Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>