<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Implement a Macro by Calling VRM Recursively" />
<meta name="abstract" content="VRM can recursively call itself, thus encapsulating key command-line options into the database. VRM can run any legal command as part of an Action script, including the vrun command itself. This property of VRM can be exploited to provide a robust methodology for encapsulating one or more vrun commands into a higher-level macro-like Runnable object." />
<meta name="description" content="VRM can recursively call itself, thus encapsulating key command-line options into the database. VRM can run any legal command as part of an Action script, including the vrun command itself. This property of VRM can be exploited to provide a robust methodology for encapsulating one or more vrun commands into a higher-level macro-like Runnable object." />
<meta name="prodname" content="Verification Run Manager User Guide" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-07-10" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="vrm_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® Verification Run Manager User Guide" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id6b5b32fa-3ee3-47bc-ac25-e6dbb6adf21b" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Implement a Macro by Calling VRM Recursively</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Implement a Macro by Calling VRM Recursively" />
<meta name="attributes" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id6b5b32fa-3ee3-47bc-ac25-e6dbb6adf21b">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Implement a Macro by Calling VRM Recursively</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">VRM can recursively
call itself, thus encapsulating key command-line options into the
database. VRM can run any legal command as part of an Action script,
including the vrun command itself. This property of VRM can be exploited
to provide a robust methodology for encapsulating one or more vrun
commands into a higher-level macro-like Runnable object.</span>
</div>
<p class="p">As an example, suppose a regression
suite with a top-most Group called “<span class="ph FontProperty emphasis">top</span>”
as follows:</p>
<pre class="pre codeblock leveled"><code>&lt;rmdb&gt;
	&lt;runnable name="top" type="group"&gt;
		...
	&lt;/runnable&gt;
	...
&lt;/rmdb&gt;</code></pre><p class="p">Suppose also that you want to run this regression
under a <span class="ph filepath">VRMDATA</span> directory located in the same
directory as the database itself. Next suppose that you want to
pass in a parameter named <span class="ph FontProperty emphasis">src</span> that
points to a subdirectory of that same directory, also named <span class="ph FontProperty emphasis">src</span>.
In addition, suppose you want to increase the default minimum timeout
to 3600 seconds. The command for launching this regression might
look something like the following:</p>
<p class="lines ApplCommand">vrun -vrmdata ./VRMDATA -gsrc=./src<br />
-mintimeout 3600 top</p>
<p class="p">In order to encapsulate the command-line options
into the database, define a new Task Runnable that is not linked
into the existing regression suite. Any references (direct or indirect) to
the current working directory (including the default <span class="ph filepath">RMDB</span> file) should
be replaced with the parameter reference <span class="ph FontProperty emphasis">(%RMDBDIR%)</span> so
that you can call this macro from any directory as follows:</p>
<pre class="pre codeblock leveled"><code>&lt;rmdb&gt;
	&lt;runnable name="nightly" type="task"&gt;
		&lt;execScript&gt;
			&lt;command&gt;vrun -rmdb (%RMDBFILE%) -vrmdata (%RMDBDIR%)/VRMDATA 
							  -gsrc=(%RMDBDIR%)/src -timeout 3600 top&lt;/command&gt;
		&lt;/execScript&gt;
	&lt;runnable name="top" type="group"&gt;
		...
	&lt;/runnable&gt;
	...
&lt;/rmdb&gt;</code></pre><p class="p">Now just type “vrun nightly” and the VRM process
kicks off a single <span class="ph FontProperty emphasis">execScript</span> Action
that launches another copy of vrun complete with all the correct
command-line options. Note that a special variable called <span class="ph FontProperty emphasis">(%RMDBFILE%)</span> is
used to point to the RMDB file, since the nested vrun process is
launched in the working directory for the <span class="ph filepath">“nightly/execScript”</span> Action.</p>
<p class="p">There is no limit to how many such macro Runnables
can be defined. There is also no limit to how many times the recursive
vrun command can be invoked in one macro Runnable. For example,
if a given regression suite is typically run in two different modes (“<span class="ph FontProperty emphasis">fast</span>”
and “<span class="ph FontProperty emphasis">slow</span>”),
and if the mode is parameterized, the following configuration allows
either or both modes to be run from a single, simple vrun command:</p>
<pre class="pre codeblock leveled"><code>&lt;rmdb&gt;
	&lt;runnable name="fast" type="task"&gt;
		&lt;execScript&gt;
			&lt;command&gt;vrun -rmdb (%RMDBFILE%) -vrmdata (%RMDBDIR%)/VRMDATA 
				-gsrc=(%RMDBDIR%)/src -Gmode=fast -timeout 3600 top&lt;/command&gt;
			&lt;/execScript&gt;
	&lt;/runnable&gt;
	&lt;runnable name="slow" type="task"&gt;
		&lt;execScript&gt;
			&lt;command&gt;vrun -rmdb (%RMDBFILE%) -vrmdata (%RMDBDIR%)/VRMDATA 
				-gsrc=(%RMDBDIR%)/src -Gmode=slow -timeout 3600 top&lt;/command&gt;
		&lt;/execScript&gt;
	&lt;/runnable&gt;
	&lt;runnable name="both" type="task"&gt;
		&lt;execScript&gt;
			&lt;command&gt;vrun -rmdb (%RMDBFILE%) -vrmdata (%RMDBDIR%)/VRMDATA 
				-gsrc=(%RMDBDIR%)/src -Gmode=fast -timeout 3600 top&lt;/command&gt;
			&lt;command&gt;vrun -rmdb (%RMDBFILE%) -vrmdata (%RMDBDIR%)/VRMDATA 
				-gsrc=(%RMDBDIR%)/src -Gmode=slow -timeout 3600 top&lt;/command&gt;
		&lt;/execScript&gt;
	&lt;/runnable&gt;
	&lt;runnable name="top" type="group"&gt;
		...
	&lt;/runnable&gt;
	...
&lt;/rmdb&gt;</code></pre><p class="p">The user can also use the grouping functionality
of the VRM to define the “<span class="ph FontProperty emphasis">both</span>”
Runnable as a Group whose members are the “<span class="ph FontProperty emphasis">fast</span>”
and “<span class="ph FontProperty emphasis">slow</span>” Runnables.
Care must be exercised in order to avoid creating a recursive loop
of vrun commands that no single VRM invocation would be able to
detect. (Note that it is also possible to avoid this problem by
defining the macro Runnables in one database file and the actual
Group and Task Runnables in another database file to which the nested
vrun commands would refer.)</p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_ManagingVrmdataDirectory_id8fd6927c.html" title="VRM maintains a VRM Data directory tree under which each Action executed is assigned a directory based on its context chain.">Managing the VRMDATA Directory</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "vrm_user"
                DocTitle = "Questa® Verification Run Manager User Guide"
                PageTitle = "Implement a Macro by Calling VRM Recursively"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_ImplementMacroByCallingVrmRecursively_id6b5b32fa.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® Verification Run Manager User Guide Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>