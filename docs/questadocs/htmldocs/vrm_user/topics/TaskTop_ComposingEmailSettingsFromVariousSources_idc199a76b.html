<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Composing Email Settings from Various Sources" />
<meta name="abstract" content="You can compose an email from various sources through the use settings and utility procedures." />
<meta name="description" content="You can compose an email from various sources through the use settings and utility procedures." />
<meta name="prodname" content="Verification Run Manager User Guide" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-07-10" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="vrm_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® Verification Run Manager User Guide" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idc199a76b-027d-4435-b5a7-c4765baf5c31" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Composing Email Settings from Various Sources</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Composing Email Settings from Various Sources" />
<meta name="attributes" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="idc199a76b-027d-4435-b5a7-c4765baf5c31">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Composing
Email Settings from Various Sources</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><span class="shortdesc">You can compose an email from various sources
through the use settings and utility procedures.</span>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="idc199a76b-027d-4435-b5a7-c4765baf5c31__idf973c434-ae4f-48f2-8da8-eff78ea0d906"><span class="ph cmd">Call the <a class="xref fm:HeadingOnly" href="General_Getdefaultemailparameters_id1e97a6bd.html#id1e97a6bd-7273-4d4a-aacd-a2328ef871d2__General_Getdefaultemailparameters_id1e97a6bd.xml#id1e97a6bd-7273-4d4a-aacd-a2328ef871d2" title="This procedure is used for initializing an email settings list with default values.">GetDefaultEmailParameters</a> utility
procedure to generate a list of key/value pairs containing the default
values for all email-related settings.</span></li>
<li class="li step stepexpand" id="idc199a76b-027d-4435-b5a7-c4765baf5c31__id82ba2b61-fb2d-4dc9-a5ed-d38a606771b7"><span class="ph cmd">Pass that
list to the <a class="xref fm:HeadingOnly" href="General_Getemailparameters_id7e2fb7ce.html#id7e2fb7ce-7d0e-4ad9-b4ff-0022a8896f05__General_Getemailparameters_id7e2fb7ce.xml#id7e2fb7ce-7d0e-4ad9-b4ff-0022a8896f05" title="This procedure is used to fetch the relevant email settings from one or more RMDB parameters.">GetEmailParameters</a> utility
procedure to search for settings which may be defined in parameters
in the RMDB file. </span><div class="itemgroup info StepInfo"><p class="p">The values found in the RMDB file will override the
values passed to the GetEmailParameters utility procedure and a
list of the combined key/value pairs will be returned.</p>
</div></li>
<li class="li step stepexpand" id="idc199a76b-027d-4435-b5a7-c4765baf5c31__id47760fd4-1fd5-44e5-b3f5-5377286aaccc"><span class="ph cmd">Use the
calling procedure to override any of the settings as necessary.
The easiest way to do that would be to:</span><ol type="a" class="ol substeps"><li class="li substep" id="idc199a76b-027d-4435-b5a7-c4765baf5c31__id52b80922-6d34-4449-a173-1bb6f4ae0ff5"><span class="ph cmd">Build
a TCL array (hash) from the list of key/value pairs.</span></li>
<li class="li substep" id="idc199a76b-027d-4435-b5a7-c4765baf5c31__ida987d0d9-71cb-4889-9434-4155a2d68f2e"><span class="ph cmd">Replace
the values that need to be changed.</span></li>
<li class="li substep" id="idc199a76b-027d-4435-b5a7-c4765baf5c31__id898cae21-1c4a-422a-9aa4-bb3220162aac"><span class="ph cmd">Convert
the TCL array back into a list of key/value pairs.</span></li>
</ol>
</li>
<li class="li step stepexpand" id="idc199a76b-027d-4435-b5a7-c4765baf5c31__id4600da63-97a4-4ab8-8f3b-d28d0b9bee56"><span class="ph cmd">Pass the
final list of key/value pairs (the email settings) to the <a class="xref fm:HeadingOnly" href="General_Sendemailmessage_idadc920df.html#idadc920df-00ae-4007-8f60-3fd22614236d__General_Sendemailmessage_idadc920df.xml#idadc920df-00ae-4007-8f60-3fd22614236d" title="Composes and sends an email message. This procedure uses the built-in default values for any settings which are not provided in the input argument.">SendEmailMessage</a> utility procedure
to generate and send the email.</span></li>
</ol>
<div class="section result"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Results</h2></div><p class="p">The <a class="xref fm:HeadingOnly" href="General_Autoemail_idc938044b.html#idc938044b-993a-4aaf-854d-a12e28dcf203__General_Autoemail_idc938044b.xml#idc938044b-993a-4aaf-854d-a12e28dcf203" title="This procedure examines the RMDB that looks for relevant email settings and, if the required settings are found, composes and sends an email message. The built-in default values are used for any settings which are not provided in the input argument and are not found in the relevant RMDB parameters.">AutoEmail</a> utility
procedure combines these steps into a single procedure call for
those cases where such complexity is unnecessary. In the most common
case, where an email message containing the final status of the
regression is to be sent at the end of the regression run, only
the RMDB parameters need be defined — no TCL code is necessary.
The other procedures are only there to allow customization in the
not-so-common case.</p>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="idc199a76b-027d-4435-b5a7-c4765baf5c31__ided0ca3d6-0637-49f5-9cf4-fb8013d7fac6"><h2 class="title Subheading sectiontitle">Automatic
Summary Message </h2><p class="p">The ability to automatically send a message at the end of the
regression run is built into the VRM system. </p>
<p class="p">To enable this, you must define certain parameters in the RMDB
file. The location of the parameters is irrelevant since VRM will
search the entire RMDB, using the first matching parameter that
it finds for each setting. For example, the following RMDB file
would send an email similar to that sent by the example in the section
“<a class="xref fm:HeadingOnly" href="Concept_ManuallyGeneratedVrmEmail_id0937bf43.html#id0937bf43-f6a7-4f00-af8f-9d1865ea9b78__Concept_ManuallyGeneratedVrmEmail_id0937bf43.xml#id0937bf43-f6a7-4f00-af8f-9d1865ea9b78" title="Use the SendEmailMessage utility procedure, which uses the standard Simple Mail Transport Protocol (SMTP) to compose and send an email message to one or more recipients. you pass the procedure a list of key-value pairs which override the built-in defaults.">Manually Generated VRM Email</a>”.</p>
<pre class="pre codeblock"><code><span class="ph FontProperty P9">&lt;?xml version="1.0" ?&gt;   &lt;rmdb version="1.0" toprunnables="nightly"&gt;
     &lt;runnable name="nightly" type="group"&gt;
       &lt;parameters&gt;
         &lt;parameter name="username" type="tcl"&gt;$::env(USER)&lt;/parameter&gt;
         &lt;!-- the following parameters are used by the AutoEmail function --&gt;
         &lt;parameter name="EMAIL_RECIPIENTS"&gt;(%username%)@mentor.com&lt;/parameter&gt;
         &lt;parameter name="EMAIL_SERVERS"&gt;mail-na.mentorg.com&lt;/parameter&gt;
         &lt;parameter name="EMAIL_SECTIONS"&gt;exe cpl sim apf&lt;/parameter&gt;
         &lt;parameter name="EMAIL_SUBJECT"&gt;This is an automatic message&lt;/parameter&gt;
       &lt;/parameters&gt;
       &lt;members&gt;
         &lt;member&gt;test1&lt;/member&gt;
       &lt;/members&gt;
     &lt;/runnable&gt;
     &lt;runnable name="test1" type="task"&gt;
       &lt;execScript launch="vsim"&gt;
         &lt;command&gt;runmgr::rm_message "Greetings from (%ACTION%)"&lt;/command&gt;
       &lt;/execScript&gt;
     &lt;/runnable&gt;
   &lt;/rmdb&gt;  </span></code></pre><p class="p">At a minimum, the EMAIL_SERVERS parameter must contain the IP
address or Fully Qualified Domain Name (FQDN) of at least one valid
SMTP server and the EMAIL_RECIPIENTS parameter must contain the
email address of at least one valid recipient. You may omit, or
leave blank, all other parameters. Of the omitted or blank parameters,
some will be given default values, as defined in “<a class="xref fm:Table" href="Concept_VrmEmailSettingsAndParameters_id351e3ed1.html#id351e3ed1-b256-4a55-b3ee-da2b502603f8__idacd24e26-1da8-48f6-bf2f-beb0d5e155a7">Table 1</a>”.</p>
<p class="p">In the example, you will notice that:</p>
<ul class="ul"><li class="li" id="idc199a76b-027d-4435-b5a7-c4765baf5c31__idb349737e-aa6a-4556-b82a-e85f9330da28"><p class="p">The EMAIL_RECIPIENTS
parameter makes use of the user name stored in the environment,
in this case via a TCL-type parameter called username.</p>
</li>
<li class="li" id="idc199a76b-027d-4435-b5a7-c4765baf5c31__idf086a91e-5688-4b3e-b273-ec3ec4388490"><p class="p">The EMAIL SECTIONS
parameter defines the status summary sections to be included in
the email message. Note that when this parameter is defined and
non-blank, the value of the parameter is assumed to consist of status
summary keywords to be passed to the GenerateStatusSummary utility
procedure. The output of the GenerateStatusSummary utility procedure
is then appended to the body of the email message.</p>
</li>
</ul>
</div>
<div class="section Subsection" id="idc199a76b-027d-4435-b5a7-c4765baf5c31__id52d67e84-141b-4a27-a88b-631112ff9452"><h2 class="title Subheading sectiontitle">Customized
Automatic Summary Message </h2><p class="p">You can construct a custom message body of a VRM email to be
sent out at the end of the regression. </p>
<p class="p">When you define the EMAIL_MESSAGE parameter as non-blank, the
value of that parameter is included as the first part of the message
body. Then, if you define the EMAIL_SECTIONS parameter as non-blank,
the specified status summary sections will be appended to the end
of the message with a single intervening blank line. This results
in the value of the EMAIL_MESSAGE parameter becoming a heading for
the status summary sections that follow).</p>
<pre class="pre codeblock"><code><span class="ph FontProperty P9">  &lt;?xml version="1.0" ?&gt;
   &lt;rmdb version="1.0" toprunnables="nightly"&gt;
     &lt;runnable name="nightly" type="group"&gt;
       &lt;parameters&gt;
         ...
         &lt;parameter name="EMAIL_MESSAGE"&gt;The regression has finished...&lt;/parameter&gt;
         &lt;parameter name="EMAIL_SECTIONS"&gt;exe cpl sim apf&lt;/parameter&gt;
         ...
       &lt;/parameters&gt;
       ...
     &lt;/runnable&gt;
     ...
   &lt;/rmdb&gt;</span></code></pre><p class="p">You can construct a more customized message through the use of
a TCL procedure defined in a usertcl element.</p>
<pre class="pre codeblock"><code><span class="ph FontProperty P9">  &lt;?xml version="1.0" ?&gt;
   &lt;rmdb version="1.0" toprunnables="nightly" loadtcl="default"&gt;
     &lt;runnable name="nightly" type="group"&gt;
       &lt;parameters&gt;
         ...
         &lt;parameter name="EMAIL_MESSAGE" type="tcl"&gt;[ComposeEmailMessage]&lt;/parameter&gt;
         ...
       &lt;/parameters&gt;
       ...
     &lt;/runnable&gt;
     ...
     &lt;usertcl name="default"&gt;
       proc ComposeEmailMessage {} {
         set message [list]

         lappend message "This is the regression status as of [RightNow]:"
         lappend message ""
         lappend message [GenerateSummaryStatus [list exe cpl xim apf]]

         return [join $message "\n"]
       }
     &lt;/usertcl&gt;
   &lt;/rmdb&gt;</span>  </code></pre><p class="p">In this case, the usertcl procedure calls the GenerateStatusSummary
procedure to compose the major part of the message body. However,
you could use just about any available data and/or procedures to
compose the message body. The procedure should return a string with
embedded newline characters to separate the lines in the message.</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_VrmEmailFunctionality_id76692588.html" title="This functionality supports both automated status messages sent at the end of a regression run and ad-hoc messages initiated from user-definable TCL procedures at any point during the regression run.">VRM Email Functionality</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "vrm_user"
                DocTitle = "Questa® Verification Run Manager User Guide"
                PageTitle = "Composing Email Settings from Various Sources"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_ComposingEmailSettingsFromVariousSources_idc199a76b.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® Verification Run Manager User Guide Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>