<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Override OkToMerge and Rely on Auto-merge" />
<meta name="abstract" content="The auto-merge functionality build into vrun allows a UCDB file produced by an execScript Action to be merged into a target merge file merely by defining certain parameters in the Runnable where the execScript itself is defined." />
<meta name="description" content="The auto-merge functionality build into vrun allows a UCDB file produced by an execScript Action to be merged into a target merge file merely by defining certain parameters in the Runnable where the execScript itself is defined." />
<meta name="prodname" content="Verification Run Manager User Guide" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-07-10" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="vrm_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="QuestaÂ® Verification Run Manager User Guide" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id7fa01343-ab36-44a5-b811-d9d3b5f2a16b" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Override OkToMerge and Rely on Auto-merge</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Override OkToMerge and Rely on Auto-merge" />
<meta name="attributes" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id7fa01343-ab36-44a5-b811-d9d3b5f2a16b">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Override OkToMerge and Rely on Auto-merge</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">The auto-merge
functionality build into vrun allows a UCDB file produced by an <span class="ph FontProperty emphasis">execScript</span> Action
to be merged into a target merge file merely by defining certain
parameters in the Runnable where the <span class="ph FontProperty emphasis">execScript</span> itself
is defined.</span>
</div>
<p class="p"><span class="ph filepath">MergeOneUcdb</span> (see <a class="xref fm:PageNumber" href="Concept_Mergeoneucdb_id9b090089.html#id9b090089-f363-453b-b024-9ca907e7b76f__Concept_Mergeoneucdb_id9b090089.xml#id9b090089-f363-453b-b024-9ca907e7b76f" title="The MergeOneUcdb procedure is passed the path to a single UCDB file and the path to a merge file. The procedure then executes the steps necessary to merge the single UCDB into the merged UCDB file. The procedure returns nothing. The default behavior of this procedure (if not overridden by the user) is to merge the UCDB defined by the value of the ucdbfile array member into the UCDB file defined by the value of the mergefile array member. The vcover merge executable is used without any additional options. In addition, the log output of the vcover executable defaults to stdout, and is echoed to any explicitly supplied log file. This flow could be called an incremental merge flow because each UCDB is merged into the common file as it is encountered.">MergeOneUcdb Concept</a>) user-defined procedure initiates
the auto-merge process. It is possible to manipulate the value of
the parameter that contains the target merge file in such a way
as to cause multiple target merge files to be created according
to the criteria of the component tests. The following example illustrates
one way of accomplishing this:</p>
<pre class="pre codeblock leveled"><code>&lt;rmdb loadtcl="split-merge"&gt;
	&lt;usertcl name="split-merge"&gt;
	proc OkToMerge {userdata} {
		upvar $userdata data
   
		if {![string equal $data(ucdbfile) {}]} {
			if {[string equal $data(passfail) pass]} {
				set data(mergefile) [file join [file dirname 
					$data(mergefile)] passed.ucdb]
			} else {
				set data(mergefile) [file join [file dirname 
					$data(mergefile)] failed.ucdb]
			}
			return 1 ;# merge UCDB if it exists
		}
		return 0;
	}
	&lt;/usertcl&gt;
	&lt;runnable name="nightly" type="group"&gt;
		&lt;parameters&gt;
			...
			&lt;parameter name="ucdbfile"&gt;(%pattern%).ucdb&lt;/parameter&gt;
			&lt;parameter name="mergefile"&gt;(%DATADIR%)/merge.ucdb&lt;/parameter&gt;
		&lt;/parameters&gt;
		...
		&lt;postScript launch="vsim" mintimeout="60"&gt;
			&lt;command&gt;triage dbfile (%DATADIR%)/failed.ucdb&lt;/command&gt;
			&lt;command&gt;triage report&lt;/command&gt;
		&lt;/postScript&gt;
	&lt;/runnable&gt;
	...
&lt;/rmdb&gt;</code></pre><p class="p">In this example, the <span class="ph filepath">OkToMerge</span> (see <a class="xref fm:PageNumber" href="Concept_Oktomerge_id1759b8f1.html#id1759b8f1-3239-4a67-9500-ec740b79e740__Concept_Oktomerge_id1759b8f1.xml#id1759b8f1-3239-4a67-9500-ec740b79e740" title="It is assumed that in the majority of cases, VRM is used to launch simulations whose coverage data is accumulated and recorded in UCDB files (if this is not the case, this section may be ignored).">OkToMerge Concept</a>) user-defined procedure is overridden.
If the <span class="ph FontProperty emphasis">ucdbfile</span> parameter
is defined (meaning the Action is expected to produce a UCDB file),
the pass/fail status of the Action is checked. Depending on whether
the Action passed or failed, the value of the <span class="ph FontProperty emphasis">mergefile</span> parameter
is altered. Since the <span class="ph filepath">MergeOneUcdb</span> (see <a class="xref fm:PageNumber" href="Concept_Mergeoneucdb_id9b090089.html#id9b090089-f363-453b-b024-9ca907e7b76f__Concept_Mergeoneucdb_id9b090089.xml#id9b090089-f363-453b-b024-9ca907e7b76f" title="The MergeOneUcdb procedure is passed the path to a single UCDB file and the path to a merge file. The procedure then executes the steps necessary to merge the single UCDB into the merged UCDB file. The procedure returns nothing. The default behavior of this procedure (if not overridden by the user) is to merge the UCDB defined by the value of the ucdbfile array member into the UCDB file defined by the value of the mergefile array member. The vcover merge executable is used without any additional options. In addition, the log output of the vcover executable defaults to stdout, and is echoed to any explicitly supplied log file. This flow could be called an incremental merge flow because each UCDB is merged into the common file as it is encountered.">MergeOneUcdb Concept</a>) procedure receives the modified <span class="ph FontProperty emphasis">mergefile</span> parameter,
the auto-merge process will merge UCDBs from passing tests into
the <span class="ph filepath">passed.ucdb</span> file and UCDBs from failing
tests into the <span class="ph filepath">failed.ucdb</span>. The <span class="ph FontProperty emphasis">postScript</span> Action
need only pass the <span class="ph filepath">failed.ucdb</span> merge file to
the triage dbfile command.</p>
<p class="p">The advantage of this approach is that both
passing and failing UCDBs are merged on-the-fly, as other tests
in the suite continue to run. Moreover, since queued merging supports multiple
concurrent merge Actions as long as they are to different target
merge files, passing and failing tests can be merged concurrently,
resulting in further efficiency. The disadvantage is that by adding
UCDBs to the merge files on-the-fly, collisions can occur if the
failed test rerun feature is used in the same regression run.</p>
<p class="p">Overall, this is probably the most efficient
flow if both coverage merge and failure triage are involved.</p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_CollatePassfailUcdbFilesMergeTriage_id2bef435c.html" title="In the course of running a regression suite using VRM features, one ends up generating a large number of UCDB, WLF, and other log files that must be analyzed. Coverage information must be merged and/or ranked in order to get a handle on how well the entire regression suite tests the design. Error messages must be triaged in order to pinpoint the unique error messages resulting from that run. From the point of view of the VRM tool, it all boils down to collecting simulation collateral files, sorting them by test status, and making those file lists available to the user's post-regression analysis script.">Collate Pass/Fail UCDB Files for Merge and/or Triage</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter">Â </div><div class="Footer" id="Footer">Â </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "vrm_user"
                DocTitle = "QuestaÂ® Verification Run Manager User Guide"
                PageTitle = "Override OkToMerge and Rely on Auto-merge"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_OverrideOktomergeRelyOnAutoMerge_id7fa01343.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">QuestaÂ® Verification Run Manager User GuideÂ Software Version 2020.4<br />Unpublished work. Â©Â Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>