<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ContainerTopic" />
<meta name="DC.Title" content="Local File Generation" />
<meta name="abstract" content="A Runnable can define one or more local files that are generated, copied, or linked into the working directory prior to the execution of any Action scripts in that directory. Each local file to be generated into the working directory is designated by a corresponding localfile element contained within the runnable element with which it is associated. An optional src attribute specifies the file or directory from which the contents of the local file are to be taken. If the src attribute is not specified, then the contents of the localfile element itself are used to generate the local file." />
<meta name="description" content="A Runnable can define one or more local files that are generated, copied, or linked into the working directory prior to the execution of any Action scripts in that directory. Each local file to be generated into the working directory is designated by a corresponding localfile element contained within the runnable element with which it is associated. An optional src attribute specifies the file or directory from which the contents of the local file are to be taken. If the src attribute is not specified, then the contents of the localfile element itself are used to generate the local file." />
<meta name="prodname" content="Verification Run Manager User Guide" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-07-10" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="vrm_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® Verification Run Manager User Guide" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="ida2a8f096-abfd-4ea1-92a9-c628274a4d72" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Local File Generation</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Local File Generation" />
<meta name="attributes" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="ida2a8f096-abfd-4ea1-92a9-c628274a4d72">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Local File Generation</h1>
<div class="body MGCBody"><div class="abstract ContainerAbstract"><span class="shortdesc">A Runnable
can define one or more local files that are generated, copied, or
linked into the working directory prior to the execution of any
Action scripts in that directory. Each local file to be generated
into the working directory is designated by a corresponding <span class="ph FontProperty emphasis">localfile</span> element
contained within the <span class="ph FontProperty emphasis">runnable</span> element
with which it is associated. An optional <span class="ph FontProperty emphasis">src</span> attribute
specifies the file or directory from which the contents of the local
file are to be taken. If the <span class="ph FontProperty emphasis">src</span> attribute
is not specified, then the contents of the <span class="ph FontProperty emphasis">localfile</span> element
itself are used to generate the local file.</span>
</div>
<p class="p">If the <span class="ph FontProperty emphasis">src</span> attribute
is not specified, then the <span class="ph FontProperty emphasis">name</span> attribute
is required and specifies the name of the local file to be generated.
In this case, the <span class="ph FontProperty emphasis">localfile</span> element can
contain one or more <span class="ph FontProperty emphasis">command</span> elements,
each of which corresponds to a line in the local file. For example,
the following element generates a local command file called <span class="ph FontProperty emphasis">compile</span> in
the working directory associated with the “nightly” Runnable:</p>
<pre class="pre codeblock leveled"><code>&lt;runnable type="group" name="nightly"&gt;
	...
	&lt;localfile name="compile" expand="yes"&gt;
		&lt;command&gt;vlib (%DATADIR%)/work&lt;/command&gt;
		&lt;command&gt;vlog -work (%DATADIR%)/work -cover sbectf 
				 (%RMDBDIR%)/src/tb.sv&lt;/command&gt;
		&lt;command&gt;vlog -work (%DATADIR%)/work -cover sbectf 
				 (%RMDBDIR%)/src/dut.sv&lt;/command&gt;
		...
	&lt;/localfile&gt;
	...
&lt;/runnable&gt;</code></pre><p class="p">If the <span class="ph FontProperty emphasis">expand</span> attribute
is set to “yes”, then each line in the generated file is scanned
for parameter references and any that are found are expanded. If the <span class="ph FontProperty emphasis">expand</span> attribute
is missing or set to anything other than “yes”, then the lines in
the <span class="ph FontProperty emphasis">localfile</span> element
(or the source file if the <span class="ph FontProperty emphasis">src</span> attribute
is specified) are copied verbatim.</p>
<p class="p">If the <span class="ph FontProperty emphasis">executable</span> attribute
is set to “yes”, then the resulting target file is set to the executable
mode. This is only effective on UNIX and/or Linux platforms (Windows
files do not have an executable flag).</p>
<p class="p">If the <span class="ph FontProperty emphasis">append</span> attribute
is set to “yes”, then the contents of the element will be appended
to the specified file, if it exists.</p>
<p class="p">If the <span class="ph FontProperty emphasis">src</span> attribute
is included in the <span class="ph FontProperty emphasis">localfile</span> element,
the contents of the <span class="ph FontProperty emphasis">localfile</span> element
are ignored and the contents of the generated file are taken from
the file (or directory) located at the path indicated in the <span class="ph FontProperty emphasis">src</span> attribute.
This path can be an absolute path or, if relative, is interpreted
as being relative to the <span class="ph filepath">RMDBDIR</span> path (that
is, the directory from which the RMDB database is read).</p>
<p class="p">In VRM, the <span class="ph FontProperty emphasis">src</span> attribute
of <span class="ph FontProperty emphasis">localfile</span> elements
in the RMDB supports wildcard globing (according to the rules for
the TCL glob command). Globing works under the following conditions:</p>
<ul class="ul"><li class="li" id="ida2a8f096-abfd-4ea1-92a9-c628274a4d72__id84902ef8-317e-420c-8495-74cecf68a4cf"><p class="p">If the <span class="ph FontProperty emphasis">name</span> attribute
is blank or does not exist, then the files referred to by the <span class="ph FontProperty emphasis">src</span> attribute
are copied/linked into the working directory for the Runnable on
whose behalf the <span class="ph FontProperty emphasis">localfile</span> element
is being expanded.</p>
</li>
<li class="li" id="ida2a8f096-abfd-4ea1-92a9-c628274a4d72__ida01c4434-c2f8-46d1-9c16-aaf8ffcf715a"><p class="p">If the <span class="ph FontProperty emphasis">name</span> attribute
is non-blank and refers to a directory, then the files referred
to by the <span class="ph FontProperty emphasis">src</span> attribute
are copied/linked into the directory referred to by the <span class="ph FontProperty emphasis">name</span> attribute.</p>
</li>
</ul>
<p class="p">If the <span class="ph FontProperty emphasis">src</span> attribute
expands to more than one source file and the <span class="ph FontProperty emphasis">name</span> attribute
is non-blank and does not refer to a directory, an error is reported
and the <span class="ph FontProperty emphasis">localfile</span> element
will not copy/link any files.</p>
<p class="p">In the event a <span class="ph FontProperty emphasis">src</span> attribute
is specified, an optional <span class="ph FontProperty emphasis">type</span> attribute
can also be specified. If the value of the <span class="ph FontProperty emphasis">type</span> attribute
is “link,” a symbolic link is generated in the working directory
(at the path specified by the <span class="ph FontProperty emphasis">name</span> attribute)
that points to the file or directory specified in the <span class="ph FontProperty emphasis">src</span> attribute.
If the <span class="ph FontProperty emphasis">type</span> attribute
is not specified or does not contain one of the two valid values
(“copy” or “link”), then the file contents are copied by default.
The <span class="ph FontProperty emphasis">type</span> attribute
is ignored if the <span class="ph FontProperty emphasis">src</span> attribute
is not specified.</p>
<p class="p">If the value of the <span class="ph FontProperty emphasis">type</span> attribute
is “copy,” the behavior depends on the contents of the <span class="ph FontProperty emphasis">src</span> and <span class="ph FontProperty emphasis">name</span> attributes
as follows:</p>
<ul class="ul"><li class="li" id="ida2a8f096-abfd-4ea1-92a9-c628274a4d72__id64c5d77e-6376-43be-8799-d730a286b2bb"><p class="p">If the <span class="ph FontProperty emphasis">type</span> attribute
is “copy” and the <span class="ph FontProperty emphasis">src</span> attribute
points to a regular file, then the <span class="ph FontProperty emphasis">name</span> attribute
is optional and the single file specified in the <span class="ph FontProperty emphasis">src</span> attribute
is copied to the working directory. If the <span class="ph FontProperty emphasis">name</span> attribute
is specified, then the value of the <span class="ph FontProperty emphasis">name</span> attribute
is used as the name of the local file. If the <span class="ph FontProperty emphasis">name</span> attribute
is not specified, then the name used for the local file is the same
as the basename of the source file.</p>
</li>
<li class="li" id="ida2a8f096-abfd-4ea1-92a9-c628274a4d72__id52c70949-c589-409c-a091-32dc86b9ee57"><p class="p">If the <span class="ph FontProperty emphasis">type</span> attribute
is “copy” and the <span class="ph FontProperty emphasis">src</span> attribute
points to a directory, then the <span class="ph FontProperty emphasis">name</span> attribute
can be a list of one or more filenames, each of which are copied
to the working directory using the same name as in the source directory
specified by the <span class="ph FontProperty emphasis">src</span> attribute.
If the <span class="ph FontProperty emphasis">name</span> attribute
is empty, then a warning is issued and nothing is copied.</p>
</li>
</ul>
<p class="p">Note that it is not possible to copy
an entire directory using a “copy” type <span class="ph FontProperty emphasis">localfile</span> element.
This is to prevent inadvertent runaway copy operations. If an entire
directory copy is required, it should be coded into the appropriate Action
script.</p>
<p class="p">In all cases (link mode, single copy
mode, and multiple copy mode), the <span class="ph FontProperty emphasis">name</span> attribute
value(s) can contain a relative path. If a path is specified for
a given value of the <span class="ph FontProperty emphasis">name</span> attribute,
then the directories leading to the path in question are created
before the file is generated. In multiple copy mode, where the value
of the <span class="ph FontProperty emphasis">name</span> attribute
is used along with a path to a directory from the <span class="ph FontProperty emphasis">src</span> attribute,
the path designated by the <span class="ph FontProperty emphasis">name</span> attribute
value(s) is combined with the directory in the <span class="ph FontProperty emphasis">src</span> attribute
to refer to the source file.</p>
<p class="p">The target of the <span class="ph FontProperty emphasis">localfile</span> element
(path in the <span class="ph FontProperty emphasis">name</span> attribute)
must resolve to a path within either the current working directory
($cwd) of the vrun process or the <span class="ph filepath">VRMDATA</span> directory.
Any attempt to copy files to a location outside those bounds results
in an error message and the copy/link is not performed. The reason
is to prevent inadvertent clobbering of existing files.</p>
<p class="p">Note that in link mode, if a file or
directory already exists at the target path, a warning is issued
and the symbolic link is not created. In copy mode, if a file already
exists at the target path, its timestamp is checked against that
of the source file and the copy is silently ignored unless the source
file is newer. If a directory already exists at the target path
in copy mode, then an error is issued and the copy operation will
not proceed.</p>
<p class="p">Note that the use of file timestamps
is intentional. The test is not whether or not the file has changed
but whether or not the source file is newer (for example, make).
If the user modifies the file in the working directory for any reason,
then VRM must not copy over the modified file.</p>
<p class="p">For those readers who find code easier
to read than prose, the following pseudo-code describes VRM behavior
under different conditions:</p>
<pre class="pre codeblock leveled"><code>if (value(src) is empty) {
	if (value(name) is empty) {
		error; /* either value(src) or value(name) must be specified */
	} else /* value(name) is specified */ {
		if (dirname(value(name)) is NOT empty) {
			mkdir -p (%TASKDIR%)/dirname(value(name))
		}
		cp &lt;commands-in-localfile-element&gt; to (%TASKDIR%)/value(name)
	}
} else /* value(src) has been specified */ {
	if (isDirectory(value(src)) /* value(src) points to a directory */ {
		if (value(name) is empty) {
			if (value(type) == "link") {
			 ln -s (%RMDBDIR%)/value(src) to (%TASKDIR%)/basename(value(src))
			} else /* value(type) == "copy" (by default) */ {
				error; /* whole-directory copy not supported */
			}
		} else /* value(name) is specified */ {
			if (value(type) == "link") {
				if (dirname(value(name)) != "") {
					mkdir -p (%TASKDIR%)/dirname(value(name))
				}
				ln -s (%RMDBDIR%)/value(src) to (%TASKDIR%)/value(name)
			} else /* value(type) == "copy" (by default) */ {
				if (value(name) is empty) {
					warning; /* nothing to be copied */
				} else /* split value(name) into multiple tokens */ {
					foreach token in value(name) {
						if (dirname(token) is NOT empty) {
							mkdir -p (%TASKDIR%)/dirname(token)
					}
					cp (%RMDBDIR%)/value(src)/token to (%TASKDIR%)/token
				}
			}
		}
	}
} else /* value(src) points to a non-directory (ie: a regular file) */ {
	if (value(name) is empty) {
		if (value(type) == "link") {
			ln -s (%RMDBDIR%)/value(src) to (%TASKDIR%)/basename(value(src))
		} else /* value(type) == "copy" (by default) */ {
			cp (%RMDBDIR%)/value(src) to (%TASKDIR%)/basename(value(src))
		}
	} else /* value(name) is specified */ {
		if (dirname(value(name)) is NOT empty) {
			mkdir -p (%TASKDIR%)/dirname(value(name))
		}
		if (value(type) == "link") {
			ln -s (%RMDBDIR%)/value(src) to (%TASKDIR%)/value(name)
		} else /* value(type) == "copy" by default */ {
			cp (%RMDBDIR%)/value(src) to (%TASKDIR%)/value(name)
		}
	}
  }
}</code></pre><p class="p">In the case of a discrepancy between
the pseudo-code above and the prose describing this feature, the
prose description has precedence.</p>
</div>
<div class="related-links TopicTOC levels:1">
<ul class="ullinks">
<li class="link ulchildlink"><strong><a href="../topics/Concept_CodeExamples_id568ae0a0.html" title="Following are some examples of the localfile element in various configurations (assume (%RMDBDIR%)/srcdir is a directory):">Code Examples</a></strong></li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_WorkingDirectoryOverview_id9e299a3a.html" title="For any given regression run, each Task or Group of Tasks is assigned a unique working directory and the working directories for the member Groups and/or Tasks within any given Group are created directly under that Group's working directory in a manner reflecting the membership hierarchy defined by the RMDB database. This allows the user scripts to refer to files maintained on behalf of their parent Group (that is, the coverage merge file or design library) via relative path names such as “..” (although that does not preclude the user from passing that information via parameters defined at the Group level). Any files generated by VRM in association with a given Action (that is, Action script files, .do files, log files, and so on) are written to the working directory associated with the Runnable on whose behalf the Action is executed.">Working Directory Overview</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "vrm_user"
                DocTitle = "Questa® Verification Run Manager User Guide"
                PageTitle = "Local File Generation"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Contain_LocalFileGeneration_ida2a8f096.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® Verification Run Manager User Guide Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>