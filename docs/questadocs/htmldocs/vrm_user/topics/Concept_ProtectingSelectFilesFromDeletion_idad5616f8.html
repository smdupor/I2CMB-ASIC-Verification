<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Protecting Select Files from Deletion" />
<meta name="abstract" content="Following are the ways to protect one or more files from deletion:" />
<meta name="description" content="Following are the ways to protect one or more files from deletion:" />
<meta name="prodname" content="Verification Run Manager User Guide" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-07-10" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="vrm_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® Verification Run Manager User Guide" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idad5616f8-2205-4604-9c54-23dfda674f3d" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Protecting Select Files from Deletion</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Protecting Select Files from Deletion" />
<meta name="attributes" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="idad5616f8-2205-4604-9c54-23dfda674f3d">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Protecting Select Files from Deletion</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">Following are
the ways to protect one or more files from deletion:</span>
</div>
<ul class="ul"><li class="li" id="idad5616f8-2205-4604-9c54-23dfda674f3d__id51add984-0d4e-4e57-a2c0-df1ae5518640"><p class="p">By passing a file or path glob to the <span class="ph filepath">DoNotDelete</span> utility
procedure.</p>
</li>
<li class="li" id="idad5616f8-2205-4604-9c54-23dfda674f3d__id39a7e9ed-4cba-4fe1-b2ba-7a9aeb9c1f2f"><p class="p">By including a file or path glob in the <span class="ph FontProperty emphasis">nodelete</span> parameter
in the RMDB file.</p>
</li>
<li class="li" id="idad5616f8-2205-4604-9c54-23dfda674f3d__idba37da97-b874-4bc9-903d-bf423e864e7c"><p class="p">By saving the file to a directory in
which no Action is executed (the top-most (%<span class="ph filepath">DATADIR</span>%)
directory would be a convenient choice). </p>
</li>
</ul>
<p class="p">Directories that are directly associated with
Runnables (such as (%<span class="ph filepath">DATADIR</span>%)/<span class="ph filepath">nightly</span>, (%<span class="ph filepath">DATADIR</span>%)/<span class="ph filepath">nightly/test1</span>,
and so on), a special flag file is written to the directory in order
to prevent its accidental deletion. The auto-delete algorithm will
not traverse into these directories while analyzing a parent directory
for deletion. They can, however, be deleted as part of the auto-delete
operation associated with the Runnable for which they were originally
created.</p>
<div class="section Subsections"><div class="section Subsection" id="idad5616f8-2205-4604-9c54-23dfda674f3d__id1079be73-c16e-4124-9c98-cfe8183bf304"><h2 class="title Subheading sectiontitle">Using the DoNotDelete Utility
Procedure</h2><p class="p">Files and/or directories may be protected from
auto-deletion by passing them to the <span class="ph filepath">DoNotDelete</span> utility
procedure. The <span class="ph filepath">DoNotDelete</span> procedure may be
called from any user-definable procedure. It is passed one or more
absolute or relative path arguments that may include glob-style
wildcards. If one or more of the path arguments is not absolute,
those arguments are assumed to be relative to (%<span class="ph filepath">DATADIR</span>%)
or to the most recent absolute or relative path passed as the value
of the -dir option in the same <span class="ph filepath">DoNotDelete</span> invocation.</p>
<p class="p"><a class="xref fm:Table" href="#idad5616f8-2205-4604-9c54-23dfda674f3d__idf7607ce6-bcdc-4c74-9e93-0037ba42f62c">Table 1</a> shows various DoNotDelete commands and
the resulting absolute-path string that would be expanded. In this
case, the parameter reference “(%DATADIR%)” represents the path
to the <span class="ph filepath">VRM Data</span> directory, as specified by
the -vrmdata option.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="idad5616f8-2205-4604-9c54-23dfda674f3d__idf7607ce6-bcdc-4c74-9e93-0037ba42f62c" class="table" frame="border" border="1" rules="cols"><caption><span class="tablecap"><span class="table--title-label">Table 1. </span>DoNotDelete Commands</span></caption><colgroup><col style="width:1.950in" /><col style="width:1.950in" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d11034e213"><p class="p">Command</p>
</th>
<th class="entry cellrowborder default-entry" style="vertical-align:top;" id="d11034e216"><p class="p">Resulting Absolute Path</p>
</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d11034e213 "><p class="p">DoNotDelete *.log</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d11034e216 "><p class="p">(%DATADIR%)/*.log</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d11034e213 "><p class="p">DoNotDelete nightly/test1/*.log</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d11034e216 "><p class="p">(%DATADIR%)/nightly/test1/*.log</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d11034e213 "><p class="p">DoNotDelete /tmp/*.log</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d11034e216 "><p class="p">/tmp/*.log</p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d11034e213 "><p class="p">DoNotDelete *.log -dir
/tmp *.ucdb</p>
</td>
<td class="entry cellrowborder default-entry" style="vertical-align:top;" headers="d11034e216 "><p class="p">(%DATADIR%)/*.log /tmp/*.ucdb</p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p">It is recommended that the <span class="ph FontProperty emphasis">CONTEXT</span> built-in parameter
(passed to the <span class="ph filepath">OkToDelete</span> procedure via the <span class="ph FontProperty emphasis">userdata</span> array)
be used when referring to files located within the working directory
for the Action on whose behalf the <span class="ph filepath">OkToDelete</span> procedure
has been called.</p>
<p class="p">If any of the resulting absolute-path strings
contains glob-style wildcards, then the wildcards are expanded at
the time the procedure is called and the resulting paths are placed
in the internal <span class="ph FontProperty emphasis">NoDelete</span> list.
If a given path has no wildcards or the wildcards expand to an empty
list, then the path itself is placed in the internal <span class="ph FontProperty emphasis">NoDelete</span> list.</p>
<p class="p">Note that the above description implies that
files to be protected via a wildcard-laden argument to the <span class="ph filepath">DoNotDelete</span> procedure
must exist at the time the DoNotDelete command is invoked. However,
individual files may still be protected from deletion, even when
they do not yet exist, by passing their names to the <span class="ph filepath">DoNotDelete</span> procedure
explicitly (that is, without wildcards). Since the <span class="ph filepath">OkToDelete</span> is
called after all the merge-related and triage-related user-defined
procedures, it is generally safe to protect collateral files generated
from those procedures using wildcard-laden paths.</p>
<p class="p">Following is how the <span class="ph filepath">OkToDelete</span> example
shown above might be modified to protect all the log and UCDB files
in the working directory for the Action on whose behalf it was called: </p>
<pre class="pre codeblock leveled"><code>proc OkToDelete {userdata} {
	upvar $userdata data

	DoNotDelete -dir $data(CONTEXT) *.log *.ucdb

	switch -- $data(passfail) {
		passed  -
		skipped -
		killed  -
		empty   {return 1}
		default {return 0}
	}
}</code></pre><p class="p">Note that if the <span class="ph FontProperty emphasis">mergefile</span> parameter
is defined and a <span class="ph filepath">mergeScript</span> is executed, or
if the <span class="ph FontProperty emphasis">triagefile</span> parameter
is defined and a <span class="ph filepath">triageScript</span> is executed,
the <span class="ph FontProperty emphasis">mergefile</span> and/or <span class="ph FontProperty emphasis">triagefile </span>paths
will be added to the internal <span class="ph FontProperty emphasis">NoDelete</span> list.
It does not matter whether the <span class="ph filepath">mergeScript</span> and/or <span class="ph filepath">triageScript</span> passed
or failed (though the pass/fail status could have a bearing on whether
the source UCDB/WLF files are deleted).</p>
<p class="p">Refer to “<a class="xref fm:HeadingAndPage" href="General_Donotdelete_id24d0b77e.html#id24d0b77e-374e-40c3-a480-217939824fa5__General_Donotdelete_id24d0b77e.xml#id24d0b77e-374e-40c3-a480-217939824fa5" title="Adds one or more files and/or directories to an internal “no delete” list. Wildcards may be included in the file/directory arguments. Relative files and/or directories are first expanded using the most recent base directory, which may also be an absolute or relative path. The base directory starts out blank. If, after the initial expansion, the resulting path is still relative, it is expanded with respect to the top-mode level of the VRM Data directory. Following this, any wildcards in the resulting absolute paths are expanded, and the resulting paths are added to the “no delete” list. Only files that actually exist at the time the DoNotDelete procedure is called are added to the file; this means an entire directory of files may be added to the “no delete” list with a single wildcard argument. In the event the wildcard expansion results in an empty list, the expanded path itself is added to the “no delete” list (just in case the wildcard is a literal file/directory name or the path represents an explicit reference to a file that does not yet exist).">DoNotDelete</a>” for additional information
on the <span class="ph filepath">DoNotDelete</span> utility procedure.</p>
<h2 class="title Subheading sectiontitle">Using the nodelete
Parameter</h2><p class="p">Files and/or directories may also be protected
from auto-deletion by including them in a <span class="ph FontProperty emphasis">nodelete</span> parameter
in the RMDB. By default, the <span class="ph FontProperty emphasis">nodelete</span> parameter
is only consulted by the <span class="ph FontProperty emphasis">deleteScript</span> pseudo-Action.</p>
<p class="p">At the time a <span class="ph FontProperty emphasis">deleteScriptpseudo</span> Action
is launched, the <span class="ph FontProperty emphasis">nodelete</span> parameter
is expanded from the point of view of the <span class="ph FontProperty emphasis">deleteScript</span> pseudo-Action
and the resulting value is treated as a space/comma separated list
of path tokens, each of which may be an absolute or relative path
including glob-style wildcards. Non-absolute paths are assumed to
be relative to the working directory that is about to be deleted.
The resulting absolute paths are passed to the <span class="ph filepath">DoNotDelete</span> procedure
prior to initiating the deletion process.</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_CollatePassfailUcdbFilesMergeTriage_id2bef435c.html" title="In the course of running a regression suite using VRM features, one ends up generating a large number of UCDB, WLF, and other log files that must be analyzed. Coverage information must be merged and/or ranked in order to get a handle on how well the entire regression suite tests the design. Error messages must be triaged in order to pinpoint the unique error messages resulting from that run. From the point of view of the VRM tool, it all boils down to collecting simulation collateral files, sorting them by test status, and making those file lists available to the user's post-regression analysis script.">Collate Pass/Fail UCDB Files for Merge and/or Triage</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "vrm_user"
                DocTitle = "Questa® Verification Run Manager User Guide"
                PageTitle = "Protecting Select Files from Deletion"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_ProtectingSelectFilesFromDeletion_idad5616f8.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® Verification Run Manager User Guide Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>