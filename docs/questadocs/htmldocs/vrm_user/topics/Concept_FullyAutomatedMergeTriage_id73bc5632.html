<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Fully Automated Merge and Triage" />
<meta name="abstract" content="This section is not so much about gathering and classifying UCDB files as making such gathering unnecessary. VRM supports full automation of coverage merge and failure triage across an entire regression suite. The user scripts have very little to do other than producing the final reports, as the following example illustrates:" />
<meta name="description" content="This section is not so much about gathering and classifying UCDB files as making such gathering unnecessary. VRM supports full automation of coverage merge and failure triage across an entire regression suite. The user scripts have very little to do other than producing the final reports, as the following example illustrates:" />
<meta name="prodname" content="Verification Run Manager User Guide" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-07-10" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="vrm_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="QuestaÂ® Verification Run Manager User Guide" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id73bc5632-568f-4aa8-b147-66d80695d400" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Fully Automated Merge and Triage</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Fully Automated Merge and Triage" />
<meta name="attributes" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id73bc5632-568f-4aa8-b147-66d80695d400">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Fully Automated Merge and Triage</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">This section
is not so much about gathering and classifying UCDB files as making
such gathering unnecessary. VRM supports full automation of coverage merge
and failure triage across an entire regression suite. The user scripts
have very little to do other than producing the final reports, as
the following example illustrates:</span>
</div>
<pre class="pre codeblock leveled"><code>&lt;rmdb version="1.1"&gt;
	&lt;runnable name="nightly" type="group"&gt;
		&lt;parameters&gt;
			...
			&lt;parameter name="ucdbfile"&gt;(%pattern%).ucdb&lt;/parameter&gt;
			&lt;parameter name="mergefile"&gt;(%DATADIR%)/merge.ucdb&lt;/parameter&gt;
			&lt;parameter name="triagefile"&gt;(%DATADIR%)/nightly.tdb&lt;/parameter&gt;
		&lt;/parameters&gt;
		...
		&lt;preScript launch="vsim"&gt;
			...
			&lt;!-- These two OPTIONAL commands are recommended for safety (see 
				 below) --&gt;
			&lt;command&gt;xml2ucdb testplan.xml (%mergefile%)&lt;/command&gt;
			&lt;command&gt;triage dbfile -name (%triagefile%) -clear&lt;/command&gt;
		&lt;/preScript&gt;
		&lt;postScript launch="vsim" mintimeout="60"&gt;
			...
		&lt;postScript launch="vsim" mintimeout="60"&gt;
			&lt;!-- Generate coverage REPORT --&gt;
			&lt;command&gt;coverage open (%mergefile%)&lt;/command&gt;
			&lt;command&gt;coverage attribute -test * -name TESTNAME -name 
				 TESTSTATUS&lt;/command&gt;
			&lt;!-- Generate triage REPORT --&gt;
			&lt;command&gt;triage report -name (%triagefile%)&lt;/command&gt;
		&lt;/postScript&gt;
	&lt;/runnable&gt;
	...
&lt;/rmdb&gt;</code></pre><p class="p">In this example, the <span class="ph FontProperty emphasis">ucdbfile</span> parameter
is used to point to the UCDB file produced by each test. In this
case, the UCDB file is local to the working directory for the test
and is named for the test itself (assume that the TESTNAME is properly
set in the test data record as in the basic example above).</p>
<p class="p">Auto-merging of coverage data is enabled by
the presence of a non-empty value in the <span class="ph FontProperty emphasis">mergefile</span> parameter.
The <span class="ph FontProperty emphasis">mergefile</span> parameter
points to the target merge file into which the coverage data is
to be merged. VRM, by default, batches UCDBs that finish at approximately
the same time so that there is never more than one merge running
concurrently against any one target merge file.</p>
<p class="p">Auto-triage of error message is enabled by
the presence of a non-empty value in the <span class="ph FontProperty emphasis">triagefile</span> parameter.
The <span class="ph FontProperty emphasis">triagefile</span> parameter
points to the triage database into which the messages of a given
test are to be added. As with auto-merge, the auto-triage function batches
UCDBs so that there is never more than one merge running concurrently
against any one triage database file.</p>
<p class="p">Both auto-merge and auto-triage call user-definable
procedures to implement the medium-level functionality. In the case
of coverage merge, the <span class="ph filepath">OkToMerge</span> (see <a class="xref fm:PageNumber" href="Concept_Oktomerge_id1759b8f1.html#id1759b8f1-3239-4a67-9500-ec740b79e740__Concept_Oktomerge_id1759b8f1.xml#id1759b8f1-3239-4a67-9500-ec740b79e740" title="It is assumed that in the majority of cases, VRM is used to launch simulations whose coverage data is accumulated and recorded in UCDB files (if this is not the case, this section may be ignored).">OkToMerge Concept</a>) procedure is called and various
data values (including the path to the UCDB file) are passed. If
this procedure returns true, the <span class="ph filepath">MergeOneUcdb</span> (see <a class="xref fm:PageNumber" href="Concept_Mergeoneucdb_id9b090089.html#id9b090089-f363-453b-b024-9ca907e7b76f__Concept_Mergeoneucdb_id9b090089.xml#id9b090089-f363-453b-b024-9ca907e7b76f" title="The MergeOneUcdb procedure is passed the path to a single UCDB file and the path to a merge file. The procedure then executes the steps necessary to merge the single UCDB into the merged UCDB file. The procedure returns nothing. The default behavior of this procedure (if not overridden by the user) is to merge the UCDB defined by the value of the ucdbfile array member into the UCDB file defined by the value of the mergefile array member. The vcover merge executable is used without any additional options. In addition, the log output of the vcover executable defaults to stdout, and is echoed to any explicitly supplied log file. This flow could be called an incremental merge flow because each UCDB is merged into the common file as it is encountered.">MergeOneUcdb Concept</a>) procedure is called to perform
the auto-merge. The default <span class="ph filepath">OkToMerge</span> implementation
returns true only if a UCDB for the test in question exists and
the test data record indicates that the test passed.</p>
<p class="p">In the case of failure triage, the <span class="ph filepath">OkToTriage</span> procedure
is called, again passing the path to the UCDB file). If this procedure
returns true, the <span class="ph filepath">TriageOneUcdb</span> procedure is
called to perform the auto-triage. The default <span class="ph filepath">OkToTriage</span> implementation
returns true only if a UCDB exists for the test in question and
the test data record indicates that the test failed (triage is primarily
a tool for analyzing failed tests).</p>
<p class="p">The xml2ucdb command in the <span class="ph FontProperty emphasis">preScript</span> is
used to âinitializeâ the target merge file. If the target merge
file does not exist when the first of the auto-merge tasks is launched,
and if there is only one UCDB to merge, that UCDB is simply copied to
the target merge file. Another approach is to âinitializeâ the target
merge file by importing a testplan into the target merge file, which
causes a UCDB to be generated at that location. Likewise, the triage
database can be initialized at the start of the regression run by
putting a triage dbfile -clear command in the <span class="ph FontProperty emphasis">preScript</span>.</p>
<p class="p">Both of these can be omitted if the <span class="ph filepath">VRMDATA</span> directory
is known to be empty. The triage utility creates the triage database
if none exists and the auto-merge function of VRM will use the first
UCDB to be merged to a given target merge file to initialize the
merge file. However, care must be taken to delete these files prior
to subsequent regression runs or the data for that run will be merged
with data left-over from previous runs.</p>
<p class="p">Besides initialization of the target files,
the only thing left for the user-specified Action scripts to do
is generate the final reports at the end of the regression run.
The commands in the <span class="ph FontProperty emphasis">postScript</span> Action
show some example report commands.</p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_CollatePassfailUcdbFilesMergeTriage_id2bef435c.html" title="In the course of running a regression suite using VRM features, one ends up generating a large number of UCDB, WLF, and other log files that must be analyzed. Coverage information must be merged and/or ranked in order to get a handle on how well the entire regression suite tests the design. Error messages must be triaged in order to pinpoint the unique error messages resulting from that run. From the point of view of the VRM tool, it all boils down to collecting simulation collateral files, sorting them by test status, and making those file lists available to the user's post-regression analysis script.">Collate Pass/Fail UCDB Files for Merge and/or Triage</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter">Â </div><div class="Footer" id="Footer">Â </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "vrm_user"
                DocTitle = "QuestaÂ® Verification Run Manager User Guide"
                PageTitle = "Fully Automated Merge and Triage"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_FullyAutomatedMergeTriage_id73bc5632.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">QuestaÂ® Verification Run Manager User GuideÂ Software Version 2020.4<br />Unpublished work. Â©Â Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>