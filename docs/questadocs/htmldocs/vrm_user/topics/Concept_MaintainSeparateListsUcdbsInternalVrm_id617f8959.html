<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Maintain Separate Lists of UCDBs Internal to VRM" />
<meta name="abstract" content="Another approach is to compile two text files, one with a list of UCDB files from failed tests and one with a list of UCDB files from passing tests. These list files can then be used in subsequent vcover merge and triage dbfile commands. The following is one way such an approach might be implemented:" />
<meta name="description" content="Another approach is to compile two text files, one with a list of UCDB files from failed tests and one with a list of UCDB files from passing tests. These list files can then be used in subsequent vcover merge and triage dbfile commands. The following is one way such an approach might be implemented:" />
<meta name="prodname" content="Verification Run Manager User Guide" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-07-10" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="vrm_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® Verification Run Manager User Guide" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id617f8959-b259-4a30-bd6b-6e9226505245" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Maintain Separate Lists of UCDBs Internal to VRM</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Maintain Separate Lists of UCDBs Internal to VRM" />
<meta name="attributes" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id617f8959-b259-4a30-bd6b-6e9226505245">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Maintain Separate Lists of UCDBs Internal
to VRM</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">Another approach
is to compile two text files, one with a list of UCDB files from
failed tests and one with a list of UCDB files from passing tests.
These list files can then be used in subsequent vcover merge and
triage dbfile commands. The following is one way such an approach
might be implemented:</span>
</div>
<pre class="pre codeblock leveled"><code>&lt;rmdb loadtcl="split-merge"&gt;
	&lt;usertcl name="split-merge"&gt;
	proc OkToMerge {userdata} {
		upvar $userdata data
   
		if {![string equal $data(ucdbfile) {}]} {
			if {[string equal $data(passfail) pass]} {
				set file [PathRelativeToScratch passed.log]
			} else {
				set file [PathRelativeToScratch failed.log]
			}

			AppendToFile $file [list $data(ucdbfile)]
		}
		return 0 ;# no automatic merge
	}
	&lt;/usertcl&gt;
	&lt;runnable name="nightly" type="group"&gt;
		&lt;parameters&gt;
			...
			&lt;parameter name="ucdbfile"&gt;(%pattern%).ucdb&lt;/parameter&gt;
		&lt;/parameters&gt;
		...
		&lt;postScript launch="vsim" mintimeout="60"&gt;
			&lt;command&gt;triage dbfile -inputs (%DATADIR%)/failed.log&lt;/command&gt;
			&lt;command&gt;triage report&lt;/command&gt;
			&lt;command&gt;vcover merge merge.ucdb -inputs 
				(%DATADIR%)/passed.log&lt;/command&gt;
		&lt;/postScript&gt;
	&lt;/runnable&gt;
	...
&lt;/rmdb&gt;</code></pre><p class="p">In this case, the <span class="ph filepath">OkToMerge</span> (see <a class="xref fm:PageNumber" href="Concept_Oktomerge_id1759b8f1.html#id1759b8f1-3239-4a67-9500-ec740b79e740__Concept_Oktomerge_id1759b8f1.xml#id1759b8f1-3239-4a67-9500-ec740b79e740" title="It is assumed that in the majority of cases, VRM is used to launch simulations whose coverage data is accumulated and recorded in UCDB files (if this is not the case, this section may be ignored).">OkToMerge Concept</a>) procedure has been overridden.
It always returns a false value that disables all automatic merging
within the vrun process. Instead, <span class="ph filepath">OkToMerge</span> adds
the path to the UCDB file for the test at hand into one of two external
files. The utility function <span class="ph filepath">AppendToFile</span> (see <a class="xref fm:PageNumber" href="General_Appendtofile_id7ef5056e.html#id7ef5056e-48e9-433b-937a-1470c0d65c32__General_Appendtofile_id7ef5056e.xml#id7ef5056e-48e9-433b-937a-1470c0d65c32" title="Appends the specified lines to the specified file, preserving any existing content. This procedure calls VerifySafeTarget to ensure that the file to be written lies within a part of the directory tree to which VRM has write authority.">AppendToFile</a>) is used to add the UCDB to the
end of the appropriate list file. The list files are then passed
to the vcover merge and triage dbfile commands via their respective
-inputs option.</p>
<p class="p">The advantage of this approach is that it is
easy to implement and the file lists can be used for other purposes,
like reports or an e-mail notification. The disadvantage is that
both the vcover merge and the triage dbfile commands must be run
at the end of the regression run, after all the tests have completed.</p>
<p class="p">A variation on this idea stores the lists in
TCL variables as follows:</p>
<pre class="pre codeblock leveled"><code>&lt;rmdb loadtcl="split-merge"&gt;
	&lt;usertcl name="split-merge"&gt;
	proc OkToMerge {userdata} {
		upvar $userdata data

		variable passlist
		variable faillist

		if {![string equal $data(ucdbfile) {}]} {
			if {[string equal $data(passfail) pass]} {
			lappend passlist $data(ucdbfile)
			} else {
			lappend faillist $data(ucdbfile)
			}
		}
		return 0 ;# no automatic merge
	}
	&lt;/usertcl&gt;
	&lt;runnable name="nightly" type="group"&gt;
		&lt;parameters&gt;
			...
			&lt;parameter name="ucdbfile"&gt;(%pattern%).ucdb&lt;/parameter&gt;
			&lt;parameter name="passlist" type="tcl"&gt;$passlist&lt;/parameter&gt;
			&lt;parameter name="faillist" type="tcl"&gt;$faillist&lt;/parameter&gt;
		&lt;/parameters&gt;
		...
		&lt;postScript launch="vsim" mintimeout="60"&gt;
			&lt;command&gt;triage dbfile (%faillist%)&lt;/command&gt;
			&lt;command&gt;triage report&lt;/command&gt;
			&lt;command&gt;vcover merge merge.ucdb (%passlist%)&lt;/command&gt;
		&lt;/postScript&gt;
	&lt;/runnable&gt;
	 ...
&lt;/rmdb&gt;</code></pre><p class="p">In this case, two TCL-based parameters are
used to retrieve the lists when the <span class="ph FontProperty emphasis">postScript</span> needs
them. The lists of UCDB files are added to the vcover merge and
triage dbfile commands as appropriate. The advantage of this implementation
over the prior one is that no extra files are created (making the
performance marginally faster). It has the same disadvantage as
before in that the vcover merge and triage dbfile commands must
be run after all the tests have completed.</p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_CollatePassfailUcdbFilesMergeTriage_id2bef435c.html" title="In the course of running a regression suite using VRM features, one ends up generating a large number of UCDB, WLF, and other log files that must be analyzed. Coverage information must be merged and/or ranked in order to get a handle on how well the entire regression suite tests the design. Error messages must be triaged in order to pinpoint the unique error messages resulting from that run. From the point of view of the VRM tool, it all boils down to collecting simulation collateral files, sorting them by test status, and making those file lists available to the user's post-regression analysis script.">Collate Pass/Fail UCDB Files for Merge and/or Triage</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "vrm_user"
                DocTitle = "Questa® Verification Run Manager User Guide"
                PageTitle = "Maintain Separate Lists of UCDBs Internal to VRM"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_MaintainSeparateListsUcdbsInternalVrm_id617f8959.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® Verification Run Manager User Guide Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>