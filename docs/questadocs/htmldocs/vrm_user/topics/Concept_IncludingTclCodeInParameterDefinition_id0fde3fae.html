<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Including TCL Code in a Parameter Definition" />
<meta name="abstract" content="By default, parameter values are used as is, exactly as they appear in the parameter definition (after external entities (like &gt;) are converted back to the characters they represent). It is possible to define a parameter value as a TCL expression that undergoes the usual variable/command substitution within the TCL interpreter each time the parameter is expanded. Note that this is TCL substitution, not evaluation. In order to execute TCL code as part of the parameter expansion, the code needs to be defined as a procedure and command substitution used to execute the procedure." />
<meta name="description" content="By default, parameter values are used as is, exactly as they appear in the parameter definition (after external entities (like &gt;) are converted back to the characters they represent). It is possible to define a parameter value as a TCL expression that undergoes the usual variable/command substitution within the TCL interpreter each time the parameter is expanded. Note that this is TCL substitution, not evaluation. In order to execute TCL code as part of the parameter expansion, the code needs to be defined as a procedure and command substitution used to execute the procedure." />
<meta name="prodname" content="Verification Run Manager User Guide" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-07-10" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="vrm_user" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="5.3" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® Verification Run Manager User Guide" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id0fde3fae-3f89-4a5d-8dc8-a6c7da021a8b" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Including TCL Code in a Parameter Definition</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Including TCL Code in a Parameter Definition" />
<meta name="attributes" content="product.version.2020.4,doc.type.documentation.user,doc.type.documentation.ref,product.id.P10593," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id0fde3fae-3f89-4a5d-8dc8-a6c7da021a8b">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Including TCL Code in a Parameter Definition</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">By default,
parameter values are used as is, exactly as they appear in the parameter
definition (after external entities (like &gt;) are converted back
to the characters they represent). It is possible to define a parameter
value as a TCL expression that undergoes the usual variable/command
substitution within the TCL interpreter each time the parameter
is expanded. Note that this is TCL substitution, not evaluation.
In order to execute TCL code as part of the parameter expansion,
the code needs to be defined as a procedure and command substitution
used to execute the procedure.</span>
</div>
<p class="p">In order to specify that TCL substitution
should be preformed on a parameter value, a type attribute whose
value is <span class="ph FontProperty emphasis">tcl</span> must
be attached to the parameter element. For example, this functionality
can be used to initialize a parameter value with the value of an
environment variable as follows:</p>
<pre class="pre codeblock leveled"><code>&lt;parameter type="tcl"&gt;$::env(USER)&lt;/parameter&gt;
</code></pre><p class="p">The TCL expansion of this parameter results
in a value that equals the value in the USER environment variable
(on most Posix-like systems, that is the username of the user who
invoked VRM). This expansion takes place in the same namespace as
that used for user-defined procedures. Therefore, if a procedure
is needed to compute the value of a parameter, that procedure can
be defined in a <span class="ph FontProperty emphasis">usertcl</span> method
in the RMDB database or loaded from the command line via the -loadtcl
option. For example, the following computes the random seeds based
on the time of day:</p>
<pre class="pre codeblock leveled"><code>&lt;rmdb loadtcl="getseeds"&gt;
	&lt;usertcl name="getseeds"&gt;
	proc getSeeds {} {
		if {[clock format [clock seconds] -format %H] &gt; 20} {
			return [list 10 20 30 40 50 60]
		} else {
			return [list 10 20 30]
		}
	}
	&lt;/usertcl&gt;
	...
	&lt;runnable name="nightly" type="group"&gt;
		&lt;parameters&gt;
			&lt;parameter name="seeds" type="tcl"&gt;[getSeeds]&lt;/parameter&gt;
		&lt;/parameters&gt;
		&lt;members&gt;
			&lt;member&gt;test&lt;/member&gt;
		&lt;/members&gt;
		...
	&lt;/runnable&gt;
	&lt;runnable name="test" type="task" foreach="(%seeds%)"&gt;
		...
	&lt;/runnable&gt;
	...
&lt;/rmdb&gt;
</code></pre><p class="p">The <span class="ph FontProperty emphasis">foreach</span> attribute
contains a reference to the <span class="ph FontProperty emphasis">seeds</span> parameter.
This parameter, when expanded, resolves to the string [getSeeds].
The TCL substitution causes the getSeeds command (which can be found in
the auto-loaded <span class="ph FontProperty emphasis">getseeds</span> <span class="ph FontProperty emphasis">usertcl </span>element)
to be executed which, in this case, picks up one of two lists of
seeds selected based on the time of day (presumably the user does
not want to waste compute resources during the working day by running
all their favorite seeds).</p>
<p class="p">Caution is advised when using TCL code in parameters
(or in the <span class="ph FontProperty emphasis">if=/=unless</span> attributes).
The parameter value string, after expanding any nested parameter
references, is passed to the TCL subst command for expansion. If
any errors occur as the TCL interpreter parses the string, an error
message is emitted and the parameter behaves as if it were undefined
(at that point, any applicable inheritance search path is still
followed).</p>
<p class="p">In the case of the <span class="ph FontProperty emphasis">if</span> and <span class="ph FontProperty emphasis">unless</span> attributes,
the parameter-expanded attribute value string is passed to the TCL
eval command. If any errors occur as the TCL interpreter parses
and attempts to evaluate the value of the string, an error message
is emitted and the attribute behaves as if it had not been specified
(that is, an <span class="ph FontProperty emphasis">if</span> attribute
behaves as if the errant expression evaluated to true and an <span class="ph FontProperty emphasis">unless</span> attribute
behaves as if the errant expression evaluated to false).</p>
<p class="p">Using TCL-expanded parameters alters the expansion
algorithm slightly. Rather than substituting the parameter value
(as is) in place of the parameter reference and iteratively searching
for new parameter references that may have appeared as a result
of the substitution, a TCL-expanded parameter is completely parameter-expanded
as a unit before being substituted into the original string. What
was an iterative process is now recursive. For most non-complex applications,
this makes no difference in the apparent behavior of the resolution
process. For complex cases, it can make a difference.</p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_ParametersParameterExpansion_id68da1844.html" title="Each Runnable definition (that is, each runnable element) can include a list of zero or more parameter element definitions. A parameter is nothing more than a name/value pair that allows multiple Tasks to share the same execution script (or multiple Groups to share the same Task) by providing unique per-Group or per-Task values to be used in the scripts.">Parameters and Parameter Expansion</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "vrm_user"
                DocTitle = "Questa® Verification Run Manager User Guide"
                PageTitle = "Including TCL Code in a Parameter Definition"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_IncludingTclCodeInParameterDefinition_id0fde3fae.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® Verification Run Manager User Guide Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>