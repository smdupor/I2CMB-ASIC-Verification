<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Analyzing Power Aware Check Assertions" />
<meta name="abstract" content="Recall that the second time the PD_mem_ctrl domain is power cycled, the test bench does not enable isolation for the PD_mem_ctrl domain outputs. In the wave window, starting at about 167us, you will notice that the address, write enable, and chip enable inputs to the SRAM models (SRAM #1 signal group) are all unknown as a result of the unisolated outputs from the PD_mem_ctrl domain, which have propagated to the SRAMs. This propagation of unknown values is a problem." />
<meta name="description" content="Recall that the second time the PD_mem_ctrl domain is power cycled, the test bench does not enable isolation for the PD_mem_ctrl domain outputs. In the wave window, starting at about 167us, you will notice that the address, write enable, and chip enable inputs to the SRAM models (SRAM #1 signal group) are all unknown as a result of the unisolated outputs from the PD_mem_ctrl domain, which have propagated to the SRAMs. This propagation of unknown values is a problem." />
<meta name="prodname" content="Questa SIM Tutorial" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-03-05" />
<meta name="VariantPrefix" content="Q" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for Questa SV/AFV" />
<meta name="SourceHandle" content="questa_sim_tut" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® SIM Tutorial" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.040,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idb90ca687-37ca-46a9-b1bf-a4d2a0ab9b43" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Analyzing Power Aware Check Assertions</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Analyzing Power Aware Check Assertions" />
<meta name="attributes" content="product.version.2020.4,sort.order.040,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="idb90ca687-37ca-46a9-b1bf-a4d2a0ab9b43">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Analyzing
Power Aware Check Assertions</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><p class="shortdesc">Recall that the
second time the PD_mem_ctrl domain is power cycled, the test bench
does not enable isolation for the PD_mem_ctrl domain outputs. In
the wave window, starting at about 167us, you will notice that the
address, write enable, and chip enable inputs to the SRAM models
(SRAM #1 signal group) are all unknown as a result of the unisolated
outputs from the PD_mem_ctrl domain, which have propagated to the
SRAMs. This propagation of unknown values is a problem. </p>
<p class="p">The third time the domain is power cycled
the testbench does not follow the proper retention protocol by gating
off the clock to the retention elements. Notice that after the third
power cycle period, which ends at arund183us, the memory controller
addr output remains unknown after power has be restored – this also
is a problem.</p>
<p class="p">Note that the testbench for the tutorial has
been specifically coded to cause these power control sequence errors
as a way to illustrate the capability of a few specific power aware
assertion checks. Further, Power Aware simulation can automatically
generate over 20 various power-specific checks that can detect many
types of subtle power-related errors that could otherwise go undetected
or require you to manually write assertions to identify them. Remember
that during the UPF processing step, all isolation and retention
checks were enabled using the ‑pa_checks=i+r argument values.</p>
<div class="note tip"><span class="tiptitle">Tip</span> <p class="p">While all isolation and retention checks have
been enabled in this tutorial, not all Power Aware assertion checks
are applicable for every design. When you run a Power Aware simulation,
you can enable individual isolation/retention checks by using specific
isolation or retention values for -pa_checks (such as ifc or rpo).
You can also control any enabled Power Aware checks using the pa
msg command.</p>
</div>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="idb90ca687-37ca-46a9-b1bf-a4d2a0ab9b43__id6ca0e88d-2cbc-4ac2-b304-f41a35a78c5f"><span class="ph cmd">Select the <span class="ph menucascade"><span class="ph uicontrol">View</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">Message Viewer</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">sim</span></span> menu item to open the Message
Viewer window.</span></li>
<li class="li step stepexpand" id="idb90ca687-37ca-46a9-b1bf-a4d2a0ab9b43__id89afc197-c0f5-4269-9368-9788a736cf45"><span class="ph cmd">Right- click in the Message
Viewer window and select <span class="ph menucascade"><span class="ph uicontrol">Hierarchy Configurations</span><abbr title="and then"> &gt; </abbr><span class="ph uicontrol">CatSevMsg</span></span> to change the default
view. </span></li>
<li class="li step stepexpand" id="idb90ca687-37ca-46a9-b1bf-a4d2a0ab9b43__id56bcada0-7586-474b-a479-c37aedf100df"><span class="ph cmd">Expand the QPA_ISO_EN_PSO
category followed by the Errors severity to see the three error
messages as shown in <a class="xref fm:Figure" href="#idb90ca687-37ca-46a9-b1bf-a4d2a0ab9b43__id4c70f98b-42bd-4977-8448-1a527191e714">Figure 1</a>. There is an error message for each
un-isolated power domain ports</span><div class="itemgroup info StepInfo"><p class="p">Note that the default categorization
of messages in the Message Viewer according to severity.</p>
<div class="fig fignone" id="idb90ca687-37ca-46a9-b1bf-a4d2a0ab9b43__id4c70f98b-42bd-4977-8448-1a527191e714"><span class="figcap"><span class="fig--title-label">Figure 1. </span>Message Viewer: Isolation
Not Enabled Errors</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:100" src="../graphics/pa_msg_viewer_errors.png" /></div><br /></div>
</div></li>
<li class="li step stepexpand" id="idb90ca687-37ca-46a9-b1bf-a4d2a0ab9b43__id2c888766-6333-4647-8100-fc437dbb576e"><span class="ph cmd">Double-click either of the
following in the Message Viewer window: </span><div class="itemgroup info StepInfo"><ul class="ul"><li class="li" id="idb90ca687-37ca-46a9-b1bf-a4d2a0ab9b43__idd7415a47-666e-4a02-a08e-a05358e30073"><p class="p">The
167715ns value in the Time column — this opens the wave window (similar
to <a class="xref fm:Figure" href="#idb90ca687-37ca-46a9-b1bf-a4d2a0ab9b43__idc4560be6-c072-467e-8712-81f3d125c358">Figure 3</a>) with the active cursor
placed at that time (167.715us). </p>
</li>
<li class="li" id="idb90ca687-37ca-46a9-b1bf-a4d2a0ab9b43__id61e8c4ca-cf1b-4159-9c65-efbb28e747f2"><p class="p">The name of
the UPF file in the File Info column — this opens the UPF file showing the
line where the isolation strategy is defined.</p>
</li>
</ul>
<div class="fig fignone" id="idb90ca687-37ca-46a9-b1bf-a4d2a0ab9b43__id09eb6a26-9df1-4bdd-b725-c7c24c3b511f"><span class="figcap"><span class="fig--title-label">Figure 2. </span>Isolation
Strategy Defined in UPF File</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:96" src="../graphics/iso_strategy_defn_in_upf.png" /></div><br /></div>
</div></li>
<li class="li step stepexpand" id="idb90ca687-37ca-46a9-b1bf-a4d2a0ab9b43__id7185d88a-0710-4a92-a7f8-3830e42df17b"><span class="ph cmd">To debug why the memory controller’s
addr register value remains unknown after the third time the PD_mem_ctrl
domain is power cycled for retention, do the following in the Message
Viewer: </span><ol type="a" class="ol substeps"><li class="li substep" id="idb90ca687-37ca-46a9-b1bf-a4d2a0ab9b43__id022f13c4-f552-41fd-9653-c8f693902637"><span class="ph cmd">Expand
the QPA_RET_RTC_TOGGLE category.</span></li>
</ol>
<ol type="a" class="ol substeps"><li class="li substep" id="idb90ca687-37ca-46a9-b1bf-a4d2a0ab9b43__id2bde237f-9a0e-4d8d-ad06-6f97b7b628c8"><span class="ph cmd">Double-click
the 177798ns time value in the Time column for the first QPA_RET_RTC_TOGGLE
error message. This will display the wave window as shown in <a class="xref fm:Figure" href="#idb90ca687-37ca-46a9-b1bf-a4d2a0ab9b43__idc4560be6-c072-467e-8712-81f3d125c358">Figure 3</a>. </span></li>
</ol>
</li>
<li class="li step stepexpand" id="idb90ca687-37ca-46a9-b1bf-a4d2a0ab9b43__idb51e3b55-fff3-440f-a5ad-8260845964eb"><span class="ph cmd">In the wave
window, zoom in around the cursor position and expand the addr signal,
as needed. Note that the retained 8’h4e addr value shown by the
addr_retention_1 signal becomes unknown at the first rising edge
of the clk signal after the PD_mem_ctrl domain is corrupted, as
indicated by the pa_store_x event. </span><div class="itemgroup info StepInfo"><p class="p">This retained value is lost because the retention
condition, specified in the mem_ctrl_ret retention strategy, is
violated. </p>
<div class="fig fignone" id="idb90ca687-37ca-46a9-b1bf-a4d2a0ab9b43__idc4560be6-c072-467e-8712-81f3d125c358"><span class="figcap"><span class="fig--title-label">Figure 3. </span>Retention Value Over-written</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:100" src="../graphics/pa_ret_value_overwritten.png" /></div><br /></div>
</div></li>
<li class="li step stepexpand" id="idb90ca687-37ca-46a9-b1bf-a4d2a0ab9b43__ida0b8ff08-ed7c-446d-b4ec-33de07a29bc2"><span class="ph cmd">To view
the definition of this retention condition, return to the Message
Viewer and double-click the mem_ctrl_config.upf file indicated in
the File Info column, which should display the following: </span><div class="itemgroup info StepInfo"><pre class="pre codeblock"><code>#-----------------------------------------------------------------
# Setup retention strategy for memory controller domain
#-----------------------------------------------------------------
set_retention mem_ctrl_ret \
    -domain PD_mem_ctrl \
    -retention_supply_set PD_mem_ctrl.retain_ss \
    -retention_condition {(mc0/clk == 1'b0)} \
    -elements {mem_ctrl_ret_list} \
    -save_signal {mc_save high} \
    -restore_signal {mc_restore low}</code></pre></div></li>
<li class="li step stepexpand" id="idb90ca687-37ca-46a9-b1bf-a4d2a0ab9b43__id485074dc-3c0f-4cb8-9b89-227a00a6eaf4"><span class="ph cmd">Finish and exit this simulation
by typing the following command in the Transcript window </span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>quit ‑sim</code></pre></div></li>
</ol>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_PowerAwareRtlSimulation1_id92187ecc.html" title="The first simulation involves the constraint (mem_ctrl_const.upf) and configuration (mem_ctrl_config.upf) UPF files.">Power Aware RTL Simulation 1</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "questa_sim_tut"
                DocTitle = "Questa® SIM Tutorial"
                PageTitle = "Analyzing Power Aware Check Assertions"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_AnalyzingPowerAwareCheckAssertions_idb90ca687.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® SIM Tutorial Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>