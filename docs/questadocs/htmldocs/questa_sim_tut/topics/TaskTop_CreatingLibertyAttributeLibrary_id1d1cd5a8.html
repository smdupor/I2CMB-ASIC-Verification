<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="TaskTopic" />
<meta name="DC.Title" content="Creating a Liberty Attribute Library" />
<meta name="abstract" content="You can specify a list of Liberty files as an argument to the vopt command with the ‑pa_libertyfiles= option to be processed at the same time as any UPF files." />
<meta name="description" content="You can specify a list of Liberty files as an argument to the vopt command with the ‑pa_libertyfiles= option to be processed at the same time as any UPF files." />
<meta name="prodname" content="Questa SIM Tutorial" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-03-05" />
<meta name="VariantPrefix" content="Q" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for Questa SV/AFV" />
<meta name="SourceHandle" content="questa_sim_tut" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="questa_sim_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Questa® SIM Tutorial" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.040,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="_bk_questa_sim" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="id1d1cd5a8-2a9c-4971-804c-541ee168a4c1" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Creating a Liberty Attribute Library</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Creating a Liberty Attribute Library" />
<meta name="attributes" content="product.version.2020.4,sort.order.040,doc.type.documentation.user,product.id.P10593,product.id.P11633,product.id.P11632," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="id1d1cd5a8-2a9c-4971-804c-541ee168a4c1">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Creating
a Liberty Attribute Library</h1>
<div class="body taskbody TaskBody"><div class="abstract TaskAbstract"><p class="shortdesc">You can specify
a list of Liberty files as an argument to the vopt command with
the ‑pa_libertyfiles= option to be processed at the same time as
any UPF files. </p>
<p class="p">Because Liberty files typically do not change
and can be quite large in size, spending time to reprocessing the
same Liberty files each time <a class="xref Link" href="../../questa_sim_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'vopt', 'questa_sim_ref'); return false;">vopt</a> is
run can be avoided by creating a Liberty attribute library in a
separate vopt command. You can then load the Liberty attribute library with
vopt when processing the UPF file(s).</p>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand" id="id1d1cd5a8-2a9c-4971-804c-541ee168a4c1__idd0bfdf2c-7bd2-4c6f-81db-0f40e1850d80"><span class="ph cmd">Invoke <span class="ph fmvar:ProductName">Questa SIM</span> (if necessary) by either typing <a class="xref Link" href="../../questa_sim_ref/nsmgchelp.htm" target="_top" onclick="oT('STD_FM11', 'vsim', 'questa_sim_ref'); return false;">vsim</a> at
a Linux shell prompt or by double-clicking on the <span class="ph fmvar:ProductName">Questa SIM</span> icon in Windows.</span></li>
<li class="li step stepexpand" id="id1d1cd5a8-2a9c-4971-804c-541ee168a4c1__id7f0085f7-2661-4f8b-b857-b5652ddbfbe1"><span class="ph cmd">Create the Liberty attribute
library by executing the command below.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>do ./Questa/scripts/tkgui/liberty_gls.do</code></pre><p class="p">This script runs the vopt command
with the following arguments: </p>
<pre class="pre codeblock leveled"><code>-pa_libertyfiles= ./Libraries/isolation/isolation.lib,./Libraries/retention/retention.lib,\ 
./Libraries/level_shift/level_shift.lib \
-pa_dumplibertydb=qpa_liberty_lib \</code></pre><p class="p">Note that the list of Liberty
files must not contain any spaces. Also you can use any name for
the Liberty attribute library created by the -pa_dumplibertydb=
option </p>
</div></li>
<li class="li step stepexpand" id="id1d1cd5a8-2a9c-4971-804c-541ee168a4c1__id670ae535-a50f-4b0a-9066-1dda5b0bcc09"><span class="ph cmd">Compile the gate-level design
into a new work library.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>do ./Questa/scripts/compile_gls.do</code></pre></div></li>
<li class="li step stepexpand" id="id1d1cd5a8-2a9c-4971-804c-541ee168a4c1__id4d3b45e5-aba3-4f4e-9467-26ef417e3689"><span class="ph cmd">Process the UPF file for the
GLS netlist.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>do ./Questa/scripts/tkgui/analyze_gls.do</code></pre><p class="p">This script contains many of
the same power aware and UPF options as those used when analyzing
the UPF for the RTL design. The two exceptions are the -pa_loadlibertydb option
and the -pa_gls option. Obviously the -pa_loadlibertydb options
loads the extracted Liberty attribute library while the -pa_gls
option instructs Questa PASim not to insert any power management
cells into the design. The -pa_gls option should not be used when
the design has some but not all of the power management cells inserted.</p>
</div></li>
<li class="li step stepexpand" id="id1d1cd5a8-2a9c-4971-804c-541ee168a4c1__idd2c68cf5-0d19-4e09-8ee5-dfecef690ba4"><span class="ph cmd">Open the report.pa.txt file.
In this report file you will see the list of -instance annotated isolation
cells as well as “Signals with Retention cells” and “Signals with
Level Shifter Cells”. All these cell instances have been detected
via the attributes extracted from the Liberty files into the qpa_liberty_library.</span></li>
<li class="li step stepexpand" id="id1d1cd5a8-2a9c-4971-804c-541ee168a4c1__idd8f2d593-4a54-4728-ac10-a50a72bb6e2d"><span class="ph cmd">Open the interp_gls.upf file
from the current directory. This file was written as a result of
the save_upf command at the bottom of the UPF/compile.upf file.
Search for the word “instance” in the file and you will see that
Questa has interpreted the original UPF file to include the -instance
annotation for all ISO/RET/LS strategies in the UPF file.</span><div class="itemgroup info StepInfo"><p class="p">It is important to note that
Questa assumes that all the -instance annotated power management
cells identified in a design contain all the necessary functionality
required to simulate properly. Unfortunately, this assumption does
not hold true for all power management cells, especially retention
cells. If a retention cell does not contain the necessary internal
retention logic, then Questa PASim will only add it if the retention cell
detection capability is first disabled by using the vopt option.</p>
<pre class="pre codeblock leveled"><code>-pa_disable=detectret</code></pre></div></li>
<li class="li step stepexpand" id="id1d1cd5a8-2a9c-4971-804c-541ee168a4c1__idd9dc5b5a-96eb-455a-a704-2f3245a44050"><span class="ph cmd">In this gate-level design,
the DFF_RET cells do not contain the retention behavior required
to simulate properly. Execute the command below to reprocess the
UPF file with the retention detection capability disabled.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>do ./Questa/scripts/tkgui/analyze_gls_wret.do</code></pre></div></li>
<li class="li step stepexpand" id="id1d1cd5a8-2a9c-4971-804c-541ee168a4c1__idf10d8487-f5c4-44c8-bbd6-e74b26c012d4"><span class="ph cmd">Run the gate-level power aware
simulation typing the command below in the transcript window</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>do ./Questa/scripts/tkgui/doit_imp.do</code></pre></div></li>
<li class="li step stepexpand" id="id1d1cd5a8-2a9c-4971-804c-541ee168a4c1__ide315b9c9-cd74-4176-a876-cebc1cf28b1d"><span class="ph cmd">Look in the Wave window and
you will see a view as shown in <a class="xref fm:Figure" href="#id1d1cd5a8-2a9c-4971-804c-541ee168a4c1__id316c5fa8-ce23-4584-ae03-8f77b027a634">Figure 1</a>. While the same three Memory controller
power cycles occur, notice that when the powered up the second time,
the memory controller addr, ceb, and web ports quickly go from their restored
value to unknown in just a few clock cycles. The unknown values
on these ports are a direct result of not asserting the isolation
enable, allowing the X value on the do_acpt port to propagate to
async_bridge instance in the PD_intl domain which in-turn caused
the do_rdy input from the async_bridge to be unknown after power
up. The do_rdy X value feeds directly into present state registers
that in turn, caused the unknown values on these three ports. </span><div class="itemgroup info StepInfo"><div class="fig fignone" id="id1d1cd5a8-2a9c-4971-804c-541ee168a4c1__id316c5fa8-ce23-4584-ae03-8f77b027a634"><span class="figcap"><span class="fig--title-label">Figure 1. </span>Gate-level Power Aware
Simulation</span><br /><div class="imagecenter"><img class="image imagecenter fmdpi:100" src="../graphics/pa_gls_wave_win.png" /></div><br /></div>
</div></li>
<li class="li step stepexpand" id="id1d1cd5a8-2a9c-4971-804c-541ee168a4c1__id620166a9-e13c-4082-9b5b-c0e35e1e755d"><span class="ph cmd">If you compare the screen
shot with the same one for the <a class="xref fm:Figure" href="TaskTop_ExploringGuiDebugFeatures_id21f36de1.html#id21f36de1-9890-43e7-b904-e5d84065ed83__ide92777fb-c82e-434f-9a65-0796ac4414c4">Figure 3</a>, you will notice that the corruption
highlighting is also not present on the memory controller ceb, web,
and addr output ports. In a gate-level power aware simulation corruption
highlighting is only visible when looking directly at the output
port of a cell. </span></li>
<li class="li step stepexpand" id="id1d1cd5a8-2a9c-4971-804c-541ee168a4c1__id15269de4-ab97-4b69-be8d-23e1c9cf2857"><span class="ph cmd">In the sim tab, expand the
dut/mc0 instance and then select the U3 instance. Press ctrl+w to
add the cell’s ports to the bottom of the wave window. The corruption
highlighting will be visible on the Z output port of the cell.</span></li>
<li class="li step stepexpand" id="id1d1cd5a8-2a9c-4971-804c-541ee168a4c1__idd4981fb0-70a3-4115-90f6-770bc8a7719a"><span class="ph cmd">This concludes the power aware
GLS simulation and the tutorial. Close the GUI by typing the command
below in the transcript.</span><div class="itemgroup info StepInfo"><pre class="pre codeblock leveled"><code>	quit -f</code></pre></div></li>
</ol>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_LibertyFilesPowerAwareSimulations_idc9a4e484.html" title="The role that Liberty files play in power aware simulations varies widely. As mentioned previously, one important use of Liberty files is to identify the existence of power management cells which are already present in a design. For designs containing pre-existing power management cells, it is typically required that they be detected in order to prevent the insertion of duplicate power management cells.">Liberty Files and Power Aware Simulations</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "questa_sim_tut"
                DocTitle = "Questa® SIM Tutorial"
                PageTitle = "Creating a Liberty Attribute Library"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/TaskTop_CreatingLibertyAttributeLibrary_id1d1cd5a8.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Questa® SIM Tutorial Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>