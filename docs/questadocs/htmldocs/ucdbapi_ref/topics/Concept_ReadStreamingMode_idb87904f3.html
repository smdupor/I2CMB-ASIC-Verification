<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Read-Streaming Mode" />
<meta name="abstract" content="Read-streaming mode is a callback-based traversal of a UCDB as laid out on disk. It has the advantage of reducing memory overhead, as the UCDB is never fully loaded into memory." />
<meta name="description" content="Read-streaming mode is a callback-based traversal of a UCDB as laid out on disk. It has the advantage of reducing memory overhead, as the UCDB is never fully loaded into memory." />
<meta name="prodname" content="UCDB API Reference" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-07-10" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="ucdbapi_ref" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="mgc_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="UCDB API Reference" />
<meta name="CSHelp" content="none" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.ref,product.id.P10593,product.version.2020.4" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idb87904f3-1166-4819-b46d-68897417809b" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Read-Streaming Mode</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Read-Streaming Mode" />
<meta name="attributes" content="doc.type.documentation.ref,product.id.P10593,product.version.2020.4" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="idb87904f3-1166-4819-b46d-68897417809b">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Read-Streaming
Mode</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">Read-streaming
mode is a callback-based traversal of a UCDB as laid out on disk.
It has the advantage of reducing memory overhead, as the UCDB is never
fully loaded into memory.</span>
</div>
<p class="p">The
read-streaming disk layout on disk is as follows:</p>
<ul class="ul"><li class="li" id="idb87904f3-1166-4819-b46d-68897417809b__id611190d8-fc56-48bb-a47d-7076acb78c2b"><p class="p">Header with database version and other
header information.</p>
</li>
<li class="li" id="idb87904f3-1166-4819-b46d-68897417809b__idaef07d81-1f36-4adb-aa69-e7d4b78b5be1"><p class="p">Global UCDB attributes can appear at
any time at the top-level, but are ordinarily written as early as
possible.</p>
</li>
<li class="li" id="idb87904f3-1166-4819-b46d-68897417809b__id4895f1da-6011-4090-b825-1808c90f68d7"><p class="p">Test data records.</p>
</li>
<li class="li" id="idb87904f3-1166-4819-b46d-68897417809b__id37e4050f-b859-4b0d-9201-5a55e03f8be5"><p class="p">Design units are written before instances
of them. </p>
</li>
<li class="li" id="idb87904f3-1166-4819-b46d-68897417809b__id076a8ce8-bb83-47ee-baa0-edf8b25fc2f2"><p class="p">Scopes (design units, instances, or any
coverage scope) are written in a nested fashion: meaning that the
start of the scope is distinct from the end of the scope. Scopes
that start and end within another's start and end are children scopes.
This is how the parent-child relationships are recorded. The start
of the parent is always written before the children. The termination
of the parent scope “pops” the current scope back to its parent.</p>
</li>
<li class="li" id="idb87904f3-1166-4819-b46d-68897417809b__id914c8fea-5055-4781-93a4-cc6f47de7237"><p class="p">Coveritems are written immediately after
the parent scope.</p>
</li>
<li class="li" id="idb87904f3-1166-4819-b46d-68897417809b__ide750db8c-82a7-4754-b3be-585f82ba26ca"><p class="p">Attributes and tags are written after
the initial header for the scope or coveritem.</p>
</li>
<li class="li" id="idb87904f3-1166-4819-b46d-68897417809b__id75c93ff0-fd62-4f42-9b57-eb97ff9a1a92"><p class="p">Tail with summary data.</p>
</li>
</ul>
<p class="p">The tail is loaded at the same time as the
header, which enables ucdb_GetCoverageSummary() to work.</p>
<p class="p">The rules for read-streaming mode are relatively
simple. In general, available data follows the order in which data
is laid out on disk. The attributes, flags, and so on, are complete with
the read object. There is no access to child scopes or coveritems
at the time a scope is read. The implementation maintains the following
data at all times:</p>
<ul class="ul"><li class="li" id="idb87904f3-1166-4819-b46d-68897417809b__id74967299-f9b2-483e-95e7-0bfcbaf8fe44"><p class="p">All ancestors of a given scope or coveritem</p>
</li>
<li class="li" id="idb87904f3-1166-4819-b46d-68897417809b__id6bb94dbe-6621-4114-96d8-32f15fd22508"><p class="p">All design units</p>
</li>
<li class="li" id="idb87904f3-1166-4819-b46d-68897417809b__id5e191765-0dc4-4b93-9138-ba23d5aae28d"><p class="p">All global UCDB attributes and other
data global to the UCDB</p>
</li>
<li class="li" id="idb87904f3-1166-4819-b46d-68897417809b__idcb648e22-8d06-44d4-8e9c-a460f0e64bbd"><p class="p">All test data records</p>
</li>
<li class="li" id="idb87904f3-1166-4819-b46d-68897417809b__idc1f4d3a5-c0f0-4a83-bb5e-f4c57df88238"><p class="p">The summary data used by ucdb_GetCoverage(),
ucdb_GetStatistics(), and various other functions described in the
API reference as pertaining to global coverage statistics</p>
</li>
</ul>
<p class="p">However, the inaccessibility of children means
that any descendant nodes, or any descendants of ancestors (what
you might informally call “cousin nodes” or “uncle nodes”) are not
available.</p>
<p class="p">Read-streaming mode maintains a relatively
small window into the data, that progresses through the file, with
some global data available generally.</p>
<p class="p">There are some other limitations, all of which
relate to the fact that children are not available except exactly
when they are encountered within the streaming window:</p>
<ul class="ul"><li class="li" id="idb87904f3-1166-4819-b46d-68897417809b__id0407448d-f959-4168-9ac4-f78d93f29d09"><p class="p">Because the test plan tree is implemented
with tags, there is no way to know when reading a test plan node
what are the other nodes sharing the same tag. Test plan trees are
essentially unusable in read-streaming mode, although you can also build
the associations yourself, you could.</p>
</li>
<li class="li" id="idb87904f3-1166-4819-b46d-68897417809b__idcd092a9b-e184-4143-bc1f-8dbb3825c0cc"><p class="p">The functions like ucdb_PathCallBack()
that require searching the database cannot work.</p>
</li>
<li class="li" id="idb87904f3-1166-4819-b46d-68897417809b__idae08cb1b-13ee-4ee2-b2a0-a0c30a2c4a67"><p class="p">The functions like ucdb_CalcCoverageSummary()
that require traversing some subset of the database cannot work.</p>
</li>
</ul>
<p class="p">You can find this example in <span class="ph filepath">&lt;install_dir&gt;/examples/ucdb/userguide/use-cases/read-streaming/</span>.</p>
<pre class="pre codeblock leveled"><code>ucdbCBReturnT 
callback( 
    void*           userdata, 
    ucdbCBDataT*    cbdata) 
{ 
    ucdbScopeT scope; 
    switch (cbdata-&gt;reason) { 
    case UCDB_REASON_DU: 
    case UCDB_REASON_SCOPE: 
        scope = (ucdbScopeT)(cbdata-&gt;obj); 
        printf("%s\n",ucdb_GetScopeHierName(cbdata-&gt;db,scope)); 
        break; 
    default: break; 
    } 
    return UCDB_SCAN_CONTINUE; 
} 
 
void 
example_code(const char* ucdbfile) 
{ 
	ucdb_OpenReadStream(ucdbfile,callback,NULL); 
} </code></pre><p class="p">The read-streaming mode is based on the same
callback type functions as ucdb_CallBack(). This example is the
traverse-scopes example, but the example_code function is different.
The database handle is only available through the callback. The
path to the UCDB file is given to the open call, and this calls
the callback for each object in the database.</p>
<p class="p">The <span class="ph filepath">examples/ucdb/ucdbdump</span> example
is a read-streaming mode application that shows how to use the mode.</p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_UcdbUseCases_idb8452a48.html" title="Understanding the UCDB data models is a prerequisite to using the API. The API is more general than the specific data models used to represent specific kinds of coverage. It is also important to know how to use the API and understand some specific use scenarios.">UCDB Use Cases</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "ucdbapi_ref"
                DocTitle = "UCDB API Reference"
                PageTitle = "Read-Streaming Mode"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_ReadStreamingMode_idb87904f3.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">UCDB API Reference Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>