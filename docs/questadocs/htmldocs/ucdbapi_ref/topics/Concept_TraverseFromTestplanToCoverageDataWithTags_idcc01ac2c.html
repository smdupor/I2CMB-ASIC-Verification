<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="Traverse from Testplan to Coverage Data with Tags" />
<meta name="abstract" content="The ucdb_PathCallBack() function automatically performs a recursive traversal of testplan scopes, and for each testplan scope, it pursues the linked objects that share the same tag. The function considers the linked objects to be virtual children of the testplan scope." />
<meta name="description" content="The ucdb_PathCallBack() function automatically performs a recursive traversal of testplan scopes, and for each testplan scope, it pursues the linked objects that share the same tag. The function considers the linked objects to be virtual children of the testplan scope." />
<meta name="prodname" content="UCDB API Reference" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-07-10" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="none" />
<meta name="SourceHandle" content="ucdbapi_ref" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="mgc_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="UCDB API Reference" />
<meta name="CSHelp" content="none" />
<meta name="CSDSearchKeywords" content="doc.type.documentation.ref,product.id.P10593,product.version.2020.4" />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idcc01ac2c-9659-4881-adf6-408565963a28" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Traverse from Testplan to Coverage Data with Tags</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="Traverse from Testplan to Coverage Data with Tags" />
<meta name="attributes" content="doc.type.documentation.ref,product.id.P10593,product.version.2020.4" />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="idcc01ac2c-9659-4881-adf6-408565963a28">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">Traverse from Testplan to Coverage Data with
Tags</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">The ucdb_PathCallBack()
function automatically performs a recursive traversal of testplan
scopes, and for each testplan scope, it pursues the linked objects that
share the same tag. The function considers the linked objects to
be virtual children of the testplan scope. </span>
</div>
<p class="p">You can find this C example in <span class="ph filepath">&lt;install_dir&gt;/examples/ucdb/userguide/use-cases/traverse-testplan/</span>.</p>
<pre class="pre codeblock leveled"><code>void 
recurse_testplan(int level, ucdbT db, ucdbScopeT scope) 
{ 
    int t, numtags; 
    const char* tagname; 
    ucdbScopeT subscope; 
 
    /* Print testplan scope name and recurse child testplan sections */ 
    indent(level); 
    printf("%s\n",ucdb_GetScopeName(db,scope)); 
    subscope=NULL; 
    while ((subscope=ucdb_NextSubScope(db,scope,subscope,UCDB_TESTPLAN))) { 
        recurse_testplan(level+1,db,subscope); 
    } 
 
    /* from ucdb.h: traverse non-testplan objects with the same tag name */ 
    numtags = ucdb_GetObjNumTags(db,(ucdbObjT)scope); 
    for ( t=0; t&lt;numtags; t++ ) { 
        int found; 
        ucdbObjT taggedobj;  
        ucdb_GetObjIthTag(db,(ucdbObjT)scope,t,&amp;tagname); 
        for ( found=ucdb_BeginTaggedObj(db,tagname,&amp;taggedobj); 
              found; found=ucdb_NextTaggedObj(db,&amp;taggedobj) ) { 
            if (ucdb_ObjKind(db,taggedobj)==UCDB_OBJ_SCOPE 
                &amp;&amp;              ucdb_GetScopeType(db,(ucdbScopeT)taggedobj)==UCDB_TESTPLAN) 
                continue; 
            /* tagged object is not a testplan scope: */ 
            indent(level+1); 
            if (ucdb_ObjKind(db,taggedobj)==UCDB_OBJ_SCOPE) 
          printf("%s\n",ucdb_GetScopeHierName(db,(ucdbScopeT)taggedobj)); 
            else if (ucdb_ObjKind(db,taggedobj)==UCDB_OBJ_TESTDATA) 
                printf("%s\n",ucdb_GetTestName(db,(ucdbTestT)taggedobj)); 
        } 
    } 
} 
 
void 
example_code(const char* ucdbfile) 
{ 
    ucdbScopeT subscope; 
    ucdbT db = ucdb_Open(ucdbfile); 
    if (db==NULL) 
        return; 
    subscope=NULL; 
    while ((subscope=ucdb_NextSubScope(db,NULL,subscope,UCDB_TESTPLAN))) { 
        recurse_testplan(0,db,subscope); 
    } 
    ucdb_Close(db); 
} </code></pre><p class="p">The ucdb_NextSubScope function
is an iterator that must start with a NULL pointer. One common mistake
with this iterator is to confuse the scope and subscope. The traversal
in example_code() is a traversal of roots, because NULL is given
as the scope. The subscopes are returned, but these are root scopes
with no parent. The last argument to ucdb_NextSubScope, the UCDB_TESTPLAN
value, is a scope mask. This is one of those cases where the scope
type is used as a mask. In this case, the scope type is used as
a mask, and the implementation is that each scope type occupies
one and only one bit. The iterator will only return testplan scopes.</p>
<p class="p">The recurse_testplan() scope prints the testplan
scope name with indentation and recurses into testplan sub-scopes.</p>
<p class="p">The complex second loop
in recurse_testplan() is taken from an example in the <span class="ph filepath">ucdb.h</span> header,
which acquires each tag from the testplan. (Even though Questa creates
testplan sections with one and only one tag, the UCDB has no such
restriction in its data model.) The ucdb_BeginTaggedObj() and ucdb_NextTaggedObj()
use the tag name to return the list of objects that share the tag.
Tagged objects may be either scopes, testplan scopes, module instance
scopes, coverage scopes, design unit scopes, and so on, or test
data records. The ucdb_GetScopeType() function may only be used
with scopes, so ucdb_ObjKind() is used first to guarantee that the
object is a scope.</p>
<p class="p">If the loop drops through
the continue statement, the current object (taggedobj) shares a tag
with the current testplan scope and is not itself a testplan scope.
The names are printed in in the following ways: one for other scopes
and one for test data records.</p>
<p class="p">The end result is a simpler
version of the “coverage analyze -plan / -r” command that can be
used in viewcov mode in Questa. This result is essentially the logic
followed by the coverage analyze command. The coverage analyze command
relies on ucdb_PathCallBack(), which has the traversal logic built-in.</p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_UcdbUseCases_idb8452a48.html" title="Understanding the UCDB data models is a prerequisite to using the API. The API is more general than the specific data models used to represent specific kinds of coverage. It is also important to know how to use the API and understand some specific use scenarios.">UCDB Use Cases</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "ucdbapi_ref"
                DocTitle = "UCDB API Reference"
                PageTitle = "Traverse from Testplan to Coverage Data with Tags"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_TraverseFromTestplanToCoverageDataWithTags_idcc01ac2c.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">UCDB API Reference Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>