<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="ConceptTopic" />
<meta name="DC.Title" content="The FOREIGN Attribute String" />
<meta name="abstract" content="The value of the FOREIGN attribute is a string containing three parts." />
<meta name="description" content="The value of the FOREIGN attribute is a string containing three parts." />
<meta name="prodname" content="Foreign Language Interface Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-07-10" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for ModelSim® DE/SE and Questa® SIM" />
<meta name="SourceHandle" content="fli" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="mgc_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Foreign Language Interface Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.100,doc.type.documentation.ref,product.id.P10467,product.id.P10593,product.id.P11632,product.id.P11633," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>The FOREIGN Attribute String</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="The FOREIGN Attribute String" />
<meta name="attributes" content="product.version.2020.4,sort.order.100,doc.type.documentation.ref,product.id.P10467,product.id.P10593,product.id.P11632,product.id.P11633," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">The FOREIGN Attribute
String</h1>
<div class="body conbody ConceptBody"><div class="abstract ConceptAbstract"><span class="shortdesc">The value of
the FOREIGN attribute is a string containing three parts. </span>
</div>
<p class="p">For the following declaration:</p>
<pre class="pre codeblock"><code>ATTRIBUTE foreign OF arch_name
: ARCHITECTURE IS “<span class="keyword ParameterName RequiredReplaceable">app_init</span> <span class="keyword ParameterName RequiredReplaceable">app.so</span>[; <span class="keyword ParameterName OptionalReplaceable">parameter</span>]”;</code></pre><p class="p">the attribute string parses this way:</p>
<ul class="ul"><li class="li" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__ida87e51fb-4dc3-42a8-be9e-bf5f89564953"><p class="p"><span class="keyword ParameterName RequiredReplaceable">app_init</span>—
(required) The name of the initialization function for this architecture.
Refer to <a class="xref fm:HeadingOnly" href="#idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__id80c91c7f-0f4c-4183-ad1b-63bb9143c3c8">The C Initialization Function</a>.</p>
</li>
<li class="li" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__id4a9b517b-d9ff-4199-bd4b-fe2b78c8f88d"><p class="p"><span class="keyword ParameterName RequiredReplaceable">app.so</span>—
(required) The path to the shared object file to load. See <a class="xref fm:HeadingOnly" href="#idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__id80c91c7f-0f4c-4183-ad1b-63bb9143c3c8">The C Initialization Function</a>.</p>
</li>
<li class="li" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__id41970b72-8f1f-42b8-8b61-24b0d29b5e98"><p class="p"><span class="keyword ParameterName OptionalReplaceable">parameter</span>—
(optional) A string that is passed to the initialization function.
This part is preceded by a semicolon.</p>
</li>
</ul>
<p class="p">If the you precede the initialization
function with a plus (+) or minus (-), the simulator elaborates
the VHDL architecture body in addition to the foreign code. </p>
<ul class="ul"><li class="li" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__id9875ea8d-7093-4db8-b1d0-b322616cdcce"><p class="p">+ — (as in the example below),
elaborate the VHDL first. </p>
</li>
<li class="li" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__idc5250b1f-9cac-4cf8-9d86-173526b440f7"><p class="p">- — elaborate the VHDL after
the calling the foreign initialization function. </p>
</li>
</ul>
<p class="p">You can also use environment
variables within the string, as in this example:</p>
<pre class="pre codeblock leveled"><code>ATTRIBUTE foreign OF arch_name : ARCHITECTURE IS "+app_init $CAE/app.so";</code></pre><div class="section Subsections" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__idee244c71-9331-4f8e-9ebb-1b723e5c3748"><div class="section Subsection" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__idbf562d77-0329-4dca-a256-61bc4c24c24d"><h2 class="title Subheading sectiontitle">Location of Shared Object Files</h2><p class="p">The
simulator searches for object files in the following order:</p>
<ol class="ol"><li class="li" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__id2c2a65b7-23de-42ab-9684-dd999478c621"><p class="p"><span class="ph FontProperty emphasis">$MGC_WD/&lt;so&gt;</span> or <span class="ph FontProperty emphasis">./&lt;so&gt;</span> (If
MGC_WD is not set, then it will use “.”)</p>
</li>
<li class="li" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__idedb5111e-ab80-4631-aab1-808b86d7fc29"><p class="p">&lt;so&gt;</p>
</li>
<li class="li" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__idc5ca24cc-205b-49c0-a12f-6e6566e9f886"><p class="p">within $LD_LIBRARY_PATH</p>
</li>
<li class="li" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__id5cb6498f-7f65-420f-9686-2ad964d561c9"><p class="p"><span class="ph FontProperty emphasis">$MGC_HOME/lib/&lt;so&gt;</span></p>
</li>
<li class="li" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__id355d2be4-6fa2-4133-bfb5-3fbc3a3c1764"><p class="p"><span class="ph FontProperty emphasis">$MODEL_TECH/&lt;so&gt;</span></p>
</li>
<li class="li" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__id8f2f347f-cb0f-4289-b209-8f9fe94bfbce"><p class="p"><span class="ph FontProperty emphasis">$MODEL_TECH/../&lt;so&gt;</span></p>
</li>
</ol>
<p class="p">In the search information
above, &lt;so&gt; refers to the shared library path specified in the FOREIGN
attribute string. MGC_WD and MGC_HOME are user-definable environment variables.
MODEL_TECH is set internally by vsim to the directory where the
vsim executable resides.</p>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">The <span class="ph filepath">.so</span> extension
works on all platforms</p>
</div>
</div>
<div class="section Subsection" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__id80c91c7f-0f4c-4183-ad1b-63bb9143c3c8"><h2 class="title Subheading sectiontitle">The C Initialization Function</h2><p class="p">The initialization function
is the entry point into the foreign C model. It typically does the following:</p>
<ul class="ul"><li class="li" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__ida9424ce4-81af-4f64-b3e9-cdd0c8bfe65d"><p class="p">Allocates memory to
hold variables for the instance.</p>
</li>
<li class="li" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__id35af01e9-2f0c-4998-a307-fa7c7b843032"><p class="p">Registers a callback
function to free the memory when the simulator is restarted.</p>
</li>
<li class="li" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__id0d8d94c8-70b9-4c52-b61c-4e0596346c2b"><p class="p">Saves the handles
to the signals in the port list.</p>
</li>
<li class="li" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__idd63c3e83-d1df-4aa5-8a11-5df81dbb50f6"><p class="p">Creates drivers on
the ports that will be driven.</p>
</li>
<li class="li" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__ide3e6aed0-80f3-4725-91c7-a40f49994f9d"><p class="p">Creates one or more
processes (a C function that can be called when a signal changes).</p>
</li>
<li class="li" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__idf7e85172-2486-4db3-a561-cebe0e289bec"><p class="p">Sensitizes each process
to a list of signals.</p>
</li>
</ul>
<p class="p">The declaration of an initialization function
is:</p>
<pre class="pre codeblock leveled"><code>app_init(
	mtiRegionIdT							region,
	char							*param,
	mtiInterfaceListT							*generics,
	mtiInterfaceListT							*ports
)</code></pre><p class="p">The elaboration phase calls
the function specified in the foreign attribute is. </p>
<ul class="ul"><li class="li" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__id575a8da6-fba1-464a-aa33-3b391111143b"><p class="p">The first parameter is a region
ID that determines the location in the design for this instance. </p>
</li>
<li class="li" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__id84bdfee4-ea28-4dfe-a4d6-03457735e920"><p class="p">The second parameter is the
last part of the string in the foreign attribute. </p>
</li>
<li class="li" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__id4d82e52e-945f-45e5-b340-d16bb298eb45"><p class="p">The third parameter is a linked
list of the generic values for this instance. The list will be NULL
if there are no generics. </p>
</li>
<li class="li" id="idd58b1e9d-2e2a-40ff-9bf8-d43bf9604ddf__id5b19dee6-72ce-485d-96e1-8f30b372d4b5"><p class="p">The last parameter is a linked
list of the ports for this instance. The typedef mtiInterfaceListT
in mti.h describes the entries in these lists.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/Contain_UsingVhdlFliForeignArchitectures_id2083efb7.html" title="To use the foreign language interface with C models, you first create and compile an architecture with the FOREIGN attribute. The string value of the attribute is used to specify the name of a C initialization function and the name of an object file to load.">Using the VHDL FLI with Foreign Architectures</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "fli"
                DocTitle = "Foreign Language Interface Manual"
                PageTitle = "The FOREIGN Attribute String"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Concept_ForeignAttributeString_idd58b1e9d.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Foreign Language Interface Manual Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>