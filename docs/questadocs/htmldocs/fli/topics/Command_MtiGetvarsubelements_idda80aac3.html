<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="mti_GetVarSubelements()" />
<meta name="abstract" content="Gets the subelements of a composite VHDL variable. This does not support SystemC variables." />
<meta name="description" content="Gets the subelements of a composite VHDL variable. This does not support SystemC variables." />
<meta name="DC.subject" content="mti_GetVarSubelements()" />
<meta name="keywords" content="mti_GetVarSubelements()" />
<meta name="prodname" content="Foreign Language Interface Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-07-10" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for ModelSim® DE/SE and Questa® SIM" />
<meta name="SourceHandle" content="fli" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="mgc_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Foreign Language Interface Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.100,doc.type.documentation.ref,product.id.P10467,product.id.P10593,product.id.P11632,product.id.P11633," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="idda80aac3-162a-483c-a67e-43cb27517f5e" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>mti_GetVarSubelements()</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="mti_GetVarSubelements()" />
<meta name="attributes" content="product.version.2020.4,sort.order.100,doc.type.documentation.ref,product.id.P10467,product.id.P10593,product.id.P11632,product.id.P11633," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="syn-arg" id="idda80aac3-162a-483c-a67e-43cb27517f5e">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">mti_GetVarSubelements()</h1>
<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><span class="shortdesc">Gets the
subelements of a composite VHDL variable. This does not support
SystemC variables.</span>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Syntax</h2><div class="section UsageSet"><p class="lines UsageLine">elem_list = mti_GetVarSubelements( variable_id, buffer )</p>
</div>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet">
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table ArgumentTable" frame="void" border="0" rules="none"><colgroup><col style="width:1.815in" /><col style="width:1.863in" /><col style="width:2.821in" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder default-entry" style="vertical-align:top;" id="d38307e159"><p class="p">Name</p>
</th>
<th class="entry nocellnorowborder default-entry" style="vertical-align:top;" id="d38307e162"><p class="p">Type</p>
</th>
<th class="entry nocellnorowborder default-entry" style="vertical-align:top;" id="d38307e165"><p class="p">Description</p>
</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;" headers="d38307e159 "><p class="p">variable_id</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;" headers="d38307e162 "><p class="p">mtiVariableIdT</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;" headers="d38307e165 "><p class="p">A handle to a VHDL variable</p>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;" headers="d38307e159 "><p class="p">buffer</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;" headers="d38307e162 "><p class="p">mtiVariableIdT *</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;" headers="d38307e165 "><p class="p">A buffer into which the subelement
variable IDs are to be placed; OPTIONAL - can be NULL</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section ReturnedValues"><h2 class="title Subheading sectiontitle">Return Values</h2>
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="idda80aac3-162a-483c-a67e-43cb27517f5e__idd891b402-69a9-41b5-9115-9e7a6ab82b39" class="table" frame="void" border="0" rules="none"><colgroup><col style="width:1.382in" /><col style="width:1.430in" /><col style="width:2.388in" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder default-entry" style="vertical-align:top;" id="d38307e198"><p class="p">Name</p>
</th>
<th class="entry nocellnorowborder default-entry" style="vertical-align:top;" id="d38307e201"><p class="p">Type</p>
</th>
<th class="entry nocellnorowborder default-entry" style="vertical-align:top;" id="d38307e204"><p class="p">Description</p>
</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;" headers="d38307e198 "><p class="p">elem_list</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;" headers="d38307e201 "><p class="p">mtiVariableIdT *</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;" headers="d38307e204 "><p class="p">An array containing the variable
IDs of the subelements of the specified variable</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">mti_GetVarSubelements() returns
an array containing the variable IDs of the subelements of the specified
VHDL composite variable. If the buffer parameter is NULL, mti_GetVarSubelements()
allocates memory for the array and returns a pointer to it. The
caller is responsible for freeing this memory with mti_VsimFree().
If the buffer parameter is not NULL, then mti_GetVarSubelements()
copies the subelement variable IDs into the buffer and also returns
the buffer parameter. The length for the buffer parameter and the
return value can be determined by calling mti_TickLength() on the
type of the variable_id.</p>
<p class="p">mti_GetVarSubelements() returns
NULL if the variable_id parameter is not a handle to a VHDL composite
variable.</p>
<p class="p">The internal
representation of multi-dimensional arrays is the same as arrays
of arrays. For example, array a(x,y,z) is accessed in the same manner
as a(x)(y)(z). In order to get to the scalar subelements of an array
of arrays, you must use mti_GetVarSubelements() on each level of
the array until reaching the scalar subelements.</p>
</div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="idda80aac3-162a-483c-a67e-43cb27517f5e__idf5f9a010-e1e6-496b-b2fc-ebf3f4059a65"><h2 class="title Subheading sectiontitle">FLI code</h2><pre class="pre codeblock"><code><span class="ph FontProperty P9">#include &lt;mti.h&gt;

typedef struct varInfoT_tag {
  struct varInfoT_tag  * next;
  char                 * name;
  mtiVariableIdT         varid;
  mtiTypeIdT             typeid;
} varInfoT;

typedef struct {
  varInfoT      * var_info;     /* List of variables. */
  mtiProcessIdT   proc;         /* Test process id. */
} instanceInfoT;

static void printValue(
  mtiVariableIdT varid,
  mtiTypeIdT     vartype,
  int            indent,
  int            print_newline
)
{
  switch ( mti_GetTypeKind( vartype ) ) {
    case MTI_TYPE_ENUM:
      {
        char ** enum_values;
        mtiInt32T scalar_val;
        enum_values = mti_GetEnumValues( vartype );
        scalar_val = mti_GetVarValue( varid );
        mti_PrintFormatted( "  %s", enum_values[scalar_val] );
      }
      break;
    case MTI_TYPE_PHYSICAL:
    case MTI_TYPE_SCALAR:
      {
        mtiInt32T scalar_val;
        scalar_val = mti_GetVarValue( varid );
        mti_PrintFormatted( "  %d", scalar_val );
      }
      break;
    case MTI_TYPE_ARRAY:
      {
        int              i;
        mtiVariableIdT * elem_list;
        elem_list = mti_GetVarSubelements( varid, 0 );
        for ( i = 0; i &lt; mti_TickLength( vartype ); i++ ) {
          printValue( elem_list[i], mti_GetVarType(elem_list[i]),
                     indent, 0 );
        }
        mti_VsimFree( elem_list );
      }
      break;
    case MTI_TYPE_RECORD:
      {
        int              i;
        mtiVariableIdT * elem_list;
        mtiInt32T        num_elems;
        elem_list = mti_GetVarSubelements( varid, 0 );
        num_elems = mti_GetNumRecordElements( vartype );
        mti_PrintFormatted( "\n" );
        for ( i = 0; i &lt; num_elems; i++ ) {
          mti_PrintFormatted( "%*c", indent, ' ' );
          printValue( elem_list[i], mti_GetVarType(elem_list[i]),
                     indent, 1 );
        }
        mti_VsimFree( elem_list );
      }
      break;
    case MTI_TYPE_REAL:
      {
        double real_val;
        mti_GetVarValueIndirect( varid, &amp;real_val );
        mti_PrintFormatted( "  %g", real_val );
      }
      break;
    case MTI_TYPE_TIME:
      {
        mtiTime64T time_val;
        mti_GetVarValueIndirect( varid, &amp;time_val );
        mti_PrintFormatted( "  [%d,%d]",
                           MTI_TIME64_HI32(time_val),
                           MTI_TIME64_LO32(time_val) );
      }
      break;
    default:
      break;
  }
  if ( print_newline ) {
      mti_PrintFormatted( "\n" );
  }
}

static void checkValues( void *inst_info )
{
  instanceInfoT *inst_data = (instanceInfoT *)inst_info;
  varInfoT      *varinfo;

  mti_PrintFormatted( "Time [%d,%d]:\n", mti_NowUpper(), mti_Now() );

  for ( varinfo = inst_data-&gt;var_info; varinfo; varinfo = varinfo-&gt;next ) {
    mti_PrintFormatted( "  Variable %s:", varinfo-&gt;name );
    printValue( varinfo-&gt;varid, varinfo-&gt;typeid, 4, 1 );
  }

  mti_ScheduleWakeup( inst_data-&gt;proc, 5 );
}

static varInfoT * setupVariable( mtiVariableIdT varid )
{
  varInfoT * varinfo;

  varinfo          = (varInfoT *) mti_Malloc( sizeof(varInfoT) );
  varinfo-&gt;varid   = varid;
  varinfo-&gt;name    = mti_GetVarName( varid );
  varinfo-&gt;typeid  = mti_GetVarType( varid );
  varinfo-&gt;next    = 0;

return( varinfo );
}

static void initInstance( void * param )
{
  instanceInfoT * inst_data;
  mtiProcessIdT   procid;
  mtiVariableIdT  varid;
  varInfoT      * curr_info;
  varInfoT      * varinfo;

  inst_data           = mti_Malloc( sizeof(instanceInfoT) );
  inst_data-&gt;var_info = 0;

  for ( procid = mti_FirstProcess( mti_GetTopRegion() );
        procid; procid = mti_NextProcess() ) {
    for ( varid = mti_FirstVar( procid ); varid; varid = mti_NextVar() ) {
      varinfo = setupVariable( varid );
      if ( inst_data-&gt;var_info == 0 ) {
        inst_data-&gt;var_info = varinfo;
      }
      else {
        curr_info-&gt;next = varinfo;
      }
      curr_info = varinfo;
    }
  }

  inst_data-&gt;proc = mti_CreateProcess( "Test Process", checkValues,
                                      (void *)inst_data );
  mti_ScheduleWakeup( inst_data-&gt;proc, 6 );
}

void initForeign(
  mtiRegionIdT       region,   /* The ID of the region in which this     */
                               /* foreign architecture is instantiated.  */
  char              *param,    /* The last part of the string in the     */
                               /* foreign attribute.                     */
  mtiInterfaceListT *generics, /* A list of generics for the foreign model.*/
  mtiInterfaceListT *ports     /* A list of ports for the foreign model.   */
)
{
  mti_AddLoadDoneCB( initInstance, 0 );
}</span></code></pre></div>
<div class="section Subsection" id="idda80aac3-162a-483c-a67e-43cb27517f5e__id94138405-131f-4bc5-bd1c-ac35be8b7b9b"><h2 class="title Subheading sectiontitle">HDL code</h2><pre class="pre codeblock"><code>entity for_model is
end for_model;

architecture a of for_model is
  attribute foreign of a : architecture is "initForeign for_model.sl;";
begin
end a;

library ieee;
use ieee.std_logic_1164.all;

entity top is

  type bitarray  is array( 3 downto 0 ) of bit;
  type intarray  is array( 1 to 3 )     of integer;
  type realarray is array( 1 to 2 )     of real;
  type timearray is array( -1 to 0 )    of time;


  type a1 is array ( 2 downto 0 ) of bitarray;
  type a2 is array ( 1 to 2, 3 to 4 ) of bitarray;


  type rectype is record
    a : bit;
    b : integer;
    c : real;
    d : std_logic;
    e : bitarray;
  end record;

end top;

architecture a of top is

  component for_model
  end component;

  for all : for_model use entity work.for_model(a);

begin

  inst1 : for_model;

  p1 : process

    variable bitsig      : bit       := '1';
    variable stdlogicsig : std_logic := 'H';

    variable bitarr      : bitarray  := "0110";
    variable stdlogicarr : std_logic_vector( 1 to 4 ) := "01LH";
    variable intarr      : intarray  := ( 10, 11, 12 );
    variable realarr     : realarray := ( 11.6, 101.22 );
    variable timearr     : timearray := ( 15 ns, 6 ns );

    variable a1arr       : a1        := ( "1111", "0001", "0110" );
    variable a2arr       : a2        := ( ( "0001", "0010" ),
                                          ( "0100", "0101" ) );

    variable rec         : rectype   := ( '0', 1, 3.7, 'H', "1001" );

  begin

    bitsig      := not bitsig;
    stdlogicsig := not stdlogicsig;

    bitarr      := not bitarr;

    intarr(1)   := intarr(1) + 1;
    intarr(2)   := intarr(2) + 1;
    intarr(3)   := intarr(3) + 1;

    realarr(1)  := realarr(1) + 0.5;
    realarr(2)  := realarr(2) + 0.5;

    timearr(-1) := timearr(-1) + 1 ns;
    timearr(0)  := timearr(0)  + 1 ns;

    a1arr(2)    := not a1arr(2);
    a1arr(1)    := not a1arr(1);
    a1arr(0)    := not a1arr(0);
    a2arr(1,3)  := not a2arr(1,3);
    a2arr(1,4)  := not a2arr(1,4);
    a2arr(2,3)  := not a2arr(2,3);
    a2arr(2,4)  := not a2arr(2,4);

    stdlogicarr := not stdlogicarr;

    rec.a       := not rec.a;
    rec.b       := rec.b + 1;
    rec.c       := rec.c + 2.5;
    rec.d       := not rec.d;
    rec.e       := not rec.e;

    wait for 5 ns;

  end process;

end a;</code></pre></div>
<div class="section Subsection" id="idda80aac3-162a-483c-a67e-43cb27517f5e__id08a8a631-1121-4c4f-b04d-8455f9d5b40f"><h2 class="title Subheading sectiontitle">Simulation output</h2><pre class="pre codeblock"><code>% vsim -c top
Reading .../modeltech/tcl/vsim/pref.tcl 

# 5.4b

# vsim -c top 
# Loading .../modeltech/sunos5/../std.standard
# Loading .../modeltech/sunos5/../ieee.std_logic_1164(body)
# Loading work.top(a)
# Loading work.for_model(a)
# Loading ./for_model.sl
VSIM 1&gt; run 12
# Time [0,6]:
#   Variable bitsig:  '1'
#   Variable stdlogicsig:  '1'
#   Variable bitarr:  '0'  '1'  '1'  '0'
#   Variable stdlogicarr:  '0'  '1'  '0'  '1'
#   Variable intarr:  12  13  14
#   Variable realarr:  12.6  102.22
#   Variable timearr:  [0,17]  [0,8]
#   Variable a1arr:  '1'  '1'  '1'  '1'  '0'  '0'  '0'  '1'  '0'  '1'  '1'  '0'
#   Variable a2arr:  '0'  '0'  '0'  '1'  '0'  '0'  '1'  '0'  '0'  '1'  '0' '0'  '0'  '1'  '0'  '1'
#   Variable rec:
#       '0'
#       3
#       8.7
#       '1'
#       '1'  '0'  '0'  '1'
# 
# Time [0,11]:
#   Variable bitsig:  '0'
#   Variable stdlogicsig:  '0'
#   Variable bitarr:  '1'  '0'  '0'  '1'
#   Variable stdlogicarr:  '1'  '0'  '1'  '0'
#   Variable intarr:  13  14  15
#   Variable realarr:  13.1  102.72
#   Variable timearr:  [0,18]  [0,9]
#   Variable a1arr:  '0'  '0'  '0'  '0'  '1'  '1'  '1'  '0'  '1'  '0'  '0'  '1'
#   Variable a2arr:  '1'  '1'  '1'  '0'  '1'  '1'  '0'  '1'  '1'  '0'  '1' '1'  '1'  '0'  '1'  '0'
#   Variable rec:
#       '1'
#       4
#       11.2
#       '0'
#       '0'  '1'  '1'  '0'
#
VSIM 2&gt; quit</code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_FliFunctionDefinitions_id33771d04.html" title="This chapter describes the FLI functions in detail, explaining their purpose, syntax, and usage.">FLI Function Definitions</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "fli"
                DocTitle = "Foreign Language Interface Manual"
                PageTitle = "mti_GetVarSubelements()"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_MtiGetvarsubelements_idda80aac3.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Foreign Language Interface Manual Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>