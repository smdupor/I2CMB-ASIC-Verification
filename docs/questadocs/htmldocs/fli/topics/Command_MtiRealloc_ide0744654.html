<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2020" />
<meta name="DC.rights.owner" content="(C) Copyright 2020" />
<meta name="DC.Type" content="CommandRefTopic" />
<meta name="DC.Title" content="mti_Realloc()" />
<meta name="abstract" content="Reallocates simulator-managed memory." />
<meta name="description" content="Reallocates simulator-managed memory." />
<meta name="DC.subject" content="mti_Realloc()" />
<meta name="keywords" content="mti_Realloc()" />
<meta name="prodname" content="Foreign Language Interface Manual" />
<meta name="version" content="2014.06" />
<meta name="release" content="v2014.06" />
<meta name="series" content="mgc_ih" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Creator" content="Mentor Graphics Corporation" />
<meta name="DC.Publisher" content="Mentor Graphics Corporation 10 24 2014 10 24 2014 Fresh off the boat." />
<meta name="DC.Date.Created" content="0000-00-00" />
<meta name="DC.Date.Modified" content="2020-07-10" />
<meta name="VariantPrefix" content="none" />
<meta name="Tier" content="1" />
<meta name="SubTitle" content="Including Support for ModelSim® DE/SE and Questa® SIM" />
<meta name="SourceHandle" content="fli" />
<meta name="SoftwareVersionNum" content="2020.4" />
<meta name="SoftwareRelease" content="none" />
<meta name="RevHist" content="none" />
<meta name="PublicationDate" content="none" />
<meta name="Platform" content="none" />
<meta name="PartNumber" content="none" />
<meta name="LicenseType" content="EULA" />
<meta name="InfoHubHandle" content="mgc_ih" />
<meta name="EclipsePluginName" content="none" />
<meta name="DraftDate" content="none" />
<meta name="Draft" content="none" />
<meta name="DocumentTitle" content="Foreign Language Interface Manual" />
<meta name="CSHelp" content="no" />
<meta name="CSDSearchKeywords" content="product.version.2020.4,sort.order.100,doc.type.documentation.ref,product.id.P10467,product.id.P10593,product.id.P11632,product.id.P11633," />
<meta name="Copyright" content="READONLY - Use: copyrfirst and copyrlast" />
<meta name="ConditionFiltering" content="XML" />
<meta name="ChecklinksRelease" content="mti2020" />
<meta name="BookcaseHandle" content="none" />
<meta name="Beta" content="none" />
<meta name="Alpha" content="none" />
<meta name="ActiveStatus" content="Active" />
<meta name="GenerateOnlyChangedTopics" content="none" />
<meta name="HighlightChanges" content="none" />
<meta name="HighlightColor" content="Pale Green" />
<meta name="IncludeInInventory" content="yes" />
<meta name="SourceEDDVersion" content="12.2.10" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="ide0744654-1d10-4244-8e77-60087fd9eb73" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>mti_Realloc()</title>
<link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /><noscript><link rel="StyleSheet" href="../../MGC/styles/body.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/catalog.css" type="text/css" /><link rel="StyleSheet" href="../../MGC/styles/document.css" type="text/css" /><link rel="stylesheet" href="../../MGC/styles/mgcdita-lang.css" type="text/css" /></noscript><meta name="mgc_html_doctitle" content="mti_Realloc()" />
<meta name="attributes" content="product.version.2020.4,sort.order.100,doc.type.documentation.ref,product.id.P10467,product.id.P10593,product.id.P11632,product.id.P11633," />
<meta name="TEMPLATEBASE" content="mgc_mgchelp_v4.2.009" />
<script type="text/javascript" language="JavaScript1.2" src="../../MGC/js/page.js"></script><script type="text/javascript" language="JavaScript1.2">
            if(DetectChromeForBasic()){
            writeNoScriptStyles();
            }

        </script><script type="text/javascript" language="JavaScript1.2">
            // Set reference to top level help frame
            //
            if(!DetectChromeForBasic()){
            javascriptTopicRedirect();
            }
        </script></head>
<body class="syn-arg" id="ide0744654-1d10-4244-8e77-60087fd9eb73">
<div id="bodycontent" class="BodyContent">
<script type="text/javascript" language="JavaScript1.2">
              var BC = new Array("TODO: Breadcrumb Title","title1","naV","naV","naV","naV","2");
          </script>
<noscript><iframe framespacing="0" marginheight="2px" frameborder="no" scrolling="no" src="../../MGC/html/noscript_header.htm" width="100%" height="100px;">xxx</iframe></noscript>
<script type="text/javascript" language="JavaScript1.2">
              if(DetectChromeForBasic()){
              if(!(top.inEclipse)){
              writeBasicHeader();
              }
              }
          </script>
<div id="BodyContent"><h1 class="title topictitle1">mti_Realloc()</h1>
<div class="body refbody CommandRefBody"><div class="abstract CommandRefAbstract"><span class="shortdesc">Reallocates
simulator-managed memory.</span>
</div>
<div class="section Usages"><h2 class="title Subheading sectiontitle">Syntax</h2><div class="section UsageSet"><p class="lines UsageLine">memptr = mti_Realloc( origptr, size )</p>
</div>
</div>
<div class="section Arguments"><h2 class="title Subheading sectiontitle">Arguments</h2><div class="section ArgumentSet">
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table ArgumentTable" frame="void" border="0" rules="none"><colgroup><col style="width:1.815in" /><col style="width:1.863in" /><col style="width:2.821in" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder default-entry" style="vertical-align:top;" id="d23914e159"><p class="p">Name</p>
</th>
<th class="entry nocellnorowborder default-entry" style="vertical-align:top;" id="d23914e166"><p class="p">Type</p>
</th>
<th class="entry nocellnorowborder default-entry" style="vertical-align:top;" id="d23914e169"><p class="p">Description</p>
</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;" headers="d23914e159 "><p class="p">origptr</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;" headers="d23914e166 "><p class="p">void *</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;" headers="d23914e169 "><p class="p">A pointer to the currently allocated
memory</p>
</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;" headers="d23914e159 "><p class="p">size</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;" headers="d23914e166 "><p class="p">unsigned long</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;" headers="d23914e169 "><p class="p">The size in bytes of
the new memory to be allocated</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section ReturnedValues"><h2 class="title Subheading sectiontitle">Return Values</h2>
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="ide0744654-1d10-4244-8e77-60087fd9eb73__id1c9af4b1-1a3b-4a8f-8362-6be6d31e3cc5" class="table" frame="void" border="0" rules="none"><colgroup><col style="width:1.382in" /><col style="width:1.430in" /><col style="width:2.388in" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder default-entry" style="vertical-align:top;" id="d23914e202"><p class="p">Name</p>
</th>
<th class="entry nocellnorowborder default-entry" style="vertical-align:top;" id="d23914e205"><p class="p">Type</p>
</th>
<th class="entry nocellnorowborder default-entry" style="vertical-align:top;" id="d23914e208"><p class="p">Description</p>
</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder default-entry" style="vertical-align:top;" headers="d23914e202 "><p class="p">memptr</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;" headers="d23914e205 "><p class="p">void *</p>
</td>
<td class="entry nocellnorowborder default-entry" style="vertical-align:top;" headers="d23914e208 "><p class="p">A pointer to the reallocated
memory</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section Descriptions"><h2 class="title Subheading sectiontitle">Description</h2><p class="p">mti_Realloc() works like the C
realloc() function on memory allocated by mti_Malloc(). If the specified
size is larger than the size of memory already allocated to the
origptr parameter, then new memory of the required size is allocated
and initialized to zero, the entire content of the old memory is
copied into the new memory, and a pointer to the new memory is returned. Otherwise,
a pointer to the old memory is returned.</p>
<p class="p">Any memory allocated by mti_Realloc()
is guaranteed to be checkpointed and restored just like memory allocated
by mti_Malloc(). Memory allocated by mti_Realloc() can be freed only
by mti_Free().</p>
<p class="p">mti_Realloc() automatically checks
for a NULL pointer. In the case of an allocation error, mti_Realloc()
issues the following error message and aborts the simulation:</p>
<pre class="pre codeblock"><code>****** Memory allocation failure. *****
Please check your system for available memory and swap space</code></pre></div>
<div class="section Examples"><h2 class="title Subheading sectiontitle">Examples</h2><div class="section Subsection" id="ide0744654-1d10-4244-8e77-60087fd9eb73__id1ecbf601-8bab-46d2-a49c-e45e3df6c4f6"><h2 class="title Subheading sectiontitle">FLI code</h2><pre class="pre codeblock"><code><span class="ph FontProperty P9">#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;mti.h&gt;

static char * instance_info;

void saveCallback( void * param )
{
  char * inst_info = (char *)param;
  mti_PrintFormatted( "Saving instance info pointer to \"%s\"\n",
                     inst_info );
  mti_SaveBlock( (char *)&amp;inst_info, sizeof(inst_info) );
}

void restoreCallback( void * param )
{
  mti_RestoreBlock( (char *)&amp;instance_info );
  mti_PrintFormatted( "Restored instance info \"%s\"\n", instance_info );
}

void cleanupCallback( void * param )
{
  mti_PrintMessage( "Cleaning up...\n" );
  /*
   * NOTE:  Memory allocated by mti_Malloc() and mti_Realloc() will
   *        be freed by vsim.
   */
}

void initForeign(
  mtiRegionIdT       region,   /* The ID of the region in which this     */
                               /* foreign architecture is instantiated.  */
  char              *param,    /* The last part of the string in the     */
                               /* foreign attribute.                     */
  mtiInterfaceListT *generics, /* A list of generics for the foreign model.*/
  mtiInterfaceListT *ports     /* A list of ports for the foreign model.   */
)
{
  if ( mti_IsRestore() ) {
    mti_PrintMessage( "Restore in progress ...\n" );
  } else {
    instance_info = mti_Malloc( strlen(param) + 1 );
    strcpy( instance_info, param );
    if ( ! mti_IsFirstInit() ) {
      instance_info = mti_Realloc( instance_info, strlen(param) + 9 );
      sprintf( instance_info, "%s_restart", param );
    }
  }
  mti_AddSaveCB( saveCallback, instance_info );
  mti_AddRestoreCB( restoreCallback, instance_info );
  mti_AddQuitCB( cleanupCallback, instance_info );
  mti_AddRestartCB( cleanupCallback, instance_info );
}</span></code></pre></div>
<div class="section Subsection" id="ide0744654-1d10-4244-8e77-60087fd9eb73__id09ac370d-7597-4c25-903b-75dfbb6e4e86"><h2 class="title Subheading sectiontitle">HDL code</h2><pre class="pre codeblock"><code>entity for_model is
end for_model;

architecture a of for_model is
  attribute foreign of a : architecture is
    "initForeign for_model.sl; my_for_model";
begin
end a;

entity top is
end top;

architecture a of top is

  signal s1 : bit := '0';

  component for_model is
  end component;

  for all : for_model use entity work.for_model(a);

begin

  i1 : for_model;

  s1 &lt;= not s1 after 5 ns;

end a;</code></pre></div>
<div class="section Subsection" id="ide0744654-1d10-4244-8e77-60087fd9eb73__id1b8d7b1c-aa2f-4d6d-a2c7-6691b9ed2f78"><h2 class="title Subheading sectiontitle">Simulation output</h2><pre class="pre codeblock"><code>% vsim -c top
Reading .../modeltech/tcl/vsim/pref.tcl 

# 5.4b

# vsim -c top 
# Loading .../modeltech/sunos5/../std.standard
# Loading work.top(a)
# Loading work.for_model(a)
# Loading ./for_model.sl
VSIM 1&gt; run 20
VSIM 2&gt; checkpoint cpfile
# Saving instance info pointer to "my_for_model"
VSIM 3&gt; run 30
VSIM 4&gt; restore cpfile
# Loading checkpoint/restore data from file "cpfile"
# Checkpoint created Fri Jul  7 13:20:28 2000
# Restoring state at time 20 ns, iteration 1
# Restore in progress ...
# Restored instance info "my_for_model"
VSIM 5&gt; run 40
VSIM 6&gt; restart -f
# Cleaning up...
# Loading ./for_model.sl
VSIM 7&gt; run 15
VSIM 8&gt; checkpoint cpf2
# Saving instance info pointer to "my_for_model_restart"
VSIM 9&gt; run 25
VSIM 10&gt; restore cpf2
# Loading checkpoint/restore data from file "cpf2"
# Checkpoint created Fri Jul  7 13:20:52 2000
# Restoring state at time 15 ns, iteration 1
# Restore in progress ...
# Restored instance info "my_for_model_restart"
VSIM 11&gt; run 35
VSIM 12&gt; quit
# Cleaning up...</code></pre></div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent Topic:</strong> <a class="link" href="../topics/MGCChap_FliFunctionDefinitions_id33771d04.html" title="This chapter describes the FLI functions in detail, explaining their purpose, syntax, and usage.">FLI Function Definitions</a></div>
</div>
</div></div>
</div>
<!--BeginFooterContent--><div class="BlankFooter" id="BlankFooter"> </div><div class="Footer" id="Footer"> </div><script type="text/javascript"><!--
                PDFLinkTitle = "InfoHub.Help"
                DocHandle = "fli"
                DocTitle = "Foreign Language Interface Manual"
                PageTitle = "mti_Realloc()"
                Copyright = "2020"
                ThisTopic = "PointingtoaCommoncustomerjsFile";
                CurrentFile = "topics/Command_MtiRealloc_ide0744654.html"
                CurrentFileID = "3";
                topicFooter();
            --></script><noscript><p class="MGCFooter">Foreign Language Interface Manual Software Version 2020.4<br />Unpublished work. © Siemens 2020<br /><a href="../../mgc_html_help/nsmgchelp.htm" target="_blank">Browser Requirements</a></p></noscript></body>
</html>